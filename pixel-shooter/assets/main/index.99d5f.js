window.__require=function e(t,n,i){function o(c,s){if(!n[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+c+"'")}
c=r}
var h=n[c]={exports:{}};t[c][0].call(h.exports,function(e){return o(t[c][1][e]||e)},h,h.exports,e,t,n,i)}
return n[c].exports}
for(var a="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({AD_4399Box:[function(e,t,n){"use strict";cc._RF.push(t,"6820db6HmFCJ61lUbT7Zrus","AD_4399Box"),window.AD_4399Box={init:function(){AD.chanelName==AD.chanelName1&&"4399Box"==AD.chanelName&&gamebox.login()},shiPin:function(){if(AD.chanelName==AD.chanelName1&&"4399Box"==AD.chanelName){var e=!1,t=gamebox.createRewardedVideoAd();t.show().catch(function(){t.load().then(function(){return t.show()}).catch(function(e){console.log("激励视频 广告显示失败",e)})});t.onLoad(function e(n){console.info("RewardedVideo onLoad"+n),t.offLoad(e)}),t.onClose(function n(i){console.info("RewardedVideo onClose"+i),t.offClose(n),t.destroy(),e&&AD.reward()}),t.onError(function e(n){console.info("RewardedVideo onError"+n),t.offError(e),t.destroy()}),t.onCompleted(function n(i){console.info("RewardedVideo onCompleted"+i),t.offCompleted(n),e=!0})}},showBanner:function(){var e=this,t=gamebox.getSystemInfoSync().pixelRatio,n=320*t,i=50*t,o=(gamebox.getSystemInfoSync().screenWidth*t-n)/2,a=gamebox.getSystemInfoSync().screenHeight*t-i;this.bannerAD=gamebox.createBannerAd({style:{width:n,height:i,left:o,top:a}}),this.bannerAD.show().catch(function(e){console.info("Banner 广告显示失败",e)});this.bannerAD.onLoad(function t(n){console.info("Banner onLoad"+n),e.bannerAD.offLoad(t)}),this.bannerAD.onError(function t(n){console.info("Banner onError"+n),e.bannerAD.offError(t)})},hideBanner:function(){this.bannerAD&&(this.bannerAD.hide(),this.bannerAD.destroy())},chaPing:function(){var e=gamebox.createInterstitialAd();e.show().catch(function(){e.load().then(function(){return e.show()}).catch(function(e){console.log("InterstitialAd 广告显示失败",e)})});e.onLoad(function t(n){console.info("InterstitialAd onLoad"+n),e.offLoad(t)}),e.onClose(function t(n){console.info("InterstitialAd onClose"+n),e.offClose(t),e.destroy()}),e.onError(function t(n){console.info("InterstitialAd onError"+n),e.offError(t),e.destroy()})}},cc._RF.pop()},{}],AD_BD:[function(e,t,n){"use strict";cc._RF.push(t,"424e9Lm1lRD5IH015/QPN6l","AD_BD"),window.AD_BD={appSid_BD:"cc2d724b",videoID_BD:"7412184",bannerADType:0,_bannerAd:null,videoIsPlaying:!1,init:function(){swan.createCanvas().getContext("2d").fillRect(0,0,0,0),swan.setEnableDebug({enableDebug:!1})},shiPin:function(){if(0==AD_BD.videoIsPlaying){AD_BD.videoIsPlaying=!0,console.log("调用视频"),cc.audioEngine.pauseAll(),cc.director.pause();var e=swan.createRewardedVideoAd({adUnitId:AD_BD.videoID_BD,appSid:AD_BD.appSid_BD});e.load().then(function(){return e.show()}).catch(function(e){return console.log(e)});var t=function(){console.log("BD广告加载成功")};e.onLoad(t),e.offLoad(t),e.onError(function(e){console.log("错误 "+e),cc.director.resume(),setTimeout(function(){cc.audioEngine.resumeAll()},100),AD_BD.videoIsPlaying=!1});e.onClose(function t(n){e.offClose(t),cc.director.resume(),setTimeout(function(){cc.audioEngine.resumeAll()},100),AD_BD.videoIsPlaying=!1,n.isEnded?(console.log("激励视频完整播放后关闭"),AD.reward()):console.log("激励视频中途被关闭")})}},daoLiang:function(e){swan.navigateToMiniProgram({appKey:e,path:"/path/page/0",extraData:{},success:function(e){console.log("navigateToMiniProgram success",e)},fail:function(e){console.log("navigateToMiniProgram fail",e)}})},share:function(){swan.shareAppMessage({})},showBanner:function(){ADD.globalNode.showBDView()},hideBanner:function(){cc.director.emit("销毁")}},cc._RF.pop()},{}],AD_QQ_BlockAD:[function(e,t,n){"use strict";cc._RF.push(t,"01fb9MXfXNEtqsxihdn3teU","AD_QQ_BlockAD"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)},start:function(){"QQ"==AD.chanelName1&&(this.secondQQ=0,this.schedule(function(){this.secondQQ++,AD_QQ.secondQQ++,this.secondQQ>5&&(this.secondQQ%15==7?AD_QQ.blockADQQHide():this.secondQQ%15==9&&AD_QQ.blockADQQShow())},1))}}),cc._RF.pop()},{}],AD_QQ:[function(e,t,n){"use strict";cc._RF.push(t,"bebc5iMBMNPl46keF8Be2u8","AD_QQ"),window.AD_QQ={shareCount:1,TTBanner:null,QQgameBox:null,hadShowQQSaveToDesk:!1,AD_QQ_Video:"19410b59a180cdc12f6a8c9fe7c12704",AD_QQ_Block:"78600b51a172ceeef341e5a154a798b8",AD_QQ_AppBox:"70efa8607245bd1957f575aefbfc7433",AD_QQ_Banner:"72a046233517d821352ab234fe321751 ",secondQQ:0,secondQQMax:5,shiPin:function(){if(console.log("视频展示 "),AD.chanelName==AD.chanelName1){var e=qq.createRewardedVideoAd({adUnitId:AD_QQ.AD_QQ_Video});e.load().then(function(){return e.show()}).catch(function(e){return console.log(e)});e.onClose(function t(n){n.isEnded&&(console.log("激励视频完整播放后关闭"),AD.reward(),e.offClose(t))});e.onError(function(e){console.log(" res.errMsg  "+e.errMsg+" res.errCode "+e.errCode)})}},chaPing:function(){console.log("显示插屏   "+AD_QQ.secondQQ),AD.chanelName==AD.chanelName1&&AD.wuDianRate>0&&AD_QQ.secondQQ>=this.secondQQMax&&AD_QQ.gameBoxQQ()},gameBoxQQ:function(){AD.chanelName==AD.chanelName1&&(console.log("调用盒子广告"),null==AD_QQ.QQgameBox?(AD_QQ.secondQQ=0,AD_QQ.hideBanner(),AD_QQ.QQgameBox=qq.createAppBox({adUnitId:AD_QQ.AD_QQ_AppBox}),AD_QQ.QQgameBox.load().then(function(){return AD_QQ.QQgameBox.show()},console.log("盒子广告加载成功")).catch(function(e){console.log("盒子广告加载错误 "+e)})):null!=AD_QQ.QQgameBox&&(AD_QQ.secondQQ=0,AD_QQ.QQgameBox.show()))},initBanner:function(){if(AD.chanelName==AD.chanelName1){null!=AD_QQ.TTBanner&&AD_QQ.TTBanner.destroy(),console.log("banner init"),this.infoScreed=qq.getSystemInfoSync();var e=this.infoScreed.screenHeight,t=this.infoScreed.screenWidth;AD_QQ.TTBanner=qq.createBannerAd({adUnitId:AD_QQ.AD_QQ_Banner,style:{top:e-.6*t*(88/208)+120,left:(t-.6*t)/2,width:300},testDemoType:"65"}),AD_QQ.TTBanner.onResize(function(e){console.log("改变size"),console.log("改变size"),AD_QQ.TTBanner.style.left=(t-e.width)/2,AD_QQ.TTBanner.style.width=300});AD_QQ.TTBanner.onLoad(function(){console.log("banner加载成功"),AD_QQ.TTBanner.show()}),AD_QQ.TTBanner.onError(function(e){console.log("res.errMsg "+e.errMsg+" res.errCode "+e.errCode)})}},showBanner:function(){console.log("banner 调用"),AD.chanelName==AD.chanelName1&&AD_QQ.initBanner()},hideBanner:function(){AD.chanelName==AD.chanelName1&&null!=AD_QQ.TTBanner&&AD_QQ.TTBanner.destroy()},shareOver:function(e,t){console.log(" =====shareOver");e>3e3+500*(1==AD_QQ.shareCount?0:2==AD_QQ.shareCount||3==AD_QQ.shareCount?1:4==AD_QQ.shareCount||5==AD_QQ.shareCount?2:6==AD_QQ.shareCount||7==AD_QQ.shareCount?3:8==AD_QQ.shareCount||9==AD_QQ.shareCount?4:10==AD_QQ.shareCount||11==AD_QQ.shareCount?5:6)?(AD_QQ.shareCount++,console.log("============分享解锁"),GlobalData.saveDiamondNum(20)):AD_QQ.shareLose(t)},shareLose:function(e){qq.showToast({title:"分享失败,请稍后重试!",icon:"none",duration:2e3})},share:function(e){var t=!1,n=!1,i=Tools.getDate("millisecond");qq.offShow(),qq.offHide(),qq.onShow(function(o){if(console.log("显示:"+JSON.stringify(o)+t+n),t&&n){var a=Tools.getDate("millisecond")-i;console.log(a+"...花费时间"),AD_QQ.shareOver(a,e)}else t&&console.log("分享失败2")}),qq.onHide(function(){console.log("隐藏"+t+n),t&&!n&&(console.log("开始计时"),n=!0,0)}),t=!0,qq.shareAppMessage({title:AD_QQ.shareDESC_TT,imageUrl:AD_QQ.imgUrl})},blockADQQInit:function(){if(AD.chanelName==AD.chanelName1){console.log("调用积木");var e=qq.getSystemInfoSync(),t=e.screenHeight,n=e.screenWidth;console.log("屏幕高度："+t),console.log("屏幕宽度："+n),AD_QQ.blockAd=qq.createBlockAd({adUnitId:AD_QQ.AD_QQ_Block,style:{top:t/8,left:n/2}}),AD_QQ.blockAd.onLoad(function(e){AD_QQ.blockAd.show(),console.log("QQ游戏积木广告获取成功")}),AD_QQ.blockAd.onError(function(e){console.log("QQ游戏积木广告获取失败"),console.log(e),console.log("QQ游戏积木广告获取失败")}),AD_QQ.blockAd.onResize(function(e){console.log("改变size"),AD_QQ.blockAd.style.left=n-e.width})}},blockResetSize:function(){},blockADQQShow:function(){AD.chanelName==AD.chanelName1&&AD_QQ.blockADQQInit()},blockADQQHide:function(){AD.chanelName==AD.chanelName1&&AD_QQ.blockAd&&AD_QQ.blockAd.destroy()},saveToDesktopQQ:function(){AD.chanelName==AD.chanelName1&&(AD_QQ.hadShowQQSaveToDesk||(AD_QQ.hadShowQQSaveToDesk=!0,AD_QQ.isIOS?AD_QQ.colorSignQQ():qq.saveAppToDesktop({success:function(){console.log("添加成功")},fail:function(){console.log("添加失败")},complete:function(){console.log("添加完成"),AD_QQ.colorSignQQ()}})))},colorSignQQ:function(){AD.chanelName==AD.chanelName1&&qq.addColorSign({success:function(){console.log("彩签 添加成功")},fail:function(){console.log("彩签 添加失败")},complete:function(){console.log("彩签 添加完成")}})},initQQ:function(){AD.chanelName==AD.chanelName1&&(qq.showShareMenu({showShareItems:["qq","qzone","wechatFriends","wechatMoment"]}),qq.onShareAppMessage(function(){return{title:AD_QQ.shareDESC_TT,imageUrl:AD_QQ.imgUrl}}),qq.getSystemInfo({success:function(e){console.log("QQ系统信息  "+e.system),console.log("是IOS吗"+e.system.indexOf("iOS")!=-1),AD_QQ.isIOS=-1!=e.system.indexOf("iOS")}}))},getShareRes:function(e,t,n){},changeImgUrl:function(e,t){},goToVideo:function(){},shakeSmall:function(){},shakeBig:function(){},showTuBiao:function(){},openDataContext:null,login:function(){},getUserInfo:function(){},setRoleInfo:function(){},userMandate:function(){},rankingOperation:function(e){},rankingOperationRenQi:function(e){}},cc._RF.pop()},{}],AD_TouTiao:[function(e,t,n){"use strict";cc._RF.push(t,"713862JkMBB1KY9jiKQOciF","AD_TouTiao"),window.AD_TouTiao={bannerID_TT:"12n1lhlka3b1345865",videoID_TT:"1lj6n2dahb2gfbcf45",chaPing_TT:"16b3h4eihe6d49qqln",shareID_TT:"2552ffjcoa03if12bf",appName:"像素英雄枪战",shareTitle_TT:"多人像素枪战，全民来PK！",shareDESC_TT:"多人像素枪战，全民来PK！",phone:"null",transcribeBoo:!1,fenXiangBoo:!1,autoVideoBoo:!1,fenXiangImgBoo:!1,autoVideoNum:0,chaPing:function(){if((console.log("显示插屏"),AD.chanelName==AD.chanelName1)&&!("ios"===tt.getSystemInfoSync().platform)){var e=tt.createInterstitialAd({adUnitId:AD_TouTiao.chaPing_TT});if(console.log("进来了"),!e)return;e.load().then(function(){console.log("成功调取插屏"),e.show()}).catch(function(e){console.log("头条插屏错误   "+JSON.stringify(e))}),e.onClose(function(){e.destroy(),console.log("头条插屏关闭  后销毁 ")}),e.onError(function(e){console.log("头条插屏错误1   "+JSON.stringify(e))})}},shiPin:function(){if(AD.chanelName==AD.chanelName1){var e=0,t=tt.createRewardedVideoAd({adUnitId:AD_TouTiao.videoID_TT});t.load().then(function(){t.show(),cc.director.pause()}).catch(function(e){console.log(e.errMsg)});var n=function(){console.log("sdk videoAd start ........")},i=function i(a){console.log(JSON.stringify(a)),e>=0&&e<1?(t.load().then(function(){t.show()}).catch(function(e){console.log(e.errMsg),cc.director.resume()}),e++):e>=1&&(t.offLoad(n),t.offClose(o),t.offError(i),console.log("miaoju_watch_retry_times"+e),e=-1)},o=function e(o){console.log("临时关闭视频："+o),o.isEnded?(console.log("视频成功了，走成功回调"),cc.director.resume(),AD.reward()):(console.log("视频失败了，走失败回调"),cc.director.resume()),t.offLoad(n),t.offClose(e),t.offError(i)};t.onLoad(n),t.onError(i),t.onClose(o)}else AD.reward()},initBanner:function(){if(AD.chanelName==AD.chanelName1){console.log("头条banner init");var e=tt.getSystemInfoSync(),t=e.windowWidth,n=e.windowHeight;AD_TouTiao.TTBanner=tt.createBannerAd({adUnitId:AD_TouTiao.bannerID_TT,style:{width:108,top:n-60.75-10}}),AD_TouTiao.TTBanner.onResize(function(e){console.log("改变size"),AD_TouTiao.TTBanner.style.left=(t-e.width)/2,AD_TouTiao.TTBanner.style.top=n-e.height}),AD_TouTiao.TTBanner.onLoad(function(){});AD_TouTiao.TTBanner.onError(function(e){console.log(e)})}},showBanner:function(){console.log("banner 调用"),AD.chanelName==AD.chanelName1&&(null==AD_TouTiao.TTBanner&&AD_TouTiao.initBanner(),AD_TouTiao.TTBanner.show().then(function(){console.log("广告显示成功")}).catch(function(e){console.log("广告组件出现问题",e)}))},hideBanner:function(){AD.chanelName==AD.chanelName1&&null!=AD_TouTiao.TTBanner&&("Toutiao"===tt.getSystemInfoSync().appName?(AD_TouTiao.TTBanner.destroy(),AD_TouTiao.TTBanner=null,AD_TouTiao.initBanner()):AD_TouTiao.TTBanner.hide())},luPingBegin:function(){if("touTiao"==AD.chanelName1&&AD.chanelName==AD.chanelName1){console.log("录屏开始"),console.log("luping  開始"),AD_TouTiao.transcribeBoo=!1,AD_TouTiao.fenXiangBoo=!1,AD_TouTiao.resVideoPathTouTiao=null;var e=tt.getGameRecorderManager();e&&(tt.onShow(function(t){e.resume()}),tt.onHide(function(){e.pause()}),e.onStart(function(e){console.log("录屏开始")}),e.start({duration:300}))}},luPingOver:function(){if("touTiao"==AD.chanelName1&&AD.chanelName==AD.chanelName1&&1!=AD_TouTiao.transcribeBoo&&(AD_TouTiao.transcribeBoo=!0,console.log("录屏结束"),AD.chanelName==AD.chanelName1)){console.log("luping  結束");var e=tt.getGameRecorderManager();if(!e)return;tt.offShow(function(){}),tt.offHide(function(){}),e.onStop(function(e){AD_TouTiao.resVideoPathTouTiao=e.videoPath,console.log("录屏结束："+e.videoPath),console.log("录屏结束："+e)}),e.stop()}},luPingShare:function(){"touTiao"==AD.chanelName1&&AD.chanelName==AD.chanelName1&&null!=AD_TouTiao.resVideoPathTouTiao&&(cc.log("分享视频 = "+AD_TouTiao.resVideoPathTouTiao),tt.shareAppMessage({channel:"video",query:"",templateId:AD_TouTiao.shareID_TT,title:AD_TouTiao.shareTitle_TT,desc:AD_TouTiao.shareDESC_TT,extra:{videoPath:AD_TouTiao.resVideoPathTouTiao,videoTopics:[AD_TouTiao.appName,"抖音小游戏"],hashtag_list:[AD_TouTiao.appName,"抖音小游戏"],video_title:AD_TouTiao.shareDESC_TT},success:function(){console.log("分享视频成功"),AD_TouTiao.fenXiangBoo=!1,cc.director.emit("分享成功")},fail:function(e){console.log(e),console.log("分享视频失败"),e.errMsg&&"shareAppMessage:cancel"!=e.errMsg&&cc.director.emit("系统提示","录屏失败：录屏时长低于 3 秒")}}))},shareTTNormal:function(){AD.chanelName==AD.chanelName1&&(cc.log("分享视频 = "+AD_TouTiao.resVideoPathTouTiao),tt.shareAppMessage({channel:"",query:"",templateId:AD_TouTiao.shareID_TT,title:AD_TouTiao.shareTitle_TT,desc:AD_TouTiao.shareDESC_TT,extra:{videoPath:AD_TouTiao.resVideoPathTouTiao,videoTopics:[AD_TouTiao.appName,AD_TouTiao.shareDESC_TT,"抖音小游戏"]},success:function(){},fail:function(e){console.log(e),console.log("分享视频失败"),e.errMsg&&"shareAppMessage:cancel"!=e.errMsg&&cc.director.emit("系统提示","录屏失败：录屏时长低于 3 秒")}}))},shareOver:function(){AD_TouTiao.chanelName==AD_TouTiao.chanelName1&&(cc.log("分享视频 = "+AD_TouTiao.resVideoPathTouTiao),tt.shareAppMessage({channel:"",query:"",templateId:AD_TouTiao.shareID_TT,title:AD_TouTiao.shareTitle_TT,desc:AD_TouTiao.shareDESC_TT,extra:{videoPath:AD_TouTiao.resVideoPathTouTiao,videoTopics:[AD_TouTiao.appName,AD_TouTiao.shareDESC_TT,"抖音小游戏"]},success:function(){},fail:function(e){console.log(e),console.log("分享视频失败")}}))},addCollection:function(){AD.chanelName==AD.chanelName1&&tt.onFavoriteStateChange&&tt.onFavoriteStateChange(function(e){e?console.log("收藏成功"):console.log("收藏失败")})},moreGameTT:function(){AD.chanelName==AD.chanelName1&&(console.log("moreGame_TT"),tt.onMoreGamesModalClose?(tt.onMoreGamesModalClose(function(e){console.log("modal closed",e)}),tt.onNavigateToMiniProgram(function(e){console.log(e.errCode),console.log(e.errMsg)}),"ios"!==tt.getSystemInfoSync().platform&&tt.showMoreGamesModal({appLaunchOptions:[{appId:"ttd01aa6a74f30eb0f"},{appId:"tt725e04e3ed7480a8"},{appId:"tt2b745dc9b45ef5b3"},{appId:"ttb7bec1032894d01a"},{appId:"ttd472a2cf4b589bc9"},{appId:"tta48bd2363ba18de7"},{appId:"tt4b4f3df2d475b5aa"},{appId:"tt2dde5b63b2e42f61"},{appId:"tta041d6fc3f6bd140"},{appId:"ttc4fbb2465bc1faff"}],success:function(e){console.log("success",JSON.stringify(e))},fail:function(e){console.log("fail",e.errMsg)}})):tt.showModal({title:"提示",content:"当前客户端版本过低，无法使用该功能，请升级客户端或关闭后重启更新。"}))},showMoreGame:function(e){console.log("btnID  "+e),AD_TouTiao.moreGameTT()},onMoreGamesModalClose:function(){return AD.chanelName==AD.chanelName1&&("iOS"!=cc.sys.os&&tt.onMoreGamesModalClose)},addShowFavoriteGuide:function(){AD.chanelName==AD.chanelName1&&tt.showFavoriteGuide({type:"bar",content:"一键添加到我的小程序",position:"bottom",success:function(e){console.log("引导组件展示成功")},fail:function(e){console.log("引导组件展示失败")}})},TDEvent:function(e,t){if(AD.chanelName==AD.chanelName1)switch(e){case 1:TDGA.onMissionBegin("关卡:"+t);break;case 2:TDGA.onMissionCompleted("关卡:"+t);break;case 3:TDGA.onMissionFailed("关卡:"+t,"")}}},cc._RF.pop()},{}],AD_UC:[function(e,t,n){"use strict";cc._RF.push(t,"d73cbXDFb1A9LrPwBnsscUi","AD_UC"),window.AD_UC={ucBanner:null,init:function(){AD.chanelName==AD.chanelName1&&uc.requestScreenOrientation({orientaiton:2,success:function(e){console.log("UC初始化  "+e)},fail:function(e){console.error(e)}})},shiPin:function(){console.log("UC视频调用~~~~!!!!");var e=!1,t=uc.createRewardVideoAd();t.load().then().catch(function(e){return console.log(e)}),t.onLoad(function(){console.log("激励视频广告加载成功0"),e||(e=!0,console.log("激励视频广告加载成功*****"))}),t.show().then().catch(function(e){return console.log(e)}),t.onError(function(e){console.log(e),t.offClose(),t.offLoad(),t.offError()}),t.onClose(function(e){console.log("关闭*****............... "+e.isEnded),e&&e.isEnded&&(console.log("发放奖励*****"),AD.reward()),t.offClose(),t.offLoad(),t.offError()})},chaPing:function(){var e=uc.createInterstitialAd();e.load().then().catch(function(e){return console.log("UC广告加载错误 "+e)}),e.onLoad(function(){console.log("插屏广告加载成功")}),e.show().then().catch(function(e){return console.log("UC展示失败 "+e)}),e.onError(function(e){console.log("UC广告错误 "+e)}),e.onClose(function(e){console.log("UC广告关闭 ")})},initBanner:function(){AD.chanelName,AD.chanelName1},showBanner:function(){if(AD.chanelName==AD.chanelName1){AD_UC.ucBanner&&(AD_UC.ucBanner.destroy(),AD_UC.ucBanner=null),console.log("AD_UC.ucBanner 广告加载 start ");var e=uc.getSystemInfoSync();if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}
var t=(e.screenWidth>e.screenHeight?e.screenHeight:e.screenWidth)/2,n=194*t/345;AD_UC.ucBanner=uc.createBannerAd({style:{width:t,height:n,gravity:7}}),AD_UC.ucBanner.onError(function(e){console.log("AD_UC.ucBanner 广告加载出错",e)}),AD_UC.ucBanner.onLoad(function(){console.log("AD_UC.ucBanner 广告加载成功")}),AD_UC.ucBanner.show()}},hideBanner:function(){AD.chanelName==AD.chanelName1&&AD_UC.ucBanner&&(AD_UC.ucBanner.hide(),AD_UC.ucBanner.destroy(),AD_UC.ucBanner=null)},share:function(){AD.chanelName==AD.chanelName1&&uc.shareAppMessage({query:"",success:function(e){console.log("UC分享成功 ",JSON.stringify(e))},fail:function(e){console.log("UC分享失败 ",JSON.stringify(e))}})}},cc._RF.pop()},{}],AD_WX:[function(e,t,n){"use strict";cc._RF.push(t,"ef1b5Nza8NGSrJs4f0/d6EP","AD_WX"),window.AD_WX={chaPingID:"adunit-e3126d90c5a62208",shiPinID:"adunit-617dfb4d903a0e5d",bannerID:"adunit-d019a53cec8d8901",wx_ad_yuanSheng:"adunit-79a260cae93c1a26",bannerWX:null,share_wx_title:"多人像素枪战，全民来PK！",share_wx_imageUrlId:"I8zcAoNaQsSUvQOSGBfNXg==",videoIsShowing:!1,yuanShengIsOk:!1,shareCount:1,shareContent:{title:"多人像素枪战，全民来PK！",imageUrlId:"I8zcAoNaQsSUvQOSGBfNXg=="},chaPing:function(){if("WX"==AD.chanelName){console.log("插屏广告初始化   ");var e=wx.createInterstitialAd({adUnitId:AD_WX.chaPingID});e.onLoad(function(){e.show(),e.offLoad()});e.onError(function(e){console.log("插屏错误 "+e.errMsg+"errCode "+e.errCode)});e.onClose(function(t){console.log("插屏关闭 "+JSON.stringify(t)),e=null})}},shiPin:function(){if(console.log("视频展示 "),"WX"==AD.chanelName){AD_WX.videoIsShowing=!1;var e=0,t=wx.createRewardedVideoAd({adUnitId:AD_WX.shiPinID});t.load().then(function(){cc.game.pause(),t.show(),AD_WX.hideYuanSheng(),AD_WX.videoIsShowing=!0}).catch(function(e){console.log(e.errMsg)});var n=function(){},i=function i(a){console.log(JSON.stringify(a)),e>=0&&e<1?(t.load().then(function(){t.show(),AD_WX.hideYuanSheng(),AD_WX.videoIsShowing=!0}).catch(function(e){console.log("视频错误 "+a.errMsg+"errCode "+a.errCode)}),e++):e>=1&&(t.offLoad(n),t.offClose(o),t.offError(i),console.log("miaoju_watch_retry_times"+e),e=-1)},o=function e(o){cc.game.resume(),console.log(o),AD_WX.videoIsShowing=!1,o.isEnded&&AD.reward(),cc.director.resume(),t.offLoad(n),t.offClose(e),t.offError(i)};t.onLoad(n),t.onError(i),t.onClose(o)}},showBanner:function(){if(console.log("banner 调用"),"WX"==AD.chanelName){this.hideBanner();var e=wx.getSystemInfoSync();console.log(e);AD_WX.bannerWX=wx.createBannerAd({adUnitId:AD_WX.bannerID,adIntervals:40,style:{left:(e.windowWidth-300)/2,top:e.windowHeight-80,width:300}}),AD_WX.bannerWX.show(),AD_WX.bannerWX.onResize(function(t){AD_WX.bannerWX.style.top=e.windowHeight-AD_WX.bannerWX.style.realHeight});AD_WX.bannerWX.onError(function(e){console.log("插屏错误 "+e.errMsg+"errCode "+e.errCode)})}},hideBanner:function(){"WX"==AD.chanelName&&AD_WX.bannerWX&&(console.log("banner 隐藏 "),AD_WX.bannerWX.hide(),AD_WX.bannerWX.destroy())},shareOver:function(e,t){e>3e3+500*(1==AD_WX.shareCount?0:2==AD_WX.shareCount||3==AD_WX.shareCount?1:4==AD_WX.shareCount||5==AD_WX.shareCount?2:6==AD_WX.shareCount||7==AD_WX.shareCount?3:8==AD_WX.shareCount||9==AD_WX.shareCount?4:10==AD_WX.shareCount||11==AD_WX.shareCount?5:6)?(AD_WX.shareCount++,GlobalData.saveDiamondNum(20)):AD_WX.shareLose()},shareLose:function(){cc.director.emit("系统提示","分享失败，请稍后重试")},shareAndCallback:function(e){var t=!1,n=!1,i=Tools.getDate("millisecond");wx.offShow(),wx.offHide(),wx.onShow(function(o){if(console.log("显示:"+JSON.stringify(o)+t+n),t&&n){var a=Tools.getDate("millisecond")-i;console.log(a+"...花费时间"),AD_WX.shareOver(a,e)}else t?(console.log("分享失败2"),AD_WX.shareLose(e)):AD_WX.shareLose(e)}),wx.onHide(function(){console.log("隐藏"+t+n),t&&!n&&(console.log("开始计时"),n=!0,0)}),t=!0,wx.shareAppMessage(AD_WX.shareContent)},init:function(){"WX"==AD.chanelName&&(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){return{title:AD_WX.share_wx_title,imageUrl:AD_WX.share_wx_imageUrlId}}))},showYuanSheng:function(){if("WX"==AD.chanelName&&!AD_WX.videoIsShowing){var e=wx.getSystemInfoSync(),t=e.screenHeight,n=e.screenWidth;console.log("屏幕高度："+t),console.log("屏幕宽度："+n),AD_WX.yuanSheng=wx.createCustomAd({adUnitId:AD_WX.wx_ad_yuanSheng,adIntervals:30,style:{top:50,left:n/8*7,fixed:!0}}),AD_WX.yuanSheng.onLoad(function(e){AD_WX.yuanShengIsOk=!0,AD_WX.yuanSheng.show(),console.log("原生广告加载成功 展示"),AD_WX.yuanSheng.offLoad()}),AD_WX.yuanSheng.onError(function(e){console.log("原生广告加载错误  errMsg "+e.errMsg+"     errCode  "+e.errCode),AD_WX.yuanSheng.offError()})}},hideYuanSheng:function(){AD_WX.yuanSheng&&(AD_WX.yuanSheng.destroy(),AD_WX.yuanSheng=null,AD_WX.yuanShengIsOk=!1)}},cc._RF.pop()},{}],AD_android:[function(e,t,n){"use strict";cc._RF.push(t,"3bc30trT39DL6p/7W2uJ2Aq","AD_android"),window.AD_android={shiPin:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","shiPin","(Ljava/lang/String;)V","视频")},showIcon:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showIcon","(Ljava/lang/String;)V","iconAD")},hideIcon:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideIcon","(Ljava/lang/String;)V","iconAD")},chaPing:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","chaPing","(Ljava/lang/String;)V","插屏")},chaPingVideo:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","chaPingVideo","(Ljava/lang/String;)V","插屏视频")},showBanner:function(){cc.sys.os==cc.sys.OS_ANDROID&&(console.log("调用安卓方法插屏 "),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showBanner","(Ljava/lang/String;)V","showBanner"))},hideBanner:function(){cc.sys.os==cc.sys.OS_ANDROID&&(console.log("调用安卓方法插屏 "),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideBanner","(Ljava/lang/String;)V","hideBanner"))},moreGame:function(){console.log("超休闲 "),cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","moreGame","(Ljava/lang/String;)V",JSON.stringify("超休闲"))}},cc._RF.pop()},{}],AD_oppo:[function(e,t,n){"use strict";cc._RF.push(t,"4e827ADtHNEIawjgzFgLAEQ","AD_oppo"),window.AD_oppo={bannerID_TT:"",videoID_TT:"423519",chaPing_TT:["423516","423517","423518"],banner_electBox:"220455",chaPingNum:0,gameSkipNum:0,pkgNameAll:["com.srdbp2.nearme.gamecenter","com.mzqz.nearme.gamecenter","com.mor.tddzz.nearme.gamecenter","com.kdddmx.nearme.gamecenter"],reportingBoo:!1,chaPingBoo:!1,bennerBoo:!1,levelNum:0,loadData:function(){console.log("显示插屏"),AD.chanelName==AD.chanelName1&&"oppo"==AD.chanelName1&&(AD_oppo.chaPingNum++,AD_oppo.chaPingNum>2&&(AD_oppo.chaPingNum=0),AD_oppo.nativeAd=qg.createNativeAd({adUnitId:AD_oppo.chaPing_TT[AD_oppo.chaPingNum]}),AD_oppo.nativeAd.load(),AD_oppo.nativeAd.onError(function(e){console.log("加载失败"+JSON.stringify(e)),AD_oppo.nativeAd.offError(),AD_oppo.nativeAd.offLoad()}),AD_oppo.nativeAd.onLoad(function(e){if(console.log("原生广告加载完成",JSON.stringify(e)),e&&e.adList){var t=e.adList,n=JSON.stringify(t),i=JSON.parse(n);AD_oppo.result=i[i.length-1],cc.director.emit("oppo_ChaPingShuaXin"),AD_oppo.reportingBoo=!1}
AD_oppo.nativeAd.offError(),AD_oppo.nativeAd.offLoad()}))},shiPin:function(){AD.chanelName==AD.chanelName1?(console.log("调起视频",+AD_oppo.videoID_TT),null!=AD_oppo.videoAd_Revive&&AD_oppo.videoAd_Revive.destroy(),AD_oppo.videoAd_Revive=qg.createRewardedVideoAd({adUnitId:AD_oppo.videoID_TT}),AD_oppo.videoAd_Revive.load(),AD_oppo.videoAd_Revive.onLoad(function(){console.log("激励视频加载成功"),AD_oppo.videoAd_Revive.show(),AD_oppo.videoAd_Revive.offLoad()}),AD_oppo.videoAd_Revive.onVideoStart(function(){AD_oppo.videoAd_Revive.offVideoStart(),console.log("激励视频 开始播放")}),AD_oppo.videoAd_Revive.onError(function(e){AD_oppo.videoAd_Revive.offError(),qg.showToast({title:"暂无广告，请稍后重试",duration:2e3}),console.log("激励视频 加载错误:  "+JSON.stringify(e))}),AD_oppo.videoAd_Revive.onClose(function(e){console.log("视频关闭  结果是   "+JSON.stringify(e)),e.isEnded?(console.log("复活 激励视频广告完成，发放奖励"),AD.reward(),AD_oppo.videoAd_Revive.offClose()):(AD_oppo.videoAd_Revive.offClose(),console.log("激励视频广告取消关闭，不发放奖励"))})):AD.reward()},initBanner:function(){},showBanner:function(){},hideBanner:function(){},addDesktop:function(){AD.chanelName==AD.chanelName1&&qg.hasShortcutInstalled({success:function(e){0==e&&qg.installShortcut({success:function(){},fail:function(e){},complete:function(){}})},fail:function(e){},complete:function(){}})},gameSkipOppo:function(e){AD.chanelName==AD.chanelName1&&qg.navigateToMiniGame({pkgName:AD_oppo.pkgNameAll[e],path:"?page=pageB",extraData:{from:"pageA"},success:function(){},fail:function(e){console.log(JSON.stringify(e))}})},oppo_jiuGong:function(){},luPingBegin:function(){},lupingOver:function(){},luPingShare:function(){},share:function(){AD.chanelName==AD.chanelName1&&(console.log("点击分享"),qg.share())},moreGameTT:function(){},showMoreGame:function(e){},onMoreGamesModalClose:function(){return AD.chanelName==AD.chanelName1&&(cc.sys.os,!1)},addShowFavoriteGuide:function(){},TDEvent:function(e,t){if(AD.chanelName==AD.chanelName1)switch(e){case 1:TDGA.onMissionBegin(t);break;case 2:TDGA.onMissionCompleted(t)}}},cc._RF.pop()},{}],AD_vivo:[function(e,t,n){"use strict";cc._RF.push(t,"7d8d1dScW9D/5q342ZX+Fh5","AD_vivo"),window.AD_vivo={bannerID_TT:"5aad45a117614f3ab90639b04df41efd",videoID_TT:"1bc275b034754e7da3206c316e901103",chaPing_TT:["351ee9d8f5f64de1b250d2c1e2b60b74","ffb5345ba6ed4dd0af4d1e4fbd57c970"],isAutoChaPing:!0,chaPingNum:0,gameSkipNum:0,pkgNameAll:["com.srdbp2.nearme.gamecenter","com.mzqz.nearme.gamecenter","com.mor.tddzz.nearme.gamecenter","com.kdddmx.nearme.gamecenter"],reportShow:!1,reportClick:!1,chaPingBoo:!1,bennerBoo:!1,addZhuoMianBoo:!1,levelNum:0,TTBanner:null,couldShowChaPing:!0,chaPingInterval:5,loadData:function(){if(this.isAutoChaPing&&(console.log("显示插屏"),AD.chanelName==AD.chanelName1&&"vivo"==AD.chanelName1)){null==AD_vivo.nativeAd&&(AD_vivo.chaPingNum++,AD_vivo.chaPingNum==this.chaPing_TT.length&&(AD_vivo.chaPingNum=0),AD_vivo.nativeAd=qg.createNativeAd({adUnitId:AD_vivo.chaPing_TT[AD_vivo.chaPingNum]}));var e=this.nativeAd.load();e&&e.then(function(){console.log("=======加载成功")}).catch(function(e){console.log("加载失败",JSON.stringify(e))}),AD_vivo.nativeAd.onLoad(function(e){if(console.log("原生广告加载完成",JSON.stringify(e)),e&&e.adList){var t=e.adList,n=JSON.stringify(t),i=JSON.parse(n);AD_vivo.result=i[i.length-1],AD_vivo.reportShow=!1,AD_vivo.reportClick=!1,cc.director.emit("vivo_dataShuaXin")}})}},shiPin:function(){if(AD.chanelName==AD.chanelName1){var e=qg.createRewardedVideoAd({posId:AD_vivo.videoID_TT});e.onError(function(e){cc.audioEngine.resumeAll(),console.log("激励视频广告加载失败",e),qg.showToast({message:"暂无广告"})}),e.onLoad(function(t){console.log("激励视频广告加载完成-onload触发",JSON.stringify(t)),cc.audioEngine.pauseAll(),e.show().then(function(){console.log("激励视频广告展示完成")}).catch(function(e){switch(cc.audioEngine.resumeAll(),console.log("激励视频广告展示失败",JSON.stringify(e)),qg.showToast({message:"暂无广告"}),e.errCode){case-3:console.log("激励广告加载失败---调用太频繁",JSON.stringify(e));break;case-4:console.log("激励广告加载失败--- 一分钟内不能重复加载",JSON.stringify(e));break;case 30008:break;default:console.log("激励广告展示失败")}})});e.onClose(function(e){cc.audioEngine.resumeAll(),console.log("视频广告关闭回调"),e&&e.isEnded?(console.log("正常播放结束，可以下发游戏奖励"),AD.reward()):console.log("播放中途退出，不下发游戏奖励")})}else AD.reward()},initBanner:function(){if(AD_vivo.chanelName==AD_vivo.chanelName1){var e=qg.getSystemInfoSync(),t=(e.screenHeight,e.screenWidth);AD_vivo.TTBanner=qg.createBannerAd({posId:AD_vivo.bannerID_TT}),AD_vivo.TTBanner.onResize(function(e){console.log("改变size"),AD_vivo.TTBanner.style.left<(t-e.width)/2&&(AD_vivo.TTBanner.style.left=(t-e.width)/2)}),AD_vivo.TTBanner.onLoad(function(){});AD_vivo.TTBanner.onError(function(e){console.log(e)})}},showBanner:function(){console.log("banner 调用  showBanner"),AD.chanelName==AD.chanelName1&&(this.isAutoChaPing?cc.director.emit("vivo_bannerShow"):(null==AD_vivo.TTBanner&&AD_vivo.initBanner(),AD_vivo.TTBanner.show().then(function(){console.log("广告显示成功")}).catch(function(e){console.log("广告组件出现问题",JSON.stringify(e))})))},hideBanner:function(){AD.chanelName==AD.chanelName1&&(this.isAutoChaPing?cc.director.emit("vivo_bannerClose"):null!=AD_vivo.TTBanner&&(AD_vivo.TTBanner.destroy(),AD_vivo.TTBanner=null,AD_vivo.initBanner()))},chaPing:function(){var e=this;AD.chanelName==AD.chanelName1&&setTimeout(function(){if(e.isAutoChaPing)cc.director.emit("vivo_ChaPingShow");else{var t=qg.getSystemInfoSync(),n=t.screenHeight,i=t.screenWidth;if(e.couldShowChaPing&&(setTimeout(function(){e.couldShowChaPing=!0},1e3*e.chaPingInterval),e.couldShowChaPing=!1,AD_vivo.chaPingNum++,AD_vivo.chaPingNum>2&&(AD_vivo.chaPingNum=0),qg.createCustomAd)){console.log("当前屏幕高度："+n);var o=qg.createCustomAd({posId:AD_vivo.chaPing_TT[AD_vivo.chaPingNum],style:{top:(n-630)/2,left:(i-720)/2}});o.onError(function(e){console.log("原生模板广告加载失败",e)}),o.show().then(function(){console.log("原生模板广告展示完成")}).catch(function(e){console.log("原生模板广告展示失败",JSON.stringify(e))})}}},500)},addDesktop:function(){AD.chanelName==AD.chanelName1&&AD_vivo.addZhuoMianBoo&&qg.hasShortcutInstalled({success:function(e){0==e&&qg.installShortcut({success:function(){},fail:function(e){},complete:function(){}})},fail:function(e){},complete:function(){}})},gameSkipOppo:function(){},oppo_jiuGong:function(){},luPingBegin:function(){},lupingOver:function(){},luPingShare:function(){},shareOver:function(){AD.chanelName==AD.chanelName1&&qg.share()},moreGameTT:function(){},showMoreGame:function(e){},onMoreGamesModalClose:function(){return AD.chanelName==AD.chanelName1&&(cc.sys.os,!1)},addShowFavoriteGuide:function(){},TDEvent:function(e,t){}},cc._RF.pop()},{}],AD:[function(e,t,n){"use strict";cc._RF.push(t,"733571NS3xM95UvFWwMJjQE","AD"),window.AD={chanelName:"4399",chanelName1:"4399",delayTime:0,wuDianRate:0,btnCloseIsBig:!1,gameOverTimes:0,showAD:function(e,t){t&&console.log("调用广告  "+t.name),this.callN=t,this.callerN=e,true?this.reward():this.shiPin()},reward:function(){console.log("奖励  "),AD.callN&&AD.callerN&&AD.callerN.call(AD.callN)},shiPin:function(){switch(this.chanelName){case "android":AD_android.shiPin();break;case "touTiao":AD_TouTiao.shiPin();break;case "vivo":AD_vivo.shiPin();break;case "oppo":AD_oppo.shiPin();break;case "huaWei":AD_HuaWei.shiPin();break;case "QQ":AD_QQ.shiPin();break;case "uc":AD_UC.shiPin();break;case "WX":AD_WX.shiPin();break;case "4399":AD_4399.shiPin();break;case "4399Box":AD_4399Box.shiPin();break;case "BD":AD_BD.shiPin()}},chaPing:function(){switch(this.chanelName){case "android":AD_android.chaPing();break;case "touTiao":AD_TouTiao.chaPing();break;case "vivo":AD_vivo.chaPingBoo?AD_vivo.chaPing():(arguments.length<=0?void 0:arguments[0])&&AD_vivo.chaPing();break;case "huaWei":AD_HuaWei.chaPing();break;case "QQ":AD_QQ.chaPing();break;case "uc":AD_UC.chaPing();break;case "WX":AD_WX.chaPing()}},showBanner:function(){switch(this.chanelName){case "android":AD_android.showBanner();break;case "touTiao":AD_TouTiao.showBanner();break;case "vivo":AD_vivo.showBanner();break;case "huaWei":AD_HuaWei.chaPing();break;case "QQ":AD_QQ.showBanner();break;case "uc":AD_UC.showBanner();break;case "WX":AD_WX.showBanner();break;case "4399Box":AD_4399Box.showBanner()}},hideBanner:function(){switch(this.chanelName){case "android":AD_android.hideBanner();break;case "touTiao":AD_TouTiao.hideBanner();break;case "vivo":AD_vivo.hideBanner();break;case "huaWei":AD_HuaWei.hideBanner();break;case "QQ":AD_QQ.hideBanner();break;case "uc":AD_UC.hideBanner();break;case "WX":AD_WX.hideBanner();break;case "4399Box":AD_4399Box.hideBanner()}},moreGame:function(){switch(this.chanelName){case "android":AD_android.moreGame();break;case "WX":AD_WX.shareAndCallback("");break;case "WX":AD_4399.moreGame4399()}},gameOver:function(){switch(this.gameOverTimes++,this.chanelName){case "android":AD_android.chaPingVideo();break;case "touTiao":AD_TouTiao.luPingOver();break;case "vivo":this.gameOverTimes%2==0&&AD_vivo.addDesktop();break;case "oppo":this.gameOverTimes%2==0&&AD_oppo.addDesktop();break;case "huaWei":this.gameOverTimes%2==0&&AD_HuaWei.addDesktop();break;case "QQ":AD.wuDianRate>0&&this.gameOverTimes%2==0&&this.showAD(null,null),this.gameOverTimes%3==0&&AD_QQ.saveToDesktopQQ();break;case "4399Box":this.gameOverTimes%2==0&&AD_4399Box.chaPing()}},couldZDJ:function(){return Tools.random(1,100)<this.wuDianRate},isBigScreen:function(){return console.log("是长屏吗  "+cc.winSize.width/cc.winSize.height),cc.winSize.width/cc.winSize.height>1.8},switchZDJ:function(){AD.delayTime=1}},cc._RF.pop()},{}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"588694JdU9MJo8IicnTPYjN","Tools"),window.Tools={random:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},angleToRadian:function(e){return e*Math.PI/180},radianToAngle:function(e){return 180*e/Math.PI},getDistance:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},getAngle:function(e,t){var n=e.x,i=e.y,o=t.x,a=t.y,c=Math.abs(n-o),s=Math.abs(i-a),r=s/Math.sqrt(Math.pow(c,2)+Math.pow(s,2)),l=Math.acos(r),h=Math.floor(180/(Math.PI/l));return o>n&&a>i&&(h=180-h),o==n&&a>i&&(h=180),o>n&&a==i&&(h=90),o<n&&a>i&&(h=180+h),o<n&&a==i&&(h=270),o<n&&a<i&&(h=360-h),h},getRadian:function(e,t){var n=e.x,i=e.y,o=t.x,a=t.y,c=Math.abs(n-o),s=Math.abs(i-a),r=s/Math.sqrt(Math.pow(c,2)+Math.pow(s,2)),l=Math.acos(r),h=Math.floor(180/(Math.PI/l));return o>n&&a>i&&(h=180-h),o==n&&a>i&&(h=180),o>n&&a==i&&(h=90),o<n&&a>i&&(h=180+h),o<n&&a==i&&(h=270),o<n&&a<i&&(h=360-h),this.angleToRadian(h)},getDate:function(e){var t=new Date;return "year"==e?t.getYear():"year2"==e?t.getFullYear():"month"==e?t.getMonth():"day"==e?t.getDate():"week"==e?t.getDay():"millisecond"==e?t.getTime():"hour"==e?t.getHours():"minute"==e?t.getMinutes():"second"==e?t.getSeconds():void 0},getMonthNumber:function(e,t){var n=e.substr(0,4),i=t.substr(0,4),o=e.substr(4,2);return 12*(i-n)+(t.substr(4,2)-o)},getDayNumber:function(e,t){var n=e.substr(0,4),i=t.substr(0,4),o=e.substr(4,2),a=t.substr(4,2),c=e.substr(6,2),s=i+"/"+a+"/"+t.substr(6,2),r=new Date(n+"/"+o+"/"+c),l=new Date(s).getTime()-r.getTime();return Math.floor(l/864e5)},getDateDayString:function(){if(arguments.length<=0?void 0:arguments[0]){var e=new Date;e.setTime(e.getTime()+24*(arguments.length<=0?void 0:arguments[0])*60*60*1e3);var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();(arguments.length<=0?void 0:arguments[0])>0?"当前日期+"+(arguments.length<=0?void 0:arguments[0]):"当前日期"+(arguments.length<=0?void 0:arguments[0])}else{t=Tools.getDate("year2"),n=Tools.getDate("month")+1,i=Tools.getDate("day");"今天日期是"}
return n<10&&(n="0"+n),i<10&&(i="0"+i),""+t+n+i},uniqueArr:function(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t},jiangXuArr:function(e){return e.sort(function(e,t){return-(e-t)})},shengXuArr:function(e){return e.sort(function(e,t){return e-t})},getIndexInArray:function(e,t){for(var n=0;n<e.length;n++)
if(JSON.stringify(e[n])===JSON.stringify(t))return n;return-1},removeElementFromArr:function(e,t){var n=Tools.getIndexInArray(e,t);return n>-1&&e.splice(n,1),e},getIndexInArray2:function(e,t){for(var n=0;n<e.length;n++)
if(e[n]==t)return n;return-1},removeElementFromArr2:function(e,t){var n=Tools.getIndexInArray2(e,t);return n>-1&&e.splice(n,1),e},strToArr:function(e,t){return e.split(""+t)},getShowStr:function(e){var t=null,n=null;return(e=parseInt(e))>=1e21?(t=parseFloat(parseFloat(e)/parseFloat(1e21)).toFixed(2),n="cc"):e>=1e18?(t=parseFloat(parseFloat(e)/parseFloat(1e18)).toFixed(2),n="bb"):e>=1e15?(t=parseFloat(parseFloat(e)/parseFloat(1e15)).toFixed(2),n="aa"):e>=1e12?(t=parseFloat(parseFloat(e)/parseFloat(1e12)).toFixed(2),n="T"):e>=1e9?(t=parseFloat(parseFloat(e)/parseFloat(1e9)).toFixed(2),n="B"):e>=1e6?(t=parseFloat(parseFloat(e)/parseFloat(1e6)).toFixed(2),n="M"):e>=1e3?(t=parseFloat(parseFloat(e)/parseFloat(1e3)).toFixed(2),n="K"):(t=e,n=""),""+t+n},fixValue:function(e,t){var n=(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString();n.indexOf(".")<0&&(n+=".");for(var i=n.length-n.indexOf(".");i<=t;i++)n+="0";return n},getNewArr:function(e,t){var n=new Array;for(var i in e)n.push(e[i]);var o=new Array;for(i=0;i<t&&n.length>0;i++){var a=Math.floor(Math.random()*n.length);o[i]=n[a],n.splice(a,1)}
return o},swapArray:function(e,t,n){return e[t]=e.splice(n,1,e[t])[0],e},getWindowSize:function(){return cc.winSize},setNodeColor:function(e,t,n,i){var o=new cc.color(t,n,i,255);if(e.color=o,e.children.length>0)for(var a=0;a<e.children.length;a++)
if(e.children[a].color=o,e.children[a].children.length>0)for(var c=0;c<e.children[a].children.length;c++)e.children[a].children[c].color=o},resetDialog:function(e,t){var n=e.getChildByName("zheZhao"),i=e.getChildByName("bg");t?(e.active=!0,n.opacity=0,i.scale=0,cc.tween(n).to(.2,{opacity:180}).start(),cc.tween(i).to(.2,{scale:1}).start()):(cc.tween(n).to(.2,{opacity:0}).start(),cc.tween(i).to(.2,{scale:0}).call(function(){e.active=!1}).start())},resetDialog2:function(e,t){var n=e.getChildByName("zheZhao"),i=e.getChildByName("bg");t?(e.active=!0,n.opacity=0,i.scale=0,cc.tween(n).to(.2,{opacity:180}).start(),cc.tween(i).to(.2,{scale:1}).start()):(cc.tween(n).to(.2,{opacity:0}).start(),cc.tween(i).to(.2,{scale:0}).call(function(){e.destroy()}).start())},log:function(){},create:function(e,t,n,i,o){var a=3.14159*o/180,c=t.x+(n.x-t.x)/4,s=cc.v2(c,i+t.y+Math.cos(a)*c),r=t.x+(n.x-t.x)/2,l=cc.v2(r,i+t.y+Math.cos(a)*r);return cc.bezierTo(e,[s,l,n]).repeat(1)},couldShake:!0,shakeScreen:function(){var e=this;if(AD.couldShake&&this.couldShake){this.couldShake=!1;var t=1;(arguments.length<=0?void 0:arguments[0])&&(t=arguments.length<=0?void 0:arguments[0]);var n=.03*t,i=5*t,o=(cc.find("Canvas/Main Camera").getComponent(cc.Camera),cc.find("Canvas/Main Camera"));cc.tween(o).by(n,{position:cc.v2(-i,i)}).by(n,{position:cc.v2(i,-i)}).by(n,{position:cc.v2(i,i)}).by(n,{position:cc.v2(-i,-i)}).call(function(){e.couldShake=!0}).start()}},getSecond:function(e){var t=parseInt(e/3600),n=null;n=t>=10?t:"0"+t;var i=parseInt((e-3600*t)/60),o=null;o=i>=10?i:"0"+i;var a=parseInt(e-3600*t-60*i),c=null,s=c=a>=10?a:"0"+a;return(arguments.length<=1?void 0:arguments[1])&&(s=n+":"+o+":"+c),s},getSecond2:function(e){var t=parseInt(e/3600);var n=parseInt((e-3600*t)/60),i=null;i=n>=10?n:"0"+n;var o=parseInt(e-3600*t-60*n);return i+":"+(o>=10?o:"0"+o)},changeSlotTexture:function(e,t,n){e.getComponent(dragonBones.ArmatureDisplay).armature().getSlot(t).displayIndex=n},copyToClipBoard:function(e){if(cc.sys.isNative)qx.copyToClipBoard(e);else if(cc.sys.isBrowser){var t=null;null===(t=document.getElementById("clipBoard"))&&((t=document.createElement("textarea")).id="clipBoard",t.textContent=e,document.body.appendChild(t)),t.select();try{document.execCommand("copy");cc.log("已经复制到剪贴板"),document.body.removeChild(t)}catch(e){cc.log("复制到剪贴板失败")}}},colorOfString:function(e){if(null==e||7!=e.length)return null;var t=e.toLowerCase();if("#"==t.charAt(0)){t=t.slice(1);var n=parseInt(t[0]+t[1],16),i=parseInt(t[2]+t[3],16),o=parseInt(t[4]+t[5],16);return new cc.Color(n,i,o,255)}},shanBai:function(e){e.dstBlendFactor=cc.macro.BlendFactor.ONE}},cc._RF.pop()},{}],actFide:[function(e,t,n){"use strict";cc._RF.push(t,"dc417aCof1ET6tIp5eOQyZM","actFide"),cc.Class({extends:cc.Component,properties:{time:.5,big:1.1,small:1},start:function(){cc.tween(this.node).repeatForever(cc.tween().to(this.time,{opacity:this.big}).to(this.time,{opacity:this.small})).start()}}),cc._RF.pop()},{}],actScale_ball:[function(e,t,n){"use strict";cc._RF.push(t,"4dcd2u+I59Hf6ibog8esPbL","actScale_ball"),cc.Class({extends:cc.Component,properties:{type:"大小",time:.5,delayDuration:.3,delayDurationBig:0,repeatTimes:{default:2,visible:function(){return this.delayDurationBig>0}},targetPos:{default:cc.v2(0,0),visible:function(){return "坐标"==this.type}},big:{default:1.1,visible:function(){return "大小"==this.type}},small:{default:1,visible:function(){return "大小"==this.type}}},start:function(){"大小"==this.type?cc.tween(this.node).repeatForever(cc.tween().delay(this.delayDuration).to(this.time,{scale:this.big}).to(this.time,{scale:this.small})).start():"坐标"==this.type&&(this.yuanPos=this.node.position,this.delayDurationBig>0?this.schedule(function(){cc.tween(this.node).repeat(this.repeatTimes,cc.tween().delay(this.delayDuration).to(this.time,{position:this.targetPos}).to(this.time,{position:this.yuanPos})).start()},this.delayDurationBig+2*this.time):cc.tween(this.node).repeatForever(cc.tween().delay(this.delayDuration).to(this.time,{position:this.targetPos}).to(this.time,{position:this.yuanPos})).start())}}),cc._RF.pop()},{}],adIconControl:[function(e,t,n){"use strict";cc._RF.push(t,"4c980Z4MYtHT4vFhs27hBOe","adIconControl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onEnable:function(){"touTiao"==AD.chanelName1?this.adIconIndex=1:this.adIconIndex=0;for(var e=0;e<this.node.childrenCount;e++)0==this.adIconIndex?"icon_shiPin_2"==this.node.children[e].getComponent(cc.Sprite).spriteFrame.name?this.node.children[e].active=!0:"icon_shiPin_1"==this.node.children[e].getComponent(cc.Sprite).spriteFrame.name&&(this.node.children[e].active=!1):1==this.adIconIndex&&("icon_shiPin_1"==this.node.children[e].getComponent(cc.Sprite).spriteFrame.name?this.node.children[e].active=!0:"icon_shiPin_2"==this.node.children[e].getComponent(cc.Sprite).spriteFrame.name&&(this.node.children[e].active=!1))}}),cc._RF.pop()},{}],audioMng:[function(e,t,n){"use strict";cc._RF.push(t,"7affexvCVROHqYBbBfuFJyX","audioMng"),cc.Class({extends:cc.Component,properties:{bgmGame:cc.AudioClip,bgmMenu:cc.AudioClip,bgmGame_shengHua:cc.AudioClip,sfxArr:{default:[],type:[cc.AudioClip]}},onLoad:function(){cc.game.addPersistRootNode(this.node),AD.audioMng=this,this.sfxId=-1},start:function(){this.couldPlaySfx=!0,this.durationPlay=[0,0,0,0,0,0,0],this.durationCoin=0,this.valume=0,this.audioIndex=-1,this.playBGM=!1,this.bgmType=null},playSfx:function(e){var t=this,n=-1;switch(e){case "按钮":n=0;break;case "飞币":this.durationCoin<=0&&(this.durationCoin=1,this.scheduleOnce(function(){t.durationCoin=0},.1),n=1);break;case "胜利":n=2;break;case "失败":n=3;break;case "跳跃":n=4;break;case "火箭筒":n=5;break;case "枪声":n=6+(arguments.length<=1?void 0:arguments[1]);break;case "换弹":n=22;break;case "吃道具":n=23;break;case "手雷爆炸":n=24;break;case "扔手雷":n=25;break;case "死亡":n=26+Tools.random(0,1);break;case "箱子破碎":n=28;break;case "获得奖励":n=29;break;case "购买成功":n=30;break;case "无线电":n=31+Tools.random(0,12);break;case "抽奖":n=44;break;case "连杀":n=45+(arguments.length<=1?void 0:arguments[1]);break;case "复仇":n=50;break;case "倒计时":n=51,this.sfxHuoCheIndex=-1;break;case "倒计时开始":n=52;break;case "c4已安放":n=53;break;case "电击":n=54;break;case "汽笛":n=55;break;case "火车":n=56;break;case "僵尸":n=Tools.random(57,59);break;case "警告":n=60}
if(-1!=n)if(56==n){this.sfxHuoCheIndex=cc.audioEngine.play(this.sfxArr[n],!1,3),cc.director.on("显示结算弹窗",function(){cc.audioEngine.setVolume(t.sfxHuoCheIndex,0)},this);var i=this;cc.audioEngine.setFinishCallback(this.sfxHuoCheIndex,function(){"gameScene"==cc.director.getScene().name&&0==AD.gameOver&&(cc.director.off("显示结算弹窗",function(){cc.audioEngine.setVolume(i.sfxHuoCheIndex,0)},this),i.playSfx("火车"))})}else if(arguments.length<=2?void 0:arguments[2])cc.audioEngine.play(this.sfxArr[n],!1,.4);else cc.audioEngine.play(this.sfxArr[n],!1,1)},playMusic:function(){if(this.couldPlaySfx=!0,!(AD.wuDianRate<=0&&"vivo"==AD.chanelName1)){if("gameScene"==cc.director.getScene().name)this.bgmType="game","生化模式"==globalData.modeType?this.audioIndex=cc.audioEngine.playMusic(this.bgmGame_shengHua,!0):this.audioIndex=cc.audioEngine.playMusic(this.bgmGame,!0);else{if("menu"==this.bgmType)return;this.bgmType="menu",this.audioIndex=cc.audioEngine.playMusic(this.bgmMenu,!0)}
console.log("播放背景音乐"),this.valume=0,this.playBGM=!0,cc.audioEngine.setVolume(this.audioIndex,this.valume)}},stopMusic:function(){this.bgmType=null,this.playBGM=!1,console.log("停止背景音乐"),this.couldPlaySfx=!1},update:function(e){this.playBGM?this.valume<.7&&(this.valume+=.3*e,this.valume>=.7&&(this.valume=.7),cc.audioEngine.setVolume(this.audioIndex,this.valume)):this.valume>0&&(this.valume-=.5*e,this.valume<=0&&(this.valume=0),cc.audioEngine.setVolume(this.audioIndex,this.valume))}}),cc._RF.pop()},{}],bombPlayerToMid:[function(e,t,n){"use strict";cc._RF.push(t,"ef7e4eyCVxGdYJ0BnPNsiQA","bombPlayerToMid"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.huang=this.node.children[0]},start:function(){},onCollisionEnter:function(e,t){66==e.tag&&(e.node.getComponent(cc.RigidBody).fixedRotation=!1,e.node.getComponent("player").couldMoveSum=!1,e.node.getComponent(cc.RigidBody).linearVelocity.x=e.node.getComponent(cc.RigidBody).linearVelocity.y=0,e.node.x<0?(e.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(8500,9e3),e.node.getComponent(cc.RigidBody).getWorldCenter(),!0),e.node.getComponent(cc.RigidBody).angularVelocity=500,e.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(5e3,0),e.node.getComponent(cc.RigidBody).getWorldCenter(),!0)):(e.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(-8500,9e3),e.node.getComponent(cc.RigidBody).getWorldCenter(),!0),e.node.getComponent(cc.RigidBody).angularVelocity=-500,e.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(-5e3,0),e.node.getComponent(cc.RigidBody).getWorldCenter(),!0)),cc.tween(this.huang).to(.1,{x:17}).to(.1,{x:51}).start())}}),cc._RF.pop()},{}],btNumListener:[function(e,t,n){"use strict";cc._RF.push(t,"1aa82UfhrdFao5M2PdLF9LG","btNumListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.opacity=0,cc.director.on("子弹数量变化",function(t){e.node.getComponent(cc.Label).string=t,0==e.node.opacity&&(e.node.opacity=255)},this),cc.director.on("隐藏子弹label",function(t){e.node.opacity=t?0:255},this)},start:function(){}}),cc._RF.pop()},{}],btnBackListener:[function(e,t,n){"use strict";cc._RF.push(t,"8a716zeCltEma3DvAZ8EMTv","btnBackListener"),cc.Class({extends:cc.Component,properties:{targetScene:"menuScene"},start:function(){},btnCallBack:function(e,t){AD.audioMng.playSfx("按钮"),cc.director.loadScene(this.targetScene)}}),cc._RF.pop()},{}],btnCallBackSome:[function(e,t,n){"use strict";cc._RF.push(t,"fe79cHTvDFGr4hyKjtzyRrn","btnCallBackSome"),cc.Class({extends:cc.Component,properties:{infoContent:"显示金币弹窗"},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit(e.infoContent),"显示金币弹窗"==e.infoContent?cc.director.emit("显示货币弹窗",!0):"显示钻石弹窗"==e.infoContent&&cc.director.emit("显示货币弹窗",!1),AD.audioMng.playSfx("按钮")},this)},start:function(){},btnCallBack:function(e,t){}}),cc._RF.pop()},{}],btnCloseDelay:[function(e,t,n){"use strict";cc._RF.push(t,"cebf7djpftLH47d3JxWeUrQ","btnCloseDelay"),cc.Class({extends:cc.Component,properties:{},start:function(){},onEnable:function(){this.node.scale=0;var e=1;AD.btnCloseIsBig&&(e=1.5),cc.tween(this.node).delay(AD.delayTime).to(.2,{scale:e}).start()}}),cc._RF.pop()},{}],btnCloseTTControl:[function(e,t,n){"use strict";cc._RF.push(t,"2c9b4OUakxIL4tf9P223sJQ","btnCloseTTControl"),cc.Class({extends:cc.Component,properties:{isTT:!0},start:function(){this.isTT?this.node.active="touTiao"==AD.chanelName:this.node.active="touTiao"!=AD.chanelName}}),cc._RF.pop()},{}],btnScaleBy4399PC:[function(e,t,n){"use strict";cc._RF.push(t,"826d1ggABJCc7yvv1jpNVi4","btnScaleBy4399PC"),cc.Class({extends:cc.Component,properties:{needRestPos:!1,targetPos:{default:cc.v2(0,0),visible:function(){return this.needRestPos}}},start:function(){AD.mouseClick&&(this.node.active=!1)}}),cc._RF.pop()},{}],btnsPanel:[function(e,t,n){"use strict";cc._RF.push(t,"538ffsxwGJDPZZoKFlSHvK9","btnsPanel"),cc.Class({extends:cc.Component,properties:{btnAnBao:cc.Node,btnAnBaoSprArr:[cc.SpriteFrame],btnLeft:cc.Node,btnRight:cc.Node,btnFire:cc.Node,btnJump:cc.Node,shouLeiCD:cc.Node,shouLeiNumLabel:cc.Node,numKill:cc.Label,numDie:cc.Label},onLoad:function(){var e=this;AD.btnsPanel=this,this.initBtnTouch(),"手雷模式"==globalData.modeType?(this.shouLeiBar=cc.find("shouLeiCDBar",this.shouLeiCD).getComponent(cc.Sprite),this.shouLeiBar.fillRange=1,this.shouLeiCD.active=!0,this.shouLeiNumLabel.active=!1):(this.shouLeiCD.active=!1,this.shouLeiNumLabel.active=!0,cc.director.on("手雷数量变化",function(t){e.shouLeiNumLabel.getComponent(cc.Label).string=t},this)),cc.director.on("杀人数变化",function(t){e.numKill.getComponent(cc.Label).string=t},this),cc.director.on("死亡数变化",function(t){e.numDie.getComponent(cc.Label).string=t},this)},start:function(){},updateShouLeiCD:function(e){this.shouLeiBar.fillRange=e,this.shouLeiCD.active=e>0},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "换弹":cc.director.emit("换弹");break;case "手雷":cc.director.emit("手雷");break;case "返回":0==AD.showPauseNow&&cc.director.emit("显示暂停弹窗");break;case "跳跃":cc.director.emit("玩家跳");break;case "查看战绩":cc.director.emit("展示战绩弹窗")}},initBtnTouch:function(){var e=this;this.btnFire.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit("开始射击")},this),this.btnFire.on(cc.Node.EventType.TOUCH_END,function(){cc.director.emit("停止射击")},this),this.btnFire.on(cc.Node.EventType.TOUCH_CANCEL,function(){cc.director.emit("停止射击")},this),this.btnJump.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit("玩家跳")},this),this.btnAnBao.active=!1,"爆破模式"==globalData.modeType&&(cc.director.on("显示安包按钮",function(t,n){e.btnAnBao.active=t,e.btnAnBao.getComponent(cc.Sprite).spriteFrame=n&&t?e.btnAnBaoSprArr[0]:e.btnAnBaoSprArr[1]},this),this.btnAnBao.on(cc.Node.EventType.TOUCH_START,function(){AD.playerNow.getComponent("player").btnAnBaoCallBack(!0)},this),this.btnAnBao.on(cc.Node.EventType.TOUCH_END,function(){AD.playerNow.getComponent("player").btnAnBaoCallBack(!1)},this),this.btnAnBao.on(cc.Node.EventType.TOUCH_CANCEL,function(){AD.playerNow.getComponent("player").btnAnBaoCallBack(!1)},this))}}),cc._RF.pop()},{}],bulletShell:[function(e,t,n){"use strict";cc._RF.push(t,"9a4e4rBEclA8oXSlAOH6cm8","bulletShell"),cc.Class({extends:cc.Component,properties:{},start:function(){},reset:function(){var e=this;this.node.opacity=255,this.node.getComponent(cc.RigidBody).angularVelocity=Tools.random(-500,500),this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(.3*Tools.random(-70,70),.3*Tools.random(100,120)),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){AD.playerMng.bulletShellPool.put(e.node)},2)},update:function(e){}}),cc._RF.pop()},{}],c4Bomb:[function(e,t,n){"use strict";cc._RF.push(t,"f9b07L5kzFNSoH8sVVtb09i","c4Bomb"),cc.Class({extends:cc.Component,properties:{bar:cc.Sprite,effect:cc.Node},start:function(){var e=this;this.effect.active=!1,this.bar.fillRange=0,cc.tween(this.bar).to(AD.gameScene.anBaoTimerMax,{fillRange:1}).call(function(){e.effect.active=!0}).start(),this.chaiBaoAct=cc.tween(this.bar).to(AD.gameScene.chaiBaoTimerMax,{fillRange:0}).call(function(){e.node.destroy()}),cc.director.on("安包中断",function(){e.node.destroy()},this),cc.director.on("拆包中断",function(){e.bar.fillRange=1,e.chaiBaoAct.stop()},this),cc.director.on("拆包开始",function(){e.chaiBaoAct.start()},this)},onDisable:function(){AD.playerMng.c4Bomb=null}}),cc._RF.pop()},{}],c4OnRole:[function(e,t,n){"use strict";cc._RF.push(t,"d4a2at51CdGUYIacNyJDN0S","c4OnRole"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},reset:function(e){this._isEnemy=e},onEnable:function(){AD.playerMng.targetC4Bomb=this.node},onDisable:function(){AD.playerMng.targetC4Bomb=null},onCollisionEnter:function(e,t){switch(e.tag){case 66:this.checkOwner(e.node)}},checkOwner:function(e){var t=e.getComponent("player");t.hp>0&&this._isEnemy==t.isEnemy&&(this.node.destroy(),t.c4Node.active=!0,t.isAnBaoRole=!0)}}),cc._RF.pop()},{}],coinFly:[function(e,t,n){"use strict";cc._RF.push(t,"b760fe8nVNLVbufEzg0sNb/","coinFly"),cc.Class({extends:cc.Component,properties:{coin:cc.Node,diamond:cc.Node},start:function(){},reset:function(e,t,n){var i=this;this.coin.active=n,this.diamond.active=!n,this.node.angle=Tools.random(0,360),this.node.position=e;var o=e.x+Tools.random(-100,100),a=e.y+Tools.random(-100,100),c=.01*Tools.random(-20,20),s=.01*Tools.random(-20,20);cc.tween(this.node).to(.5+c,{position:cc.v2(o,a),angle:this.node.angle+360},{easing:"sineOut"}).to(.8+s,{position:t,opacity:100,scale:.5,angle:this.node.angle+720},{easing:"sineInOut"}).call(function(){i.node.destroy(),AD.audioMng.playSfx("飞币")}).start()}}),cc._RF.pop()},{}],coinNumListener:[function(e,t,n){"use strict";cc._RF.push(t,"2a0421LFJ1NfaBeVJx74tkQ","coinNumListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.getComponent(cc.Label).string=globalData.getCoinNum(),cc.director.on("金币数量变化",function(){e.node.getComponent(cc.Label).string=globalData.getCoinNum()},this)},start:function(){}}),cc._RF.pop()},{}],coinNumLitenter:[function(e,t,n){"use strict";cc._RF.push(t,"08ff2gXwWdAL5M4uvkNOCyo","coinNumLitenter"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.getComponent(cc.Label).string=globalData.getCoin(),cc.director.on("钱变了",function(){e.node.getComponent(cc.Label).string=globalData.getCoin()},this)},start:function(){}}),cc._RF.pop()},{}],coudBeDestroy:[function(e,t,n){"use strict";cc._RF.push(t,"1098euhyo1FM4+eioMnRUZE","coudBeDestroy"),cc.Class({extends:cc.Component,properties:{hp:100,couldShootMove:!0},start:function(){this.isDie=!1,this.spr=this.node.getComponent(cc.Sprite)},onBeginContact:function(e,t,n){var i=n.node.getComponent("playerBt");i&&(this.beHit(i.hurt),this.couldShootMove&&(i.playerNode.x>this.node.x?cc.tween(this.node).by(.2,{x:-20},{easing:"sineOut"}).start():cc.tween(this.node).by(.2,{x:20},{easing:"sineOut"}).start()))},beHit:function(e){var t=this;if(this.hp-=e,this.hp<=0&&!this.isDie)switch(this.isDie=!0,this.node.destroy(),this.node.getComponent(cc.Sprite).spriteFrame.name){case "bj_1_daoJu_1":AD.effectMng.createEffect("箱子",this.node.position,"木箱");break;case "bj_2_xz_2":AD.effectMng.createEffect("箱子",this.node.position,"木箱2");break;case "bj_3_dj_2":AD.effectMng.createEffect("箱子",this.node.position,"砖块");break;case "DJ_ZhangAi":AD.effectMng.createEffect("箱子",this.node.position,"路障");break;case "bj_4_xz_1_":AD.effectMng.createEffect("箱子",this.node.position,"石灰");break;case "bj_4_dj_1":AD.effectMng.createEffect("箱子",this.node.position,"垃圾桶")}
this.spr.dstBlendFactor=cc.macro.BlendFactor.ONE,this.scheduleOnce(function(){t.spr.dstBlendFactor=cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA},.05)}}),cc._RF.pop()},{}],dialogChouJiang:[function(e,t,n){"use strict";cc._RF.push(t,"0c56ek+0ftFi6bPd9JFiFGq","dialogChouJiang"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,btnClose:cc.Node,btnClose2:cc.Node,ADNode:cc.Node,effectNode:cc.Node,caiDan_role12:cc.Node,particlePrefab:cc.Prefab},onLoad:function(){var e=this;this.angleArr=new Array;for(var t=0;t<8;t++)this.angleArr.push(45*-t+22.5);this.bg.angle=0,this.intervalTime=.2,this.intervalTimeSum=0,this.rotateRate=1,this.lastIndex=-1,this.rateArr=[30,20,20,2,10,10,5,3],this.isChouJianging=!1,this.btnClose.scale=1,this.btnClose2.scale=1,this.ADNode.active=globalData.data.chouJiangDate==Tools.getDateDayString(),this.effectNode.active=!1,this.caiDan_role12.active=0==globalData.getRoleUnlockState(12),cc.director.on("解锁彩蛋角色",function(t){12==t&&(e.caiDan_role12.active=!1)},this),this.caiDan_role12.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit("彩蛋角色",12)},this)},onDisable:function(){cc.director.getScene().name,AD.hideBanner()},start:function(){Tools.resetDialog2(this.node,!0)},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "抽奖":if(this.isChouJianging)return;globalData.data.chouJiangDate!=Tools.getDateDayString()?(globalData.data.chouJiangDate=Tools.getDateDayString(),globalData.saveData(),this.chouJiang()):AD.showAD(this.chouJiang,this);break;case "关闭":Tools.resetDialog2(this.node,!1)}},chouJiang:function(){var e=this;AD.audioMng.playSfx("抽奖"),this.isChouJianging=!0,this.btnClose.scale=0,this.btnClose2.scale=0,this.effectNode.active=!0,this.effectNode.opacity=0;var t=cc.instantiate(this.particlePrefab);t.parent=this.effectNode,cc.tween(this.effectNode).to(.5,{opacity:255}).delay(3).to(.5,{opacity:0}).call(function(){t.destroy()}).start(),this.getTaregetIndex();var n=-this.angleArr[this.targetIndex]-1080+Tools.random(-10,10),i=this;cc.tween(this.bg).to(4,{angle:n},{easing:"sineInOut"}).call(function(){i.reward(),e.effectNode.active=!1}).start()},getTaregetIndex:function(){for(var e=0,t=0;t<this.rateArr.length;t++)e+=this.rateArr[t];var n=Tools.random(1,e),i=0;for(t=0;t<this.rateArr.length;t++)
if(n<(i+=this.rateArr[t])){this.targetIndex=t;break}},update:function(e){this.bg.angle<=-360&&(this.bg.angle=this.bg.angle+360)},reward:function(){AD.audioMng.playSfx("获得奖励"),this.ADNode.active=globalData.data.chouJiangDate==Tools.getDateDayString(),console.log("this.targetIndex "+this.targetIndex);var e=0,t=0;switch(this.targetIndex){case 0:e=500;break;case 1:t=50;break;case 2:e=1e3;break;case 3:globalData.setRoleUnlockState(9),cc.director.emit("系统提示","Hero Unlocked.");break;case 4:e=2e3;break;case 5:t=100;break;case 6:e=3e3;break;case 7:globalData.setRoleUnlockState(10),cc.director.emit("系统提示","Hero Unlocked.")}
e>0&&(globalData.setCoinNum(e),cc.director.emit("飞币",15,this.bg,cc.find("Canvas/coinPanel"),!0),cc.director.emit("系统提示","Coins+"+e)),t>0&&(cc.director.emit("系统提示","Gems+"+t),globalData.setDiamondNum(t),cc.director.emit("飞币",10,this.bg,cc.find("Canvas/diamondPanel"),!1)),this.btnClose.scale=1,this.btnClose2.scale=1,this.isChouJianging=!1}}),cc._RF.pop()},{}],dialogCoinAndDiamond:[function(e,t,n){"use strict";cc._RF.push(t,"60b0eeHjwtC8Yp2UNtJ63nu","dialogCoinAndDiamond"),cc.Class({extends:cc.Component,properties:{bgSprNode:cc.Sprite,sprCoin:cc.SpriteFrame,sprDiamond:cc.SpriteFrame,numLabel:cc.Label},start:function(){},reset:function(e){this.isCoin=e,this.isCoin?(this.bgSprNode.spriteFrame=this.sprCoin,this.rewardNum=3e3):(this.bgSprNode.spriteFrame=this.sprDiamond,this.rewardNum=200),this.numLabel.string="x"+this.rewardNum},onEnable:function(){Tools.resetDialog2(this.node,!0)},onDisable:function(){cc.director.getScene().name,AD.hideBanner()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "关闭":Tools.resetDialog2(this.node,!1);break;case "领取":AD.showAD(this.getSucess,this)}},getSucess:function(){var e;(AD.audioMng.playSfx("获得奖励"),this.isCoin)?(globalData.setCoinNum(this.rewardNum),(e=cc.find("Canvas/coinPanel"))&&cc.director.emit("飞币",20,cc.find("bg",this.node),e,!0),cc.director.emit("系统提示","Coins+"+this.rewardNum)):(globalData.setDiamondNum(this.rewardNum),(e=cc.find("Canvas/diamondPanel"))&&cc.director.emit("飞币",10,cc.find("bg",this.node),e,!1),cc.director.emit("系统提示","Gems+"+this.rewardNum))}}),cc._RF.pop()},{}],dialogGetReward:[function(e,t,n){"use strict";cc._RF.push(t,"18a56gzrbtBl4EFY/nUkBNV","dialogGetReward"),cc.Class({extends:cc.Component,properties:{numCoinLabel:cc.Label,numDiamondLabel:cc.Label,numChengHaoLabel:cc.Label,chengHaoName1:cc.Label,chengHaoName2:cc.Label,iconChengHao1:cc.Sprite,iconChengHao2:cc.Sprite,chengHaoBar:cc.Sprite,upgradeEffect:cc.Node,mvpEffect:cc.Node,btnsArr:[cc.Node],btnsOppo:cc.Node,btnsNormal:cc.Node,bgLose:cc.Node},onLoad:function(){},reset:function(e){var t=this;this.btnsNormal.active="oppo"!=AD.chanelName,this.btnsOppo.active="oppo"==AD.chanelName,this.mvpEffect.scale=0,this.hadGetReward=!1,e?(this.EPNum=15,this.coinNum=200,this.diamondNum=10,this.isMVP()&&(this.coinNumAdd=100,this.diamondNumAdd=5,this.btnsArr[0].active=this.btnsArr[1].active=this.btnsArr[2].active=!1,this.scheduleOnce(function(){t.mvpEffect.scale=3,cc.tween(t.mvpEffect).to(.2,{scale:1},{easing:"sineIn"}).start(),t.schedule(function(){t.coinNumAdd>0&&(t.coinNumAdd-=1,0==t.coinNumAdd&&(t.btnsArr[0].active=t.btnsArr[1].active=t.btnsArr[2].active=!0),t.coinNum+=1,t.numCoinLabel.string="x"+t.coinNum)},.01,100,.3),t.schedule(function(){t.diamondNumAdd>0&&(t.diamondNumAdd-=1,t.diamondNum+=1,t.numDiamondLabel.string="x"+t.diamondNum)},.2,5,.3)},1.5))):("生化模式"==globalData.modeType&&(this.bgLose.active=!0),this.EPNum=5,this.coinNum=50,this.diamondNum=0,this.isMVP()&&(this.coinNumAdd=100,this.diamondNumAdd=5,this.btnsArr[0].active=this.btnsArr[1].active=this.btnsArr[2].active=!1,this.scheduleOnce(function(){t.mvpEffect.scale=3,cc.tween(t.mvpEffect).to(.2,{scale:1},{easing:"sineIn"}).start(),t.schedule(function(){t.coinNumAdd>0&&(t.coinNumAdd-=1,0==t.coinNumAdd&&(t.btnsArr[0].active=t.btnsArr[1].active=t.btnsArr[2].active=!0),t.coinNum+=1,t.numCoinLabel.string="x"+t.coinNum)},.01,100,.3),t.schedule(function(){t.diamondNumAdd>0&&(t.diamondNumAdd-=1,t.diamondNum+=1,t.numDiamondLabel.string="x"+t.diamondNum)},.2,5,.3)},1.5))),this.numCoinLabel.string="x"+this.coinNum,this.numDiamondLabel.string="x"+this.diamondNum,this.junXianLevel=globalData.getChengHaoLevel(),this.yuanEP=globalData.getChengHaoEP(),this.EPObj={num:0},this.couldUpdate=!1,cc.tween(this.EPObj).call(function(){t.couldUpdate=!0}).to(.1*this.EPNum,{num:this.EPNum}).delay(.1).call(function(){t.couldUpdate=!1,globalData.saveData()}).start()},updateChengHao:function(){var e=globalData.getChengHaoLevel(),t=e+1;t>14&&(t=14),this.chengHaoName1.string=AD.chengHaoData[e].Rank_Name,this.chengHaoName2.string=AD.chengHaoData[t].Rank_Name,this.iconChengHao1.spriteFrame=AD.chengHaoIconArr[e],this.iconChengHao2.spriteFrame=AD.chengHaoIconArr[t],this.numChengHaoLabel.string=parseInt(globalData.getChengHaoEPLevelNow().EPNow)+"/"+parseInt(globalData.getChengHaoEPLevelNow().EPLevelNow),this.chengHaoBar.fillRange=globalData.getChengHaoEPLevelNow().progress},isMVP:function(){var e=!0,t=AD.playerNow.getComponent("player").killNum,n=AD.playerNow.getComponent("player").dieNum;if("个人竞技"==globalData.modeType){for(var i=0;i<6;i++)
if(AD.playerMng.selfArrForever[i]!=AD.playerNow){var o=AD.playerMng.selfArrForever[i].getComponent("player");if(o.killNum>t){e=!1;break}
if(o.killNum=t){o.dieNum<n&&(e=!1);break}}}else "我"!=AD.mvpName&&(e=!1);return e},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "普通领取":this.targetScene="menuScene",this.getRate=1,this.getSucess();break;case "双倍领取":this.hadGetReward||(this.targetScene="menuScene",this.getRate=2,AD.showAD(this.getSucess,this));break;case "武器":AD.showWeaponFirst=!0,this.targetScene="shopScene",this.getRate=1,this.getSucess()}},getSucess:function(){var e=this;if(!this.hadGetReward){this.hadGetReward=!0;var t=this.coinNum*this.getRate,n=this.diamondNum*this.getRate;globalData.setCoinNum(t),globalData.setDiamondNum(n),cc.director.emit("系统提示","Coins+"+t+"  Gems+"+n),AD.audioMng.playSfx("获得奖励"),cc.director.emit("飞币",15,cc.find("bg/coin",this.node),cc.find("bg/coinPanel",this.node),!0),n>0&&cc.director.emit("飞币",10,cc.find("bg/diamond",this.node),cc.find("bg/diamondPanel",this.node),!1),this.scheduleOnce(function(){cc.director.emit("过场动画",e.targetScene)},2)}},update:function(e){var t=this;this.couldUpdate&&(globalData.data.chengHaoEP=this.yuanEP+this.EPObj.num,globalData.getChengHaoLevel()>this.junXianLevel&&(this.upgradeEffect.active=!0,this.junXianLevel=globalData.getChengHaoLevel(),this.scheduleOnce(function(){t.upgradeEffect.active=!1},1)),this.updateChengHao())}}),cc._RF.pop()},{}],dialogHuoDong:[function(e,t,n){"use strict";cc._RF.push(t,"c19d19eojVBirHNscaHRVN7","dialogHuoDong"),cc.Class({extends:cc.Component,properties:{btnGet:cc.Node,toggleContainer:cc.Node,numLabel:cc.Label,itemArr:[cc.Node]},onLoad:function(){var e=this;this.nameArr=["竞技先锋","拆弹专家","抢旗模式","末日使者","金枪大师"],this.targetNumArr=[50,5,5,300,15],this.rewardNumArr=[2e3,2e3,20,20,500],this.reset(),this.caiDanNumArr="952731",this.numNow="",this.numLabel.string=this.numNow,cc.director.on("输入数字",function(t){e.checkCaiDanRole(t)},this)},checkCaiDanRole:function(e){this.numNow.length==this.caiDanNumArr.length&&(this.numNow="",this.numLabel.string=this.numNow),this.numNow=this.numNow+e,this.numLabel.string=this.numNow,this.numNow.length==this.caiDanNumArr.length&&this.numNow==this.caiDanNumArr&&0==globalData.getRoleUnlockState(14)&&cc.director.emit("彩蛋角色",14)},start:function(){this.check(),Tools.resetDialog2(this.node,!0)},onDisable:function(){cc.director.getScene().name,AD.hideBanner()},btnCallBack:function(e,t){var n=this;switch(AD.audioMng.playSfx("按钮"),t){case "切换":this.scheduleOnce(function(){n.check()},.02);break;case "领取":this.getSucess();break;case "关闭":Tools.resetDialog2(this.node,!1)}},getSucess:function(){AD.audioMng.playSfx("获得奖励");var e,t=this.getItemIndexChooseNow();(globalData.setHuoDongDataHadGet(this.nameArr[t]),t<2)?(globalData.setCoinNum(this.rewardNumArr[t]),(e=cc.find("Canvas/coinPanel"))&&cc.director.emit("飞币",20,this.btnGet,e,!0),cc.director.emit("系统提示","Coins+"+this.rewardNumArr[t])):(globalData.setDiamondNum(this.rewardNumArr[t]),(e=cc.find("Canvas/diamondPanel"))&&cc.director.emit("飞币",10,this.btnGet,e,!1),cc.director.emit("系统提示","Gems+"+this.rewardNumArr[t]));this.check()},reset:function(){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].getChildByName("bar").getComponent(cc.Sprite).fillRange=globalData.getHuoDongData(this.nameArr[e])/this.targetNumArr[e],this.itemArr[e].getChildByName("numLabel").getComponent(cc.Label).string=globalData.getHuoDongData(this.nameArr[e])+"/"+this.targetNumArr[e]},check:function(){var e=this.getItemIndexChooseNow();globalData.getHuoDongData(this.nameArr[e])>=this.targetNumArr[e]&&!globalData.getHuoDongDataHadGet(this.nameArr[e])?this.btnGet.active=!0:this.btnGet.active=!1},getItemIndexChooseNow:function(){for(var e=-1,t=0;t<5;t++)
if(this.toggleContainer.children[t].getComponent(cc.Toggle).isChecked){e=t;break}
return e}}),cc._RF.pop()},{}],dialogMaxLevelGun:[function(e,t,n){"use strict";cc._RF.push(t,"77b86vo+uhIgI59kRUJgq4R","dialogMaxLevelGun"),cc.Class({extends:cc.Component,properties:{gunSpr:cc.Sprite,gunSprGold:cc.Sprite,btnUpgrade:cc.Node,btnNarmal:cc.Node,btnOppo:cc.Node},start:function(){Tools.resetDialog2(this.node,!0),this.gunSpr.spriteFrame=AD.gunIconArr[globalData.gunType],this.gunSprGold.spriteFrame=AD.gunGoldIconArr[globalData.gunType],this.btnOppo.active=!1,"oppo"==AD.chanelName1?(this.btnOppo.active=!0,this.btnNarmal.active=!1):"touTiao"==AD.chanelName1?this.btnNarmal.active=!1:this.btnNarmal.active=!0},btnCallBack:function(e,t){var n=this;switch(AD.audioMng.playSfx("按钮"),t){case "关闭":Tools.resetDialog2(this.node,!1),"menuScene"!=cc.director.getScene().name&&setTimeout(function(){cc.director.loadScene("matchScene")},500);break;case "升级":globalData.getGunLevel(globalData.gunType)>=5?(cc.director.emit("系统提示","Level Max"),setTimeout(function(){Tools.resetDialog2(n.node,!1)},500)):AD.showAD(this.upgradeSucess,this)}},onDisable:function(){"menuScene"==cc.director.getScene().name&&AD.hideBanner()},upgradeSucess:function(){for(var e=this,t=0;t<5;t++)globalData.setGunLevel(globalData.gunType);this.btnUpgrade.active=!1,cc.director.emit("系统提示","Level Max"),this.scheduleOnce(function(){Tools.resetDialog2(e.node,!1)},1),"menuScene"!=cc.director.getScene().name&&setTimeout(function(){cc.director.loadScene("matchScene")},500)}}),cc._RF.pop()},{}],dialogMng:[function(e,t,n){"use strict";cc._RF.push(t,"aaba7QcQtREqqPF7LHPjWe0","dialogMng"),cc.Class({extends:cc.Component,properties:{dialogOver:cc.Prefab,dialogScorePanel:cc.Prefab,dialogSignPrefab:cc.Prefab,dialogGetReward:cc.Prefab,dialogChouJiang:cc.Prefab,dialogCoinAndDiamond:cc.Prefab,dialogHuoDong:cc.Prefab,dialogPause:cc.Prefab,dialogMaxLevelGun:cc.Prefab,dialogXianLiangRole:cc.Prefab,dialogRolePrefab:cc.Prefab,dialogRevivePrefab:cc.Prefab},onLoad:function(){var e=this;cc.game.addPersistRootNode(this.node),cc.director.on("显示结算弹窗",function(t){var n=cc.instantiate(e.dialogOver);n.parent=cc.find("Canvas/dialogMng"),n.getComponent("dialogOver").reset(t),AD.showBanner()},this),cc.director.on("展示战绩弹窗",function(){cc.instantiate(e.dialogScorePanel).parent=cc.find("Canvas/dialogMng"),AD.gameScene.gameOver&&AD.chaPing(!0)},this),cc.director.on("显示结算奖励弹窗",function(t){var n=cc.instantiate(e.dialogGetReward);n.parent=cc.find("Canvas/dialogMng"),n.getComponent("dialogGetReward").reset(t)},this),cc.director.on("展示签到弹窗",function(){cc.instantiate(e.dialogSignPrefab).parent=cc.find("Canvas/dialogMng"),AD.chaPing(),AD.showBanner()},this),cc.director.on("展示抽奖弹窗",function(){cc.instantiate(e.dialogChouJiang).parent=cc.find("Canvas/dialogMng"),AD.chaPing(),AD.showBanner()},this),cc.director.on("显示货币弹窗",function(t){if(cc.find("Canvas/dialogMng").childrenCount>0)for(var n=0;n<cc.find("Canvas/dialogMng").childrenCount;n++)
if("dialogCoinAndDiamond"==cc.find("Canvas/dialogMng").children[n].name)return;var i=cc.instantiate(e.dialogCoinAndDiamond);i.parent=cc.find("Canvas/dialogMng"),i.getComponent("dialogCoinAndDiamond").reset(t),AD.chaPing(),AD.showBanner()},this),cc.director.on("展示活动弹窗",function(){cc.instantiate(e.dialogHuoDong).parent=cc.find("Canvas/dialogMng"),AD.chaPing(),AD.showBanner()},this),cc.director.on("显示暂停弹窗",function(){cc.instantiate(e.dialogPause).parent=cc.find("Canvas/dialogMng"),AD.chaPing(),AD.showBanner()},this),cc.director.on("显示枪支一键满级弹窗",function(){cc.instantiate(e.dialogMaxLevelGun).parent=cc.find("Canvas/dialogMng"),AD.showBanner()},this),cc.director.on("显示限量角色弹窗",function(){cc.instantiate(e.dialogXianLiangRole).parent=cc.find("Canvas/dialogMng"),AD.hideBanner()},this),cc.director.on("显示复活弹窗",function(){cc.instantiate(e.dialogRevivePrefab).parent=cc.find("Canvas/dialogMng")},this),cc.director.on("彩蛋角色",function(t){var n=cc.instantiate(e.dialogRolePrefab);n.parent=cc.find("Canvas/dialogMng"),n.getComponent("dialogRole").reset(!0,t)},this),cc.director.on("普通角色",function(){var t=cc.instantiate(e.dialogRolePrefab);t.parent=cc.find("Canvas/dialogMng"),t.getComponent("dialogRole").reset(!1,0)},this)},start:function(){}}),cc._RF.pop()},{}],dialogOverRoleControl:[function(e,t,n){"use strict";cc._RF.push(t,"24258XI+yRP66ktjCUhW9GR","dialogOverRoleControl"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,animNode:cc.Node,armNode:cc.Node,gunNode:cc.Node},onLoad:function(){},start:function(){},reset:function(e,t,n){this.anim=this.animNode.getComponent(sp.Skeleton),this.nameLabel.string=n,this.anim.setAnimation(0,"daijizhayan",!0),this.anim.setSkin("js"+(e+1)),this.changeRoleSpr(e),this.changeGunSpr(t)},changeRoleSpr:function(e){this.armNode.getComponent(cc.Sprite).spriteFrame=AD.armSprArr[e]},changeGunSpr:function(e){globalData.getGunLevel(e)<5?this.gunNode.getComponent(cc.Sprite).spriteFrame=AD.gunIconArr[e]:this.gunNode.getComponent(cc.Sprite).spriteFrame=AD.gunGoldIconArr[e]}}),cc._RF.pop()},{}],dialogOver:[function(e,t,n){"use strict";cc._RF.push(t,"fbae6ceTgBHrJNTQQ1cJVFT","dialogOver"),cc.Class({extends:cc.Component,properties:{geRenNode:cc.Node,tuanDuiNode:cc.Node,shengHuaNode:cc.Node,shengHuaRoleArr:[cc.Node],geRenRoleArr:[cc.Node],tuanDuiTipsWin:cc.Node,tuanDuiTipsLose:cc.Node,tuanDuiRoleArrSelf:[cc.Node],tuanDuiRoleArrEnemy:[cc.Node],mvpNode:cc.Node},start:function(){},reset:function(e){globalData.setPlayTimes(),AD.audioMng.stopMusic(),e?AD.audioMng.playSfx("胜利"):AD.audioMng.playSfx("失败"),this.resetShow(e),cc.director.on("关闭战绩弹窗",function(){cc.director.emit("显示结算奖励弹窗",e);console.log("game win");},this),this.scheduleOnce(function(){cc.director.emit("展示战绩弹窗")},3),this.scheduleOnce(function(){AD.gameOver()},.5)},resetShow:function(e){var t=this;if(this.shengHuaNode.active=!1,this.tuanDuiNode.active=!1,this.geRenNode.active=!1,"个人竞技"==globalData.modeType){this.geRenNode.active=!0,this.tuanDuiNode.active=!1;for(var n=new Array,i=0;i<6;i++){var o=(c=AD.playerMng.selfArrForever[i].getComponent("player")).killNum;if(0==n.length)n.push(AD.playerMng.selfArrForever[i]);else for(var a=0;a<n.length;a++){if(o>n[a].getComponent("player").killNum){n.splice(a,0,AD.playerMng.selfArrForever[i]);break}
if(a==n.length-1){n.push(AD.playerMng.selfArrForever[i]);break}}}
if(n.length>3)for(i=0;i<3;i++){var c=n[i].getComponent("player");this.geRenRoleArr[i].getComponent("dialogOverRoleControl").reset(c.type,c.gunType,c.nameLabel)}}else if("生化模式"==globalData.modeType){this.shengHuaNode.active=!0;for(i=0;i<3;i++){c=AD.playerMng.selfArrForever[i].getComponent("player");this.shengHuaRoleArr[i].getComponent("dialogOverRoleControl").reset(c.type,c.gunType,c.nameLabel)}}else{this.geRenNode.active=!1,this.tuanDuiNode.active=!0;for(i=0;i<3;i++){c=AD.playerMng.selfArrForever[i].getComponent("player");this.tuanDuiRoleArrSelf[i].getComponent("dialogOverRoleControl").reset(c.type,c.gunType,c.nameLabel)}
for(i=0;i<3;i++){c=AD.playerMng.enemyArrForever[i].getComponent("player");this.tuanDuiRoleArrEnemy[i].getComponent("dialogOverRoleControl").reset(c.type,c.gunType,c.nameLabel)}
if(!e){var s=this.tuanDuiTipsWin.x;this.tuanDuiTipsWin.x=this.tuanDuiTipsLose.x,this.tuanDuiTipsLose.x=s,this.tuanDuiTipsLose.scale=this.tuanDuiTipsWin.scale=0}
cc.tween(this.tuanDuiTipsLose).delay(.5).to(.2,{scale:1}).start(),cc.tween(this.tuanDuiTipsWin).delay(.5).to(.2,{scale:1}).start();for(n=new Array,i=0;i<3;i++){o=(c=AD.playerMng.selfArrForever[i].getComponent("player")).killNum;if(0==n.length)n.push(AD.playerMng.selfArrForever[i]);else for(a=0;a<n.length;a++){if(o>n[a].getComponent("player").killNum){n.splice(a,0,AD.playerMng.selfArrForever[i]);break}
if(a==n.length-1){n.push(AD.playerMng.selfArrForever[i]);break}}}
for(i=0;i<3;i++){o=(c=AD.playerMng.enemyArrForever[i].getComponent("player")).killNum;if(0==n.length)n.push(AD.playerMng.enemyArrForever[i]);else for(a=0;a<n.length;a++){if(o>n[a].getComponent("player").killNum){n.splice(a,0,AD.playerMng.enemyArrForever[i]);break}
if(a==n.length-1){n.push(AD.playerMng.enemyArrForever[i]);break}}}
var r=new Array;for(i=0;i<n.length;i++){c=n[i].getComponent("player");0==i?r.push(n[i]):c.killNum==n[i-1].getComponent("player").killNum&&r.push(n[i])}
var l=r[0];for(i=1;i<r.length;i++){(c=r[i].getComponent("player")).dieNum<l.getComponent("player").dieNum&&(l=r[i]),console.log(i+"     "+c.killNum),console.log(i+"     "+c.dieNum)}
var h=null;for(i=0;i<3;i++)
if(l==AD.playerMng.selfArrForever[i]){h=i,AD.mvpName=AD.playerMng.selfArrForever[i].getComponent("player").nameLabel;break}
var d=null;for(i=0;i<3;i++)
if(l==AD.playerMng.enemyArrForever[i]){d=i,AD.mvpName=AD.playerMng.enemyArrForever[i].getComponent("player").nameLabel;break}
null!=h?this.mvpNode.x=this.tuanDuiRoleArrSelf[h].x:null!=d&&(this.mvpNode.x=this.tuanDuiRoleArrEnemy[d].x),this.scheduleOnce(function(){t.mvpNode.scale=3,t.mvpNode.y+=100,cc.tween(t.mvpNode).to(.3,{scale:1,y:t.mvpNode.y-100},{easing:"sineOut"}).start()},.5)}}}),cc._RF.pop()},{}],dialogPause:[function(e,t,n){"use strict";cc._RF.push(t,"88dff5+ngVMFpVJq5Ij35R3","dialogPause"),cc.Class({extends:cc.Component,properties:{},start:function(){AD.showPauseNow=!0,Tools.resetDialog2(this.node,!0)},onDestroy:function(){AD.showPauseNow=!1,"touTiao"==AD.chanelName&&AD.hideBanner()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "确定":switch(globalData.modeType){case "团队竞技":case "个人竞技":case "爆破模式":cc.director.emit("过场动画","menuJingJi");break;default:cc.director.emit("过场动画","menuYuLe")}
break;case "关闭":Tools.resetDialog2(this.node,!1)}}}),cc._RF.pop()},{}],dialogRevive:[function(e,t,n){"use strict";cc._RF.push(t,"ca4cavGZ45CXowFItgA1Uyp","dialogRevive"),cc.Class({extends:cc.Component,properties:{secondLabel:cc.Label},start:function(){var e=this;Tools.resetDialog2(this.node,!0),this.secondNum=5,this.secondLabel.string=this.secondNum,this.schedule(function(){e.secondNum--,0==e.secondNum&&(e.node.destroy(),cc.director.emit("显示结算奖励弹窗",!1)),e.secondNum>=0&&(e.secondLabel.string=e.secondNum)},1)},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "关闭":this.node.destroy(),cc.director.emit("显示结算奖励弹窗",!1);break;case "复活":AD.showAD(this.unlockSucess,this)}},unlockSucess:function(){var e=this;setTimeout(function(){Tools.resetDialog2(e.node,!1),cc.director.emit("复活主角"),AD.labelMng.secondShengHua<=0&&AD.gameScene.gameOverFunc(!0)},200)}}),cc._RF.pop()},{}],dialogRole:[function(e,t,n){"use strict";cc._RF.push(t,"4c1b315j61DS5fB3HVIz597","dialogRole"),cc.Class({extends:cc.Component,properties:{titleCaiDan:cc.Node,titleNormal:cc.Node,roleNode:cc.Node,btnNarmal:cc.Node,btnOppo:cc.Node},reset:function(e,t){if(this._isYinCang=e,this.titleCaiDan.active=e,this.titleNormal.active=!e,0==this._isYinCang){for(var n=new Array,i=1;i<12;i++)0==globalData.getRoleUnlockState(i)&&n.push(i);for(i=16;i<19;i++)0==globalData.getRoleUnlockState(i)&&n.push(i);if(n.length<=0)return void this.node.destroy();n=Tools.getNewArr(n,n.length),this.roleIndex=n[0]}else this.roleIndex=t;this.roleNode.getComponent("dialogOverRoleControl").reset(this.roleIndex,0,0),this.btnOppo.active=!1,"oppo"==AD.chanelName1?(this.btnOppo.active=!0,this.btnNarmal.active=!1):"touTiao"==AD.chanelName1?this.btnNarmal.active=!1:this.btnNarmal.active=!0},start:function(){Tools.resetDialog2(this.node,!0)},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "关闭":Tools.resetDialog2(this.node,!1),this._isYinCang||setTimeout(function(){cc.director.loadScene("matchScene")},500);break;case "解锁":AD.showAD(this.unlockSucess,this)}},unlockSucess:function(){globalData.setRoleUnlockState(this.roleIndex),Tools.resetDialog2(this.node,!1),this._isYinCang?cc.director.emit("系统提示","Get Hiden Role"):(cc.director.emit("系统提示","Role Unlocked"),setTimeout(function(){cc.director.loadScene("matchScene")},500))},onDisable:function(){"menuScene"==cc.director.getScene().name&&AD.hideBanner()}}),cc._RF.pop()},{}],dialogScorePanelBtnShareParticle:[function(e,t,n){"use strict";cc._RF.push(t,"6f3dcOM+ElLM6FK7mQEyJDp","dialogScorePanelBtnShareParticle"),cc.Class({extends:cc.Component,properties:{particle:cc.ParticleSystem},start:function(){var e=this;this.schedule(function(){e.particle.resetSystem()},1)}}),cc._RF.pop()},{}],dialogScorePanelItem:[function(e,t,n){"use strict";cc._RF.push(t,"2a491kqielEFaKQYvHfBfHg","dialogScorePanelItem"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,killNumLabel:cc.Label,dieNumLabel:cc.Label,iconSpr:cc.Sprite,bgSprSelf:cc.SpriteFrame,bgSprEnemy:cc.SpriteFrame,icon:cc.Sprite,mvpNode:cc.Node},start:function(){},reset:function(e){this.node.zIndex=-e.killNum,this.nameLabel.string=e.name,this.killNumLabel.string=e.killNum,this.dieNumLabel.string=e.dieNum,this.icon.spriteFrame=e.iconSpr,"个人竞技"==globalData.modeType?e.isAI?this.node.getComponent(cc.Sprite).spriteFrame=this.bgSprSelf:this.node.getComponent(cc.Sprite).spriteFrame=this.bgSprEnemy:(e.isEnemy?this.node.getComponent(cc.Sprite).spriteFrame=this.bgSprEnemy:this.node.getComponent(cc.Sprite).spriteFrame=this.bgSprSelf,e.name==AD.mvpName&&(this.mvpNode.active=!0))}}),cc._RF.pop()},{}],dialogScorePanel:[function(e,t,n){"use strict";cc._RF.push(t,"671b2tUospKMr5a0ORzWMzm","dialogScorePanel"),cc.Class({extends:cc.Component,properties:{item:cc.Prefab,itemGeRen:cc.Prefab,selfScorePanel:cc.Node,enemyScorePanel:cc.Node,defaultScorePanel:cc.Node,numSumSelf:cc.Label,numSumEnemy:cc.Label,bgTuanDui:cc.Node,bgGeRen:cc.Node,btnGoOn:cc.Node,btnShareTT:cc.Node,btnOppo:cc.Node},onLoad:function(){},onEnable:function(){this.btnOppo.active=!1,Tools.resetDialog2(this.node,!0),"touTiao"==AD.chanelName1?AD.gameScene.gameOver?(this.btnGoOn.active=!0,this.btnGoOn.x=-150,this.btnShareTT.active=!0):(this.btnGoOn.active=!0,this.btnGoOn.x=0,this.btnShareTT.active=!1):(this.btnGoOn.active=!0,this.btnGoOn.x=0,this.btnShareTT.active=!1,"oppo"==AD.chanelName1&&(this.btnOppo.active=!0,this.btnGoOn.active=!1))},start:function(){var e=0,t=0;if("个人竞技"==globalData.modeType||"生化模式"==globalData.modeType){this.bgTuanDui.active=!1,this.bgGeRen.active=!0,this.numSumSelf.node.active=!1,this.numSumEnemy.node.active=!1,this.enemyScorePanel.active=!1,this.selfScorePanel.active=!1;var n=6;"生化模式"==globalData.modeType&&(n=3);for(var i=0;i<n;i++){e+=(o=AD.playerMng.selfArrForever[i].getComponent("player")).killNum,this.createItem(this.defaultScorePanel,{name:o.nameLabel,killNum:o.killNum,dieNum:o.dieNum,iconSpr:o.roleIcon,isEnemy:o.isEnemy,isAI:o.isAI})}}else{this.bgTuanDui.active=!0,this.bgGeRen.active=!1,this.defaultScorePanel.active=!1,this.enemyScorePanel.active=!0,this.selfScorePanel.active=!0,this.numSumSelf.node.active=!0,this.numSumEnemy.node.active=!0;for(i=0;i<3;i++){var o;e+=(o=AD.playerMng.selfArrForever[i].getComponent("player")).killNum,this.createItem(this.selfScorePanel,{name:o.nameLabel,killNum:o.killNum,dieNum:o.dieNum,iconSpr:o.roleIcon,isEnemy:o.isEnemy,isAI:o.isAI});var a=AD.playerMng.enemyArrForever[i].getComponent("player");t+=a.killNum,this.createItem(this.enemyScorePanel,{name:a.nameLabel,killNum:a.killNum,dieNum:a.dieNum,iconSpr:a.roleIcon,isEnemy:a.isEnemy,isAI:a.isAI})}}
this.numSumSelf.string=e,this.numSumEnemy.string=t},createItem:function(e,t){if("个人竞技"==globalData.modeType||"生化模式"==globalData.modeType)var n=cc.instantiate(this.itemGeRen);else n=cc.instantiate(this.item);n.parent=e,n.getComponent("dialogScorePanelItem").reset(t)},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "继续":Tools.resetDialog2(this.node,!1),cc.director.emit("关闭战绩弹窗");break;case "分享":AD_TouTiao.luPingShare()}}}),cc._RF.pop()},{}],dialogSign:[function(e,t,n){"use strict";cc._RF.push(t,"fcbe7e0LdpIA6+b9XK8IKmd","dialogSign"),cc.Class({extends:cc.Component,properties:{itemParent:cc.Node,signingEffect:cc.Node,signingEffect7:cc.Node},onLoad:function(){var e=this;this.items=this.itemParent.children;for(var t=0;t<7;t++)this.items[t].on(cc.Node.EventType.TOUCH_START,function(t){e.itemsClick(t.target.name)},this)},itemsClick:function(e){var t=parseInt(e[e.length-1]);this.couldSign&&this.signDays==t-1&&(this.signSucess(),AD.audioMng.playSfx("按钮")),console.log("aaa   "+t)},onEnable:function(){Tools.resetDialog2(this.node,!0)},onDisable:function(){cc.director.getScene().name,AD.hideBanner()},start:function(){this.reset()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "签到":break;case "已签到":Tools.resetDialog2(this.node,!1)}},reset:function(){this.couldSign=globalData.getSignData(),this.signDays=globalData.getSignDays(),this.signDays<7?(this.signingEffect.active=this.couldSign,this.signingEffect.position=this.items[this.signDays].position,6==this.signDays?(this.signingEffect.active=!1,this.signingEffect7.active=this.couldSign,this.signingEffect7.position=this.items[this.signDays].position):this.signingEffect7.active=!1):(this.signingEffect7.active=!1,this.signingEffect.active=!1);for(var e=0;e<7;e++){var t=e<this.signDays;console.log(e+"      "+t),this.items[e].getChildByName("yiQianDao").active=t}},signSucess:function(){AD.audioMng.playSfx("获得奖励");var e=null;switch(this.signDays){case 0:globalData.setCoinNum(500),e="Coins+500",cc.director.emit("飞币",15,this.items[this.signDays],cc.find("Canvas/coinPanel"),!0);break;case 3:globalData.setCoinNum(3e3),e="Coins+3000",cc.director.emit("飞币",15,this.items[this.signDays],cc.find("Canvas/coinPanel"),!0);break;case 5:globalData.setCoinNum(5e3),e="Coins+5000",cc.director.emit("飞币",15,this.items[this.signDays],cc.find("Canvas/coinPanel"),!0);break;case 2:globalData.setDiamondNum(200),e="Gems+200",cc.director.emit("飞币",10,this.items[this.signDays],cc.find("Canvas/diamondPanel"),!1);break;case 4:globalData.setDiamondNum(300),e="Gems+300",cc.director.emit("飞币",10,this.items[this.signDays],cc.find("Canvas/diamondPanel"),!1);break;case 1:e="Role Unlocked",globalData.setRoleUnlockState(5);break;case 6:e="Gun Unlocked",globalData.setGunUnlockState(11),cc.director.emit("切换展示枪支",11)}
globalData.setSignData(),this.reset(),cc.director.emit("系统提示",e)}}),cc._RF.pop()},{}],dialogXianLiangRole:[function(e,t,n){"use strict";cc._RF.push(t,"a98b8Ef5N1J34hqhaTKu4Zx","dialogXianLiangRole"),cc.Class({extends:cc.Component,properties:{timmerLabel:cc.Label,roleArr:[cc.Node]},onLoad:function(){Tools.resetDialog2(this.node,!0);var e=0;this.roleIndexArr=new Array;for(var t=0;t<3;t++)this.roleArr[t].active=!1;for(t=0;t<12&&(0!=globalData.getRoleUnlockState(t)||(this.roleIndexArr.push(t),this.roleArr[e].active=!0,this.roleArr[e].getComponent("dialogOverRoleControl").reset(t,0,0),3!=++e));t++);if(e<3)for(t=16;t<19&&(0!=globalData.getRoleUnlockState(t)||(this.roleIndexArr.push(t),this.roleArr[e].active=!0,this.roleArr[e].getComponent("dialogOverRoleControl").reset(t,0,0),3!=++e));t++);},start:function(){var e=this;this.timmerLabel.string=Tools.getSecond(globalData.xianLiangRoleSecond,!0),this.schedule(function(){e.timmerLabel.string=Tools.getSecond(globalData.xianLiangRoleSecond,!0)},1)},onDisable:function(){cc.director.getScene().name,AD.hideBanner()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "关闭":Tools.resetDialog2(this.node,!1);break;case "解锁1":this.targetIndex=0,this.btnNode=e.target,AD.showAD(this.unlockSucess,this);break;case "解锁2":this.targetIndex=1,this.btnNode=e.target,AD.showAD(this.unlockSucess,this);break;case "解锁3":this.btnNode=e.target,this.targetIndex=2,AD.showAD(this.unlockSucess,this)}},unlockSucess:function(){this.btnNode.active=!1,globalData.setRoleUnlockState(this.roleIndexArr[this.targetIndex])}}),cc._RF.pop()},{}],dialogYinSi:[function(e,t,n){"use strict";cc._RF.push(t,"4e8aaVwPbpNiqwhAAearZYZ","dialogYinSi"),cc.Class({extends:cc.Component,properties:{btnAgree1:cc.Node,btnNotAgree:cc.Node,btnNotAgree2:cc.Node,btnAgree2:cc.Node,btnClose1:cc.Node,panel1:cc.Node,panel2:cc.Node,zhuTiLabel:cc.Label},onEnable:function(){this.zhuTiLabel.string=this.node.parent.getComponent("yinSiPanel").zhuTiName+",以下简称'游戏开发者'",Tools.resetDialog(this.node,!0),this.panel1.active=!0,this.panel2.active=!1,globalData.data.showYinSi?(this.btnClose1.active=!0,this.btnAgree1.active=!1,this.btnNotAgree.active=!1,this.btnNotAgree2.active=!1):(this.btnClose1.active=!1,this.btnAgree1.active=!0,this.btnNotAgree.active=!0,this.btnNotAgree2.active=!0)},btnCallBack:function(e,t){switch(t){case "同意":Tools.resetDialog(this.node,!1),globalData.data.showYinSi||(globalData.data.showYinSi=!0,globalData.saveData(),this.node.parent.getComponent("yinSiPanel").checkPermission());break;case "不同意":AD.delayTime>0?(Tools.resetDialog(this.node,!1),globalData.data.showYinSi=!0,globalData.saveData(),this.node.parent.getComponent("yinSiPanel").checkPermission()):cc.game.end();break;case "关闭1":Tools.resetDialog(this.node,!1);break;case "关闭2":this.panel2.active=!1,this.panel1.active=!0;break;case "显示panel2":this.panel1.active=!1,this.panel2.active=!0}}}),cc._RF.pop()},{}],diamondNumListener:[function(e,t,n){"use strict";cc._RF.push(t,"8faf6RSFphGG5IPE2ft+EtM","diamondNumListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.getComponent(cc.Label).string=globalData.getDiamondNum(),cc.director.on("钻石数量变化",function(){e.node.getComponent(cc.Label).string=globalData.getDiamondNum()},this)},start:function(){}}),cc._RF.pop()},{}],dianWang:[function(e,t,n){"use strict";cc._RF.push(t,"cc2fdEJYaNJrqjfigXqC0Bx","dianWang"),cc.Class({extends:cc.Component,properties:{},start:function(){this.speed=1e3},update:function(e){this.node.x-=this.speed*e,this.node.x<AD.mapMng.airWallLeft.x-100&&this.node.destroy()},onCollisionEnter:function(e,t){switch(e.tag){case 66:this.checkOwner(e.node)}},checkOwner:function(e){var t=e.getComponent("player");t.hp>0&&t.beiDian()}}),cc._RF.pop()},{}],effectBoxBomb:[function(e,t,n){"use strict";cc._RF.push(t,"cdcaeGtjaNBh7tzN/WFODj0","effectBoxBomb"),cc.Class({extends:cc.Component,properties:{unitArr:[cc.Node]},onLoad:function(){},start:function(){},reset:function(e){var t=this;AD.audioMng.playSfx("箱子破碎");var n=-1;switch(e){case "木箱":n=0;break;case "砖块":n=1;break;case "木箱2":n=2;break;case "路障":n=3;break;case "石灰":n=4;break;case "垃圾桶":n=5}
for(var i=0;i<this.unitArr.length;i++)this.unitArr[i].active=i==n;var o=this.unitArr[n];this.scheduleOnce(function(){for(var e=0;e<o.childrenCount;e++){var t=o.children[e].width*o.children[e].height/8e3;o.children[e].getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(Tools.random(-1e3,1e3)*t,Tools.random(700,1800)*t),o.children[e].getComponent(cc.RigidBody).getWorldCenter(),!0),o.children[e].getComponent(cc.RigidBody).angularVelocity=Tools.random(-500,500)}},.02),cc.tween(this.node).delay(2).to(.3,{opacity:0}).call(function(){t.node.destroy()}).start()}}),cc._RF.pop()},{}],effectFuChou:[function(e,t,n){"use strict";cc._RF.push(t,"bb5cfL+iIhGKYZEKFKjERZp","effectFuChou"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.scale=0,cc.tween(this.node).to(.1,{scale:1}).delay(2).to(.1,{scale:0}).call(function(){e.node.destroy()}).start()}}),cc._RF.pop()},{}],effectHit:[function(e,t,n){"use strict";cc._RF.push(t,"9b59b/2Z0dMp6qcpvqCxLeO","effectHit"),cc.Class({extends:cc.Component,properties:{},playEnd:function(){AD.playerMng.effectHitPool.put(this.node)},reset:function(){this.node.getComponent(cc.Animation).play(),this.node.angle=Tools.random(1,360)}}),cc._RF.pop()},{}],effectJiaXue:[function(e,t,n){"use strict";cc._RF.push(t,"1295cPUG2RGkZhGEUoR4SF+","effectJiaXue"),cc.Class({extends:cc.Component,properties:{particleArr:[cc.ParticleSystem]},start:function(){},onEnable:function(){for(var e=0;e<this.particleArr.length;e++)this.particleArr[e].resetSystem()}}),cc._RF.pop()},{}],effectLianSha:[function(e,t,n){"use strict";cc._RF.push(t,"76448ivQbpDgYMG4WeLQmpo","effectLianSha"),cc.Class({extends:cc.Component,properties:{lianShaTipsArr:[cc.Node],lianShaTuArr:[cc.Node],fuChoutips:cc.Node,fuChouTu:cc.Node,tipsParent:cc.Node},reset:function(e){if("复仇"==e)AD.audioMng.playSfx("复仇"),this.fuChoutips.active=this.fuChouTu.active=!0;else{this.tipsParent.active=1!=e,e>6&&(e=6);var t=e-1;t>4&&(t=4),AD.audioMng.playSfx("连杀",t);for(var n=0;n<5;n++)this.lianShaTipsArr[n].active=n==e-2,this.lianShaTuArr[n].active=n<=e-1}
cc.tween(this.node).delay(2).to(.2,{scale:0,opacity:0}).start()}}),cc._RF.pop()},{}],effectMng:[function(e,t,n){"use strict";cc._RF.push(t,"83e03K7t6lELaahzrIwAvvM","effectMng"),cc.Class({extends:cc.Component,properties:{lianShaPrfab:cc.Prefab,boxBombPrefab:cc.Prefab},onLoad:function(){var e=this;AD.effectMng=this,cc.director.on("连杀",function(t){e.createEffect("连杀",t)},this),cc.director.on("复仇",function(t){e.createEffect("连杀","复仇")},this)},start:function(){},createEffect:function(e){for(var t=null,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];switch(e){case "连杀":(t=cc.instantiate(this.lianShaPrfab)).getComponent("effectLianSha").reset(i[0]);break;case "箱子":Math.abs(i[0].x-AD.gameScene.camera.x)<=cc.winSize.width/2+100&&((t=cc.instantiate(this.boxBombPrefab)).position=i[0],t.getComponent("effectBoxBomb").reset(i[1]))}
t&&(t.parent=this.node)}}),cc._RF.pop()},{}],flag:[function(e,t,n){"use strict";cc._RF.push(t,"17ee7pqQyRNQ5YrnVuoN5tf","flag"),cc.Class({extends:cc.Component,properties:{},start:function(){},onDisable:function(){"selfBt"==this.node.group?AD.playerMng.flagEnemy=null:AD.playerMng.flagSelf=null},onBeginContact:function(e,t,n){66==n.tag&&this.checkOwner(n.node)},checkOwner:function(e){var t=e.getComponent("player");t.hp>0&&(this.node.destroy(),t.showFlag())}}),cc._RF.pop()},{}],gameScene:[function(e,t,n){"use strict";cc._RF.push(t,"b54e3etdehP8KKvuWdz1tku","gameScene"),cc.Class({extends:cc.Component,properties:{camera:cc.Node,gameNode:cc.Node,propPrefab:cc.Prefab,dialogPause:cc.Node,zhunXing:cc.Node,tipsPrefabArr:[cc.Prefab]},onLoad:function(){AD.gameScene=this,this.beginNow=!1,this.gameOver=!1,AD.couldShake=!1,AD.audioMng.playMusic(),AD.showPauseNow=!1},start:function(){var e=this;AD.randomFang=Tools.random(0,1),AD.gameScene.dialogPause.active=!1,this.zhunXing.active=AD.mouseClick,AD.mvpName=null,this.gameBegin(),this.scheduleOnce(function(){e.createTips("游戏开始")},1.2),cc.director.on("游戏开始",function(){e.beginNow=!0},this),"touTiao"!=AD.chanelName?AD.showBanner():AD.hideBanner(),this.scheduleOnce(function(){AD_TouTiao.luPingBegin()},15),this.scheduleOnce(function(){AD_TouTiao.luPingOver()},35)},onDestroy:function(){-1!=AD.audioMng.sfxHuoCheIndex&&cc.audioEngine.setVolume(this.sfxHuoCheIndex,0)},gameBegin:function(){var e=this;this.initKeyBoard(),this.createRoles(),this.initProp(),this.schedule(function(){e.gameOver||AD.audioMng.playSfx("无线电")},5),"生化模式"==globalData.modeType&&this.schedule(function(){e.gameOver||AD.audioMng.playSfx("僵尸")},6,3)},createRoles:function(){if(console.log("生成角色***********************"),this.rolesId=0,this.playTimes=globalData.getPlayTimes(),"爆破模式"==globalData.modeType?(this.hadAnBao=!1,this.jinGongFangIsEnemy=1==Tools.random(0,1),this.anBaoRoleIndex=Tools.random(0,1),this.anBaoTimer=4,this.anBaoTimerMax=4,this.chaiBaoTimer=8,this.chaiBaoTimerMax=8,this.hadCreatAnBaoRole=!1,this.isChaiBaoing=!1):"抢旗模式"==globalData.modeType&&(this.qiangQiRoleIndexSelf=Tools.random(0,1),this.hadCreateQiangQiRoleSelf=!1,this.hadCreateQiangQiRoleEnemy=!1),AD.playerMng.createRole(globalData.roleType,!1,!1,globalData.gunType),"个人竞技"==globalData.modeType)for(var e=0;e<5;e++){(t=Tools.random(0,globalData.gunType+2))<0?t=0:t>15&&(t=15),AD.playerMng.createRole(e,!0,!1,t)}else if("生化模式"==globalData.modeType)for(e=0;e<2;e++){(t=Tools.random(0,globalData.gunType+2))<0?t=0:t>15&&(t=15),AD.playerMng.createRole(e,!0,!1,t)}else{for(e=0;e<2;e++){(t=Tools.random(0,globalData.gunType+2))<0?t=0:t>15&&(t=15),AD.playerMng.createRole(0,!0,!1,t)}
for(e=0;e<3;e++){var t;(t=Tools.random(0,globalData.gunType+2))<0?t=0:t>15&&(t=15),AD.playerMng.createRole(0,!0,!0,t)}}},createTips:function(e){switch(e){case "换弹中":(t=cc.instantiate(this.tipsPrefabArr[0])).getComponent("tipsHuanDanZhong").reset(arguments.length<=1?void 0:arguments[1]);break;case "游戏结束":var t=cc.instantiate(this.tipsPrefabArr[1]);break;case "游戏开始":t=cc.instantiate(this.tipsPrefabArr[2]);break;case "僵尸来袭":t=cc.instantiate(this.tipsPrefabArr[4]);AD.audioMng.playSfx("警告");break;case "炸弹已安放":t=cc.instantiate(this.tipsPrefabArr[3]);cc.tween(t.getChildByName("zheZhao")).delay(3).to(.2,{opacity:0}).start(),cc.tween(t.getChildByName("bg")).delay(3).to(.2,{scaleY:0}).call(function(){t.destroy()}).start()}
t.parent=cc.find("Canvas/UI/tipsPanel")},initProp:function(){this.propDurationMax=10,this.propDuration=0},createProp:function(){var e=cc.instantiate(this.propPrefab);e.position=AD.mapMng.propPosNodeArr[Tools.random(0,AD.mapMng.propPosNodeArr.length-1)],e.parent=cc.find("mapMng",this.gameNode)},update:function(e){AD.playerNow&&AD.playerNowJS.moveCamera&&(this.camera.x=AD.playerNow.x,this.camera.x<=AD.mapMng.airWallLeft.x+cc.winSize.width/2?this.camera.x=AD.mapMng.airWallLeft.x+cc.winSize.width/2:this.camera.x>=AD.mapMng.airWallRight.x-cc.winSize.width/2&&(this.camera.x=AD.mapMng.airWallRight.x-cc.winSize.width/2),AD.playerNow.y-this.camera.y>200?(this.camera.y=AD.playerNow.y-200,this.camera.y>140&&(this.camera.y=140)):this.camera.y-AD.playerNow.y>100&&(this.camera.y=AD.playerNow.y+100,this.camera.y<-250&&(this.camera.y=-250))),AD.mapMng.mapBg.x=.8*this.camera.x,AD.mapMng.mapBg.y=.8*this.camera.y,"手雷模式"!=globalData.modeType&&this.propDuration<this.propDurationMax&&(this.propDuration+=e,this.propDuration>=this.propDurationMax&&this.createProp())},initKeyBoard:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.a:cc.director.emit("玩家走",-1);break;case cc.macro.KEY.d:cc.director.emit("玩家走",1);break;case cc.macro.KEY.w:cc.director.emit("玩家跳");break;case cc.macro.KEY.e:AD.btnsPanel.btnAnBao.active&&AD.playerNow.getComponent("player").btnAnBaoCallBack(!0);break;case cc.macro.KEY.r:cc.director.emit("换弹");break;case cc.macro.KEY.space:cc.director.emit("手雷")}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.d:cc.director.emit("玩家停");break;case cc.macro.KEY.e:AD.btnsPanel.btnAnBao.active&&AD.playerNow.getComponent("player").btnAnBaoCallBack(!1)}},gameOverFunc:function(e){var t=this;this.gameOver||(AD_TouTiao.luPingOver(),-1!=AD.audioMng.sfxHuoCheIndex&&cc.audioEngine.setVolume(this.sfxHuoCheIndex,0),AD.labelMng.timmerModeBaoPo_fangShou.parent.active=!1,this.gameOver=!0,this.scheduleOnce(function(){t.createTips("游戏结束")},2),this.scheduleOnce(function(){"生化模式"==globalData.modeType?AD.playerNow.getComponent("player").hp>0&&cc.director.emit("显示结算弹窗",e):cc.director.emit("显示结算弹窗",e)},5))}}),cc._RF.pop()},{}],geRenPanel:[function(e,t,n){"use strict";cc._RF.push(t,"dd9083s1vxO1ZxniMaIaHu/","geRenPanel"),cc.Class({extends:cc.Component,properties:{geRenItemsParent:cc.Node,shengHuaItemsParent:cc.Node},onLoad:function(){"个人竞技"==globalData.modeType?(this.geRen(),this.geRenItemsParent.active=!0,this.shengHuaItemsParent.active=!1):"生化模式"==globalData.modeType&&(this.shengHua(),this.geRenItemsParent.active=!1,this.shengHuaItemsParent.active=!0)},start:function(){},geRen:function(){var e=this;this.itemsArr=this.geRenItemsParent.children,this.matchNum=Tools.random(1,2);for(var t=0;t<6;t++)this.itemsArr[t].children[0].active=t<this.matchNum,this.itemsArr[t].children[0].getComponent(cc.Sprite).spriteFrame=0!=t?AD.roleIconArr[t]:AD.iconSelf;this.schedule(function(){if(Tools.random(1,100)<30&&(e.matchNum++,6==e.matchNum&&cc.director.emit("匹配完成"),e.matchNum<7))for(var t=0;t<6;t++)e.itemsArr[t].children[0].active=t<e.matchNum},.3)},shengHua:function(){var e=this;this.itemsArr=this.shengHuaItemsParent.children,this.matchNum=1;for(var t=0;t<3;t++)this.itemsArr[t].children[0].active=t<this.matchNum,this.itemsArr[t].children[0].getComponent(cc.Sprite).spriteFrame=0!=t?AD.roleIconArr[t]:AD.iconSelf;this.schedule(function(){if(Tools.random(1,100)<30&&(e.matchNum++,3==e.matchNum&&cc.director.emit("匹配完成"),e.matchNum<4))for(var t=0;t<3;t++)e.itemsArr[t].children[0].active=t<e.matchNum},.3)}}),cc._RF.pop()},{}],globalNode:[function(e,t,n){"use strict";cc._RF.push(t,"bf3fbLjoVFDRLKV4surHTiu","globalNode"),cc.Class({extends:cc.Component,properties:{globalTips:cc.Prefab,paoMaDengPrefab:cc.Prefab,coinFly:cc.Prefab,roleIcon:cc.Node,roleIconSelf:cc.Sprite,chengHaoIcon:cc.Node,gunSpr:cc.Node,gunGoldSpr:cc.Node,armSprArrNode:cc.Node},onLoad:function(){var e=this;AD.globalNode=this,cc.game.addPersistRootNode(this.node),cc.director.on("系统提示",function(t){e.showTips(t)},this),cc.director.on("飞币",function(t,n,i,o){for(var a=0;a<t;a++)e.showCoin(n,i,o)},this),this.initData()},start:function(){this.schedule(function(){globalData.data.onlineSecond>0&&(globalData.data.onlineSecond--,globalData.setOnlineSecond()),globalData.xianLiangRoleSecond--,globalData.xianLiangRoleSecond<=0&&(globalData.xianLiangRoleSecond=86400),globalData.xianLiangRoleSecond%10==0&&globalData.setXianLiangRoleSecond()},1),this.initPaoMaDeng()},showTips:function(e){var t=cc.instantiate(this.globalTips);t.parent=cc.find("Canvas"),t.group="UI",t.position=cc.v2(0,60),t.getChildByName("tips").getComponent(cc.Label).string=e,t.scaleY=0,cc.tween(t).to(.2,{scaleY:1},{easing:"backInOut"}).delay(.8).to(.2,{scaleY:0},{easing:"backInOut"}).call(function(){t.destroy()}).start()},showCoin:function(e,t,n){var i=cc.instantiate(this.coinFly);i.parent=cc.find("Canvas"),i.group="UI";var o=e.parent.convertToWorldSpaceAR(e.position),a=t.parent.convertToWorldSpaceAR(t.position);i.getComponent("coinFly").reset(cc.find("Canvas").convertToNodeSpaceAR(o),cc.find("Canvas").convertToNodeSpaceAR(a),n)},initData:function(){AD.nameArr=new Array;for(var e=100,t=0;t<500;t++){var n="Player"+(e+=Tools.random(1,2));AD.nameArr.push(n)}
AD.roleIconArr=new Array;for(t=0;t<this.roleIcon.children.length;t++)AD.roleIconArr.push(this.roleIcon.children[t].getComponent(cc.Sprite).spriteFrame);AD.iconSelf=this.roleIconSelf.spriteFrame,AD.chengHaoIconArr=new Array;for(t=0;t<this.chengHaoIcon.children.length;t++)AD.chengHaoIconArr.push(this.chengHaoIcon.children[t].getComponent(cc.Sprite).spriteFrame);AD.gunIconArr=new Array;for(t=0;t<this.gunSpr.children.length;t++)AD.gunIconArr.push(this.gunSpr.children[t].getComponent(cc.Sprite).spriteFrame);AD.gunGoldIconArr=new Array;for(t=0;t<this.gunGoldSpr.children.length;t++)AD.gunGoldIconArr.push(this.gunGoldSpr.children[t].getComponent(cc.Sprite).spriteFrame);AD.armSprArr=new Array;for(t=0;t<this.armSprArrNode.children.length;t++)AD.armSprArr.push(this.armSprArrNode.children[t].getComponent(cc.Sprite).spriteFrame)},getNameRandom:function(){AD.nameArr=Tools.getNewArr(AD.nameArr,AD.nameArr.length-1)},getRoleIconRandom:function(){AD.roleIconArr=Tools.getNewArr(AD.roleIconArr,AD.roleIconArr.length);for(var e=0;e<6;e++)console.log("AD.roleIconArr  "+AD.roleIconArr[e].name)},initPaoMaDeng:function(){var e=this;this.schedule(function(){if("gameScene"!=cc.director.getScene().name){var t=cc.instantiate(e.paoMaDengPrefab);t.group="UI",t.parent=e.node,t.x=cc.winSize.width/2,t.y=620,t.getComponent("paoMaDengMng").nameLabel.string=AD.nameArr[Tools.random(0,AD.nameArr.length-1)],t.getComponent("paoMaDengMng").junXianLabel.string=globalData.junXianArr[Tools.random(7,14)]}},10)}}),cc._RF.pop()},{}],guide:[function(e,t,n){"use strict";cc._RF.push(t,"caab5mFLMNCnIzjcQbP2rUf","guide"),cc.Class({extends:cc.Component,properties:{isMain:!1},start:function(){var e=this;globalData.data.hadGuide?this.node.active=!1:(this.isMain&&this.scheduleOnce(function(){cc.director.emit("指引完毕"),globalData.data.hadGuide=!0,globalData.saveData()},6),cc.director.on("指引完毕",function(){cc.tween(e.node).to(.5,{opacity:0}).call(function(){e.node.active=!1}).start()},this))}}),cc._RF.pop()},{}],gunConfig:[function(e,t,n){"use strict";cc._RF.push(t,"32109RgdrpPTqkRQqFOm3Tm","gunConfig"),cc.Class({extends:cc.Component,properties:{barHurt:cc.Node,barSpeed:cc.Node,barJingZhun:cc.Node,barSheCheng:cc.Node,barHuanDan:cc.Node,barDanJia:cc.Node,hurtNum:cc.Label,barSpeedNum:cc.Label,barJingZhunNum:cc.Label,barSheChengNum:cc.Label,barHuanDanNum:cc.Label,barDanJiaNum:cc.Label},start:function(){var e=this;this.reset(globalData.gunType),cc.director.on("切换枪",function(t){e.reset(t)},this)},reset:function(e){this.resetNodeScaleX(this.barHurt,globalData.getGunCfg(e,"伤害")/100),this.hurtNum.string=parseInt(100*this.barHurt.scaleX),this.resetNodeScaleX(this.barSpeed,1/globalData.getGunCfg(e,"射速")/10),this.barSpeedNum.string=parseInt(100*this.barSpeed.scaleX),this.resetNodeScaleX(this.barJingZhun,(12-globalData.getGunCfg(e,"精准"))/12),this.barJingZhunNum.string=parseInt(100*this.barJingZhun.scaleX),this.resetNodeScaleX(this.barSheCheng,globalData.getGunCfg(e,"攻击范围")/1e3),this.barSheChengNum.string=parseInt(100*this.barSheCheng.scaleX),this.resetNodeScaleX(this.barHuanDan,(4-globalData.getGunCfg(e,"换弹速度"))/3),this.barHuanDanNum.string=parseInt(100*this.barHuanDan.scaleX),this.resetNodeScaleX(this.barDanJia,globalData.getGunCfg(e,"弹夹数")/50),this.barDanJiaNum.string=globalData.getGunCfg(e,"弹夹数")},resetNodeScaleX:function(e,t){e.scaleX=t,e.scaleX>1&&(e.scaleX=1)}}),cc._RF.pop()},{}],guoChang:[function(e,t,n){"use strict";cc._RF.push(t,"2277bhT3jZD2ahTof/h8BLK","guoChang"),cc.Class({extends:cc.Component,properties:{guoDuEffect:cc.Prefab},onLoad:function(){var e=this;cc.game.addPersistRootNode(this.node),cc.director.on("过场动画",function(t){var n=cc.instantiate(e.guoDuEffect);n.parent=e.node,n.children[0].getComponent("guoDuEffect").reset(t)},this),this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.node.group="UI"}}),cc._RF.pop()},{}],guoDuEffect:[function(e,t,n){"use strict";cc._RF.push(t,"8539dbg5aFMopKTeqJcZuKx","guoDuEffect"),cc.Class({extends:cc.Component,properties:{animation:cc.Animation},onLoad:function(){this.node.group="UI",this.node.position=cc.v2(0,0),this.animation.play()},start:function(){},reset:function(e){this.targetScene=e},inEnd:function(){var e=this;cc.director.loadScene(this.targetScene,function(t){e.animation.play("effect_guoXhang_out")})},outEnd:function(){this.node.parent.destroy()},open:function(){}}),cc._RF.pop()},{}],hongDian:[function(e,t,n){"use strict";cc._RF.push(t,"e9e978akJpIApAXxHdRk80w","hongDian"),cc.Class({extends:cc.Component,properties:{contentName:"活动",needAct:!0},start:function(){var e=this;if("抽奖"!=this.contentName&&(this.node.opacity=0,this.check(),this.schedule(function(){e.check()},.2)),this.needAct){this.scheduleOnce(function(){cc.tween(e.node).repeatForever(cc.tween().to(.2,{angle:30},{easing:"sineInOut"}).to(.4,{angle:-30},{easing:"sineInOut"}).to(.4,{angle:30},{easing:"sineInOut"}).to(.4,{angle:-30},{easing:"sineInOut"}).to(.4,{angle:30},{easing:"sineInOut"}).to(.4,{angle:0},{easing:"sineInOut"}).delay(1)).start()},.01*Tools.random(20,100))}},check:function(){var e=0;switch(this.contentName){case "活动":for(var t=["竞技先锋","拆弹专家","抢旗模式","末日使者","金枪大师"],n=[50,5,5,300,15],i=0;i<5;i++)
if(globalData.getHuoDongData(t[i])>=n[i]&&!globalData.getHuoDongDataHadGet(t[i])){e=255;break}
break;case "签到":globalData.getSignData()&&(e=255);break;case "抽奖":break;case "军衔":for(i=1;i<16;i++){var o=globalData.getJunXianHadGetRewardLevel(i);if(globalData.getChengHaoLevel()>=i&&0==o){e=255;break}}
break;case "强化":globalData.getQiangHuaNum()>=globalData.qiangHuaCastArr[globalData.data.qiangHuaLevel]&&(e=255);break;case "新武器":globalData.getShowHongDianNewGun()!=globalData.getChengHaoLevel()&&(e=255)}
this.node.opacity=e}}),cc._RF.pop()},{}],hurtNumTips:[function(e,t,n){"use strict";cc._RF.push(t,"8c9a9BZI6NOgLpN7ekinx4/","hurtNumTips"),cc.Class({extends:cc.Component,properties:{numLabel:cc.Label,numLabelBaoJi:cc.Label},start:function(){},reset:function(e,t){var n=this;e=parseInt(e),t?(this.numLabelBaoJi.string="%-"+e,this.numLabelBaoJi.node.active=!0,this.numLabel.node.active=!1):(this.numLabelBaoJi.node.active=!1,this.numLabel.node.active=!0,this.numLabel.string="-"+e),this.node.x+=Tools.random(-15,15),this.node.y+=Tools.random(0,15),cc.tween(this.node).by(.15,{scale:1,y:20}).by(.25,{scale:-1,y:30}).call(function(){AD.playerMng.hurtNumTipsPool.put(n.node)}).start()}}),cc._RF.pop()},{}],junXianItem:[function(e,t,n){"use strict";cc._RF.push(t,"807a4+rgQNDJY6wCX8B/JTq","junXianItem"),cc.Class({extends:cc.Component,properties:{junXianIcon:cc.Sprite,junXianName:cc.Label,roleInJuXian:cc.Prefab,xuanZhongKuang:cc.Node,duiGou:cc.Node,kuangCouldGetSpr:cc.SpriteFrame,rewardIconArr:[cc.Sprite],rewardIconSprArrN:[cc.SpriteFrame],rewardNumLabelArr:[cc.Label]},onLoad:function(){var e=this;this.box=cc.find("box",this.node),cc.director.on("重置军衔经验",function(){e.reset(e.index)},this),this.box.on(cc.Node.EventType.TOUCH_START,function(){globalData.getChengHaoLevel()<e.index&&cc.director.emit("系统提示","Need Level Up Rank To Get")},this),this.xuanZhongKuang.on(cc.Node.EventType.TOUCH_START,function(){e.getSucess()},this),this.box=this.duiGou.parent,this.boxSprYuan=this.box.getComponent(cc.Sprite).spriteFrame},start:function(){},getSucess:function(){AD.audioMng.playSfx("获得奖励"),globalData.setJunXianHadGetRewardLevel(this.index),this.reset(this.index),cc.director.emit("系统提示",this.content),globalData.setQiangHuaNum(this._qiangHuaDianNum),this._playerIdex>0&&globalData.setRoleUnlockState(this._playerIdex),this._coinNum>0&&(globalData.setCoinNum(this._coinNum),cc.director.emit("飞币",15,this.rewardIconArr[1].node,cc.find("Canvas/coinPanel"),!0)),this._diamondNum>0&&(globalData.setDiamondNum(this._diamondNum),cc.director.emit("飞币",10,this.rewardIconArr[1].node,cc.find("Canvas/diamondPanel"),!1))},reset:function(e){if(this.index=e,0!=e){if(this.junXianIcon.spriteFrame=AD.chengHaoIconArr[e],this.junXianName.string=AD.chengHaoData[e].Rank_Name,this._qiangHuaDianNum=AD.chengHaoData[e].Rank_Talent,this._coinNum=AD.chengHaoData[e].Rank_Gold,this._diamondNum=AD.chengHaoData[e].Rank_Diamond,this._playerIdex=AD.chengHaoData[e].Rank_Player,this.content="Points+"+this._qiangHuaDianNum,this.rewardIconArr[0].spriteFrame=this.rewardIconSprArrN[2],this.rewardNumLabelArr[0].string="x"+this._qiangHuaDianNum,this._coinNum>0)this.rewardIconArr[1].spriteFrame=this.rewardIconSprArrN[0],this.rewardNumLabelArr[1].string="x"+this._coinNum,this.content+="  Coins+"+this._coinNum;else if(this._diamondNum>0)this.rewardIconArr[1].spriteFrame=this.rewardIconSprArrN[1],this.rewardNumLabelArr[1].string="x"+this._diamondNum,this.content+="  Gems+"+this._diamondNum;else if(this._playerIdex>0){this.rewardNumLabelArr[1].string="x1";var t=cc.instantiate(this.roleInJuXian);t.parent=this.rewardIconArr[1].node,t.getComponent("roleInJunXian").reset(this._playerIdex-1),this.content+="  Rolex1"}
var n=globalData.getJunXianHadGetRewardLevel(e),i=globalData.getChengHaoLevel();this.duiGou.active=!1,this.xuanZhongKuang.active=!1,i>=e&&(0==n?(this.box.getComponent(cc.Sprite).spriteFrame=this.kuangCouldGetSpr,this.xuanZhongKuang.active=!0):(this.duiGou.active=!0,this.box.getComponent(cc.Sprite).spriteFrame=this.boxSprYuan))}else this.duiGou.parent.active=!1}}),cc._RF.pop()},{}],junXianScene:[function(e,t,n){"use strict";cc._RF.push(t,"8504amH7gdFcL5xUyprjxZ0","junXianScene"),cc.Class({extends:cc.Component,properties:{itemParent:cc.Node,itemUp:cc.Prefab,itemDown:cc.Prefab,bar:cc.Sprite},start:function(){this.bar.fillRange=globalData.getChengHaoLevel()/14+1/14*globalData.getChengHaoEPLevelNow().progress,this.createItem(),AD.hideBanner(),AD.chaPing()},createItem:function(){for(var e=0;e<15;e++){var t=null;(t=e%2==0?cc.instantiate(this.itemDown):cc.instantiate(this.itemUp)).parent=this.itemParent,t.x=300+300*e,t.getComponent("junXianItem").reset(e)}},btnCallBack:function(e,t){globalData.setChengHaoEP(10),cc.director.emit("重置军衔经验"),this.bar.fillRange=globalData.getChengHaoLevel()/14+1/14*globalData.getChengHaoEPLevelNow().progress},update:function(e){}}),cc._RF.pop()},{}],killNumPanel:[function(e,t,n){"use strict";cc._RF.push(t,"6d0f8s8+w9LBqdoHCVhS8Ca","killNumPanel"),cc.Class({extends:cc.Component,properties:{unitPrefab:cc.Prefab},onLoad:function(){var e=this;cc.director.on("杀人信息统计",function(t,n,i,o){e.createUnit(t,n,i,o)},this)},start:function(){},createUnit:function(e,t,n,i){var o=cc.instantiate(this.unitPrefab);o.parent=this.node,o.getChildByName("name1").getComponent(cc.Label).string=e,o.getChildByName("name2").getComponent(cc.Label).string=t,"个人竞技"!=globalData.modeType?n?(Tools.setNodeColor(o.getChildByName("name1"),46,160,233),Tools.setNodeColor(o.getChildByName("name2"),218,72,56)):(Tools.setNodeColor(o.getChildByName("name2"),46,160,233),Tools.setNodeColor(o.getChildByName("name1"),218,72,56)):"我"==e?(Tools.setNodeColor(o.getChildByName("name1"),46,160,233),Tools.setNodeColor(o.getChildByName("name2"),218,72,56)):"我"==t?(Tools.setNodeColor(o.getChildByName("name2"),46,160,233),Tools.setNodeColor(o.getChildByName("name1"),218,72,56)):(Tools.setNodeColor(o.getChildByName("name2"),218,72,56),Tools.setNodeColor(o.getChildByName("name1"),218,72,56)),this.scheduleOnce(function(){o.children.forEach(function(e){cc.tween(e).to(.2,{scaleY:0}).start()}),cc.tween(o).to(.2,{height:0}).call(function(){o.destroy()}).start()},5)}}),cc._RF.pop()},{}],labelMng:[function(e,t,n){"use strict";cc._RF.push(t,"392dbqLL/5ABLRrIaDeDdqA","labelMng"),cc.Class({extends:cc.Component,properties:{timmerModeBaoPo_fangShou:cc.Node,timmerModeBaoPo_jingGong:cc.Node,killNumSelfLabel:cc.Node,killNumEnemyLabel:cc.Node,timmerShengHua:cc.Node,barSelf:cc.Sprite,barEnemy:cc.Sprite,tipsQiangQiMode:cc.Node},onLoad:function(){var e=this;switch(AD.labelMng=this,this.timmerModeBaoPo_fangShou.active=this.timmerModeBaoPo_jingGong.active=!1,AD.killNumSelf=0,AD.killNumEnemy=0,AD.flagNumSelf=0,AD.flagNumEnemy=0,this.timmerShengHua.active=!1,globalData.modeType){case "个人竞技":this.maxScore=10;break;case "团队竞技":this.maxScore=15;break;case "抢旗模式":this.maxScore=3,this.getFlagTips=this.tipsQiangQiMode.getChildByName("get"),this.putFlagTips=this.tipsQiangQiMode.getChildByName("put"),cc.director.on("去抢旗吗",function(t){e.getFlagTips.active=t,e.putFlagTips.active=!t},this);break;case "月球模式":this.maxScore=15;break;case "手雷模式":this.maxScore=10;break;case "生化模式":this.maxScore=20,this.secondShengHua=this.secondShengHuaSum=120;for(var t=0;t<3;t++)this.timmerShengHua.getChildByName("icons").children[t].children[1].active=!1,this.timmerShengHua.getChildByName("icons").children[t].children[0].getComponent(cc.Sprite).spriteFrame=0!=t?AD.roleIconArr[t]:AD.iconSelf;this.timmerShengHuaLabel=this.timmerShengHua.getChildByName("num").getComponent(cc.Label),this.timmerShengHuaLabel.string=Tools.getSecond2(this.secondShengHua),cc.director.on("游戏开始",function(){e.timmerShengHua.active=!0,e.timmerShengHuaLabel=e.timmerShengHua.getChildByName("num").getComponent(cc.Label),e.timmerShengHuaLabel.string=Tools.getSecond2(e.secondShengHua),e.schedule(function(){e.secondShengHua>0?e.secondShengHua--:0==e.secondShengHua&&(e.timmerShengHua.active=!1,AD.playerNow.getComponent("player").hp>0&&AD.gameScene.gameOverFunc(!0)),e.timmerShengHuaLabel.string=Tools.getSecond2(e.secondShengHua)},1)},this),cc.director.on("死亡复活的X",function(t,n){e.timmerShengHua.getChildByName("icons").children[n].children[1].active=t},this)}},start:function(){this.initScoreListener(),"爆破模式"!=globalData.modeType&&"生化模式"!=globalData.modeType?(this.killNumSelfLabel.active=!0,this.killNumEnemyLabel.active=!0,this.timmerModeBaoPo_fangShou.parent.active=!1):(this.killNumSelfLabel.parent.active=!1,this.killNumEnemyLabel.parent.active=!1,this.timmerModeBaoPo_fangShou.parent.active=!0),this.tipsQiangQiMode.active="抢旗模式"==globalData.modeType},initScoreListener:function(){var e=this;this.killNumEnemyLabel.getComponent(cc.Label).string="0/"+this.maxScore,this.killNumSelfLabel.getComponent(cc.Label).string="0/"+this.maxScore,this.barSelf.fillRange=0,this.barEnemy.fillRange=0,cc.director.on("得分变化",function(t){e.checkWin(),t?(e.killNumEnemyLabel.getComponent(cc.Label).string=AD.killNumEnemy+"/"+e.maxScore,e.barEnemy.fillRange=AD.killNumEnemy/e.maxScore):(e.killNumSelfLabel.getComponent(cc.Label).string=AD.killNumSelf+"/"+e.maxScore,e.barSelf.fillRange=AD.killNumSelf/e.maxScore)},this),cc.director.on("旗子数量变化",function(t){e.checkWin(),t?(e.killNumEnemyLabel.getComponent(cc.Label).string=AD.flagNumEnemy+"/"+e.maxScore,e.barEnemy.fillRange=AD.flagNumEnemy/e.maxScore):(e.killNumSelfLabel.getComponent(cc.Label).string=AD.flagNumSelf+"/"+e.maxScore,e.barSelf.fillRange=AD.flagNumSelf/e.maxScore)},this)},checkWin:function(){this.checkWinByScore(this.maxScore)},checkWinByScore:function(e){if(!AD.gameScene.gameOver)switch(globalData.modeType){case "抢旗模式":AD.flagNumEnemy>=e&&AD.gameScene.gameOverFunc(!1),AD.flagNumSelf>=e&&AD.gameScene.gameOverFunc(!0);break;default:AD.killNumEnemy>=e&&AD.gameScene.gameOverFunc(!1),AD.killNumSelf>=e&&AD.gameScene.gameOverFunc(!0)}}}),cc._RF.pop()},{}],leftAndRight:[function(e,t,n){"use strict";cc._RF.push(t,"7a395QwJfhGPpSKNay1dIuH","leftAndRight"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){e.node.convertToNodeSpaceAR(t.getLocation()).x<0?cc.director.emit("玩家走",-1):cc.director.emit("玩家走",1)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.node.convertToNodeSpaceAR(t.getLocation()).x<0?cc.director.emit("玩家走",-1):cc.director.emit("玩家走",1)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.director.emit("玩家停")},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){cc.director.emit("玩家停")},this)},start:function(){}}),cc._RF.pop()},{}],loadBundle:[function(e,t,n){"use strict";cc._RF.push(t,"7a108IfandOmbaYO7epNoaD","loadBundle"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.scheduleOnce(function(){cc.assetManager.loadBundle("sub",function(e,t){console.log("资源bundle加载完毕 开始加载scene资源"),cc.director.loadScene("loadScene")})},3)},start:function(){}}),cc._RF.pop()},{}],loadScene:[function(e,t,n){"use strict";cc._RF.push(t,"5f469BILW9HkothesPyLRJo","loadScene"),cc.Class({extends:cc.Component,properties:{bar:cc.Sprite},onLoad:function(){globalData.getDataAll();var e=this;e.numNow=this.numSum=0,this.numSum++,cc.resources.load("PlayerGunData",function(t,n){AD.gunData=n.json,e.numNow++}),this.numSum++,cc.resources.load("GunPrice",function(t,n){AD.gunPriceData=n.json,e.numNow++}),this.numSum++,cc.resources.load("RankData",function(t,n){AD.chengHaoData=n.json,e.numNow++}),this.bar.fillRange=0,cc.tween(this.bar).to(3,{fillRange:1}).start()},start:function(){this.initCollision(),this.hadChangeScene=!1},initCollision:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3),cc.director.getCollisionManager().enabled=!0},update:function(e){this.bar.fillRange<1||0==this.hadChangeScene&&this.numNow>=this.numSum&&(this.hadChangeScene=!0,cc.director.loadScene("menuScene"))}}),cc._RF.pop()},{}],logoControl:[function(e,t,n){"use strict";cc._RF.push(t,"7b58b/RN6lBE5sxwJQXzFI4","logoControl"),cc.Class({extends:cc.Component,properties:{targetChanel:""},onLoad:function(){""!=this.targetChanel&&(AD.logoNameArr?AD.logoNameArr.push(this.node):(AD.logoNameArr=new Array,AD.logoNameArr.push(this.node)))},start:function(){if(""!=this.targetChanel)this.node.active=this.targetChanel==AD.chanelName1;else{for(var e=!0,t=0;t<AD.logoNameArr.length;t++)AD.logoNameArr[t].getComponent("logoControl").targetChanel==AD.chanelName1&&(e=!1);this.node.active=e}
"android"==AD.chanelName1&&(this.node.active=!1)}}),cc._RF.pop()},{}],mapMng:[function(e,t,n){"use strict";cc._RF.push(t,"9ddd3F/qj9Myq+6IMBHu2r9","mapMng"),cc.Class({extends:cc.Component,properties:{mapArr:[cc.Prefab],dianWangLi:cc.Prefab,dianWangWai:cc.Prefab},onLoad:function(){var e=this;AD.mapMng=this;var t=0;switch(globalData.modeType){case "个人竞技":t=Tools.random(0,4);break;case "爆破模式":3==(t=Tools.random(0,3))&&(t=4);break;case "月球模式":t=5;break;case "生化模式":t=6;break;default:t=Tools.random(0,4)}
var n=cc.instantiate(this.mapArr[t]);n.parent=this.node,this.mapNow=n,this.mapBg=n.children[0],this.revivePosArrDefaultArr=new Array;var i=cc.find("revivePosDefault",n);i.opacity=0,i&&i.childrenCount>0&&i.children.forEach(function(t){e.revivePosArrDefaultArr.push(t.position)}),this.revivePosArrSelfArr=new Array;var o=cc.find("revivePosSelf",n);o.opacity=0,o&&o.childrenCount>0&&o.children.forEach(function(t){e.revivePosArrSelfArr.push(t.position)}),this.revivePosEnemyArr=new Array;var a=cc.find("revivePosEnemy",n);a.opacity=0,a&&a.childrenCount>0&&a.children.forEach(function(t){e.revivePosEnemyArr.push(t.position)}),this.airWallLeft=cc.find("airWallLeft",n),this.airWallLeft.opacity=0,this.airWallRight=cc.find("airWallRight",n),this.airWallRight.opacity=0,this.propPosNodeArr=new Array;var c=cc.find("propPos",n);if(c.opacity=0,c&&c.childrenCount>0&&c.children.forEach(function(t){e.propPosNodeArr.push(t.position)}),this.flagPosSelf=cc.find("flagPos/flagPosSelf",n),this.flagPosSelf.active="抢旗模式"==globalData.modeType,this.flagPosEnemy=cc.find("flagPos/flagPosEnemy",n),this.flagPosEnemy.active="抢旗模式"==globalData.modeType,this.targetPosSelfFlag=cc.find("flagPos/targetPosSelfFlag",n),this.targetPosSelfFlag.active="抢旗模式"==globalData.modeType,this.targetPosEnemyFlag=cc.find("flagPos/targetPosEnemyFlag",n),this.targetPosEnemyFlag.active="抢旗模式"==globalData.modeType,cc.find("bombPos",n).active="爆破模式"==globalData.modeType,"爆破模式"==globalData.modeType)this.anBaoTipsMap=cc.find("bombPos/anZhuangTips",n),cc.tween(cc.find("yxn_tips_anZhuangZhaDan_2",this.anBaoTipsMap)).repeatForever(cc.tween().by(.4,{y:-10}).by(.4,{y:10})).start();else if("抢旗模式"==globalData.modeType){var s=cc.find("flagPos/targetPosSelfFlag/anZhuangTips/yxn_tips_anZhuangZhaDan_2",n);cc.tween(s).repeatForever(cc.tween().by(.4,{y:-10}).by(.4,{y:10})).start()}
cc.find("jumpSwitchs",n).opacity=0,4==t&&(this.dianWangPreat=cc.find("dianWangParent",n),this.schedule(function(){e.createDianWang()},4))},start:function(){},createDianWang:function(){if(AD.gameScene.beginNow&&!(AD.gameScene.gameOver||AD.treeMoveMng.speed<1e3)){var e=cc.instantiate(this.dianWangLi);e.parent=this.dianWangPreat,e.x=this.airWallRight.x+100;var t=cc.instantiate(this.dianWangWai);t.parent=AD.mapMng.mapNow,t.x=this.airWallRight.x+100}}}),cc._RF.pop()},{}],matchScene:[function(e,t,n){"use strict";cc._RF.push(t,"66112Fkgx9DZaKxWLymuEnq","matchScene"),cc.Class({extends:cc.Component,properties:{geRenPanel:cc.Node,tuanDuiPanel:cc.Node,btnBegin:cc.Node},onLoad:function(){var e=this;AD.globalNode.getRoleIconRandom(),AD.globalNode.getNameRandom(),this.btnBegin.active=!1;var t=!0;t="个人竞技"==globalData.modeType||"生化模式"==globalData.modeType,this.geRenPanel.active=t,this.tuanDuiPanel.active=!t,this.matchComplete=!1,cc.director.on("匹配完成",function(){0==e.matchComplete&&(e.matchComplete=!0,e.scheduleOnce(function(){cc.director.emit("过场动画","gameScene")},1))},this)},start:function(){},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "开始游戏":cc.director.emit("过场动画","gameScene")}}}),cc._RF.pop()},{}],menuJingJi:[function(e,t,n){"use strict";cc._RF.push(t,"aab29qVEVNGTJVWWdJdPzh8","menuJingJi"),cc.Class({extends:cc.Component,properties:{btnsParent:cc.Node},onLoad:function(){this.btnsArr=this.btnsParent.children,this.yuanPosArr=new Array;for(var e=0;e<3;e++)this.yuanPosArr.push(this.btnsArr[e].position);AD.audioMng.playMusic()},start:function(){for(var e=0;e<3;e++)this.moveIn(this.btnsArr[e],.2+.2*e,e);AD.showBanner(),AD.chaPing()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "个人竞技":case "团队竞技":case "爆破模式":globalData.modeType=t,this.showDialog()}},showDialog:function(){(globalData.btnClickTimes++,globalData.btnClickTimes%2==0)?(globalData.tuiJianTimes++,globalData.tuiJianTimes%2==0?cc.director.emit("普通角色"):globalData.getGunLevel(globalData.gunType)>=5?cc.director.emit("普通角色"):cc.director.emit("显示枪支一键满级弹窗")):cc.director.loadScene("matchScene")},moveIn:function(e,t,n){e.x=1e3,cc.tween(e).delay(t).to(.35-.1*n,{position:cc.v2(this.yuanPosArr[n].x-50,this.yuanPosArr[n].y)},{easing:"sineInOut"}).to(.2,{position:this.yuanPosArr[n]},{easing:"sineInOut"}).start()}}),cc._RF.pop()},{}],menuScene:[function(e,t,n){"use strict";cc._RF.push(t,"270a4RQtxxK/K5xKAEMjOC/","menuScene"),cc.Class({extends:cc.Component,properties:{caiDan_role13:cc.Node,btnMoreGame:cc.Node,btnChouJiang:cc.Node,btnEffectArr:[cc.Node]},onLoad:function(){var e=this;globalData.data.signFirstToGame?(globalData.data.signFirstToGame=!1,globalData.saveData()):globalData.signAutoShow&&(globalData.signAutoShow=!1,globalData.data.signHadShowTodayDate=Tools.getDateDayString(),globalData.saveData(),globalData.getSignData()&&cc.director.emit("展示签到弹窗")),AD.audioMng.playMusic();for(var t=Tools.random(0,3),n=0;n<4;n++)this.btnEffectArr[n].children[0].active=n==t,this.btnEffectArr[n].children[1].active=n==t;this.caiDan_role13.active=0==globalData.getRoleUnlockState(13),cc.director.on("解锁彩蛋角色",function(t){13==t&&(e.caiDan_role13.active=!1)},this),this.caiDan_role13.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit("彩蛋角色",13)},this)},start:function(){"4399"==AD.chanelName&&AD_4399.uploading4399Rank(),AD.hideBanner();console.log(Math.max.apply(Math,[111,12,111,34,2,5,76])),console.log(Math.round(1.999)),console.log(Math.round(1.5)),cc.find("Canvas/dialogMng").on(cc.Node.EventType.MOUSE_ENTER,function(e){AD.mouseClick=!0},this)},tt:function(e){var t=e||32;console.log(t)},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "竞技模式":cc.director.loadScene("menuJingJi");break;case "娱乐模式":break;case "武器库":AD.showWeaponFirst=!0,cc.director.loadScene("shopScene");break;case "强化":cc.director.loadScene("upgradeScene"),AD.showUpgradeBtnsAct=!0;break;case "签到":cc.director.emit("展示签到弹窗");break;case "抽奖":cc.director.emit("展示抽奖弹窗");break;case "活动":cc.director.emit("展示活动弹窗");break;case "角色":AD.showWeaponFirst=!1,cc.director.loadScene("shopScene");break;case "金币宝箱":cc.director.emit("显示货币弹窗",!0);break;case "钻石宝箱":cc.director.emit("显示货币弹窗",!1);break;case "军衔":cc.director.loadScene("junXianScene");break;case "黄金武器":cc.director.emit("显示枪支一键满级弹窗");break;case "限量角色":cc.director.emit("显示限量角色弹窗");break;case "更多精彩":"4399"==AD.chanelName1?AD_4399.moreGame4399():"android"==AD.chanelName1&&AD_android.moreGame();break;case "排行榜":"4399"==AD.chanelName1&&AD_4399.show4399Rank()}}}),cc._RF.pop()},{}],menuYuLeBtnAct:[function(e,t,n){"use strict";cc._RF.push(t,"09e61eLsVBMYakb4657mntS","menuYuLeBtnAct"),cc.Class({extends:cc.Component,properties:{delay:.5},onLoad:function(){this.delayTime=.1*AD.menuYuLe.btnActArr[AD.menuYuLe.btnActIndex],AD.menuYuLe.btnActIndex++},start:function(){this.node.scale=0,cc.tween(this.node).delay(this.delayTime).to(.3,{scale:1},{easing:"backInOut"}).to(.01,{scale:1}).to(.01,{scale:1}).to(.01,{scale:1}).to(.01,{scale:1}).to(.01,{scale:1}).start()}}),cc._RF.pop()},{}],menuYuLe:[function(e,t,n){"use strict";cc._RF.push(t,"069f9FgS4dGCp+y+eqGDOJc","menuYuLe"),cc.Class({extends:cc.Component,properties:{tipsNode:cc.Node,tipsLabel:cc.Label,btnTips0:cc.Node,btnTips1:cc.Node,btnTips2:cc.Node,btnTips3:cc.Node},onLoad:function(){AD.audioMng.playMusic(),AD.menuYuLe=this;this.btnActArr=Tools.getNewArr([0,1,2,3],4),this.btnActIndex=0},start:function(){this.tipsNode.scale=0,this.tipsArr=["Gravity will be greatly reduced, as if you are in space.","Snatch opponent's flag and place it on your own base to win.","All players can only attack with grenades.","Stay alive until the last second to win."],this.initTips(),AD.hideBanner(),AD.chaPing()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "抢旗模式":case "月球模式":case "手雷模式":case "生化模式":globalData.modeType=t,this.showDialog()}},showDialog:function(){(globalData.btnClickTimes++,globalData.btnClickTimes%2==0)?(globalData.tuiJianTimes++,globalData.tuiJianTimes%2==0?cc.director.emit("普通角色"):globalData.getGunLevel(globalData.gunType)>=5?cc.director.emit("普通角色"):cc.director.emit("显示枪支一键满级弹窗")):cc.director.loadScene("matchScene")},initTips:function(){var e=this;this.btnTips0.on(cc.Node.EventType.TOUCH_START,function(){e.showTips(0,e.btnTips0)},this),this.btnTips1.on(cc.Node.EventType.TOUCH_START,function(){e.showTips(1,e.btnTips1)},this),this.btnTips2.on(cc.Node.EventType.TOUCH_START,function(){e.showTips(2,e.btnTips2)},this),this.btnTips3.on(cc.Node.EventType.TOUCH_START,function(){e.showTips(3,e.btnTips3)},this)},showTips:function(e,t){this.tipsLabel.string=this.tipsArr[e],Tools.resetDialog(this.tipsNode,!0),this.tipsNode.scale=1},hideTips:function(){Tools.resetDialog(this.tipsNode,!1)}}),cc._RF.pop()},{}],npc:[function(e,t,n){"use strict";cc._RF.push(t,"482e6gvhjdH5oJZ8k8tSHGU","npc"),cc.Class({extends:cc.Component,properties:{animNode:cc.Node,isBig:!1,hpBarDi:cc.Node,hpBar:cc.Node},onLoad:function(){this.frame=0,this.anim=this.animNode.getComponent(sp.Skeleton);var e=this;this.anim.setCompleteListener(function(t,n){"gongji"==t.animation.name&&e.playAct("待机")}),this.playAct("待机"),this.yuanScale=this.animNode.scaleX},reset:function(){var e=this;this.isBig?(this.hp=this.hpZong=500+75*AD.playerMng.junXianLevel,this.hurtNum=60,this.moveSpeed=150,this.attackDistance=150,this.attackDuration=2+.01*Tools.random(1,80)):(this.hp=this.hpZong=250+50*AD.playerMng.junXianLevel,this.hurtNum=30,this.moveSpeed=250,this.attackDistance=100,this.attackDuration=1.5+.01*Tools.random(1,80)),AD.playerMng.npcArr.push(this.node),this.attackDurationTimmer=1,this.direction=1,this.targetRole=null,this.isDie=!1,this.hpBar.getComponent(cc.Sprite).fillRange=this.hp/this.hpZong,this.over=!1,this.couldUpdate=!1,this.targetY=this.animNode.y,this.animNode.y=this.targetY-this.animNode.height/2-50,this.hpBar.active=this.hpBarDi.active=!1,cc.tween(this.animNode).delay(.3).to(.3,{y:this.targetY}).call(function(){e.couldUpdate=!0,e.hpBar.active=e.hpBarDi.active=!0}).start()},update:function(e){var t=this;AD.gameScene.gameOver?0==this.over&&(cc.tween(this.node).delay(.01*Tools.random(0,100)).call(function(){t.node.scale=0}).start(),this.over=!0):this.hp<=0||this.couldUpdate&&this.move(e)},move:function(e){this.frame++,this.attackDurationTimmer+=e,this.targetRole=null;for(var t=1e4,n=0;n<AD.playerMng.selfArr.length;n++){var i=AD.playerMng.selfArr[n];Math.abs(i.x-this.node.x)<t&&(t=Math.abs(i.x-this.node.x),this.targetRole=i)}
this.targetRole&&(Tools.getDistance(this.targetRole.position,this.node.position)>this.attackDistance&&this.attackDurationTimmer>this.attackDuration?(this.node.x<this.targetRole.x?this.direction=1:this.direction=-1,this.node.x+=this.moveSpeed*e*this.direction,this.playAct("移动")):this.attackDurationTimmer>this.attackDuration&&Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&(this.attackDurationTimmer=0,this.playAct("攻击")),this.animNode.scaleX=this.direction*this.yuanScale)},jumpFunc:function(){this.targetRole&&(Tools.getDistance(this.targetRole.position,this.node.position)<this.attackDistance||this.attackDurationTimmer<this.attackDuration||AD.gameScene.gameOver||this.hp<=0||Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(0,8500),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0))},beHit:function(e,t,n,i){this.hp<=0||(AD.playerMng.createHurtTips(this.node.position,e,i),this.hp-=e,this.hpBar.getComponent(cc.Sprite).fillRange=this.hp/this.hpZong,this.beHitRight=t,this.hp<=0&&n&&(n.getComponent("player").killNum++,0==n.getComponent("player").isAI&&globalData.setHuoDongData("末日使者"),this.die()))},die:function(){var e=this;if(!this.isDie){this.playAct("死亡"),Math.abs(this.node.x-AD.gameScene.camera.x)<cc.winSize.width/2+100&&AD.audioMng.playSfx("僵尸"),this.isDie=!0,Tools.removeElementFromArr2(AD.playerMng.npcArr,this.node);var t=1;this.isBig&&(t=.5),this.node.getComponent(cc.RigidBody).fixedRotation=!1,0==this.beHitRight?(this.node.getComponent(cc.RigidBody).angularVelocity=500*t,this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(5e3*t,0),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)):1==this.beHitRight&&(this.node.getComponent(cc.RigidBody).angularVelocity=-500*t,this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(-5e3*t,0),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)),this.scheduleOnce(function(){e.node.destroy()},2),this.hpBar.active=!1,this.hpBarDi.active=!1}},onCollisionStay:function(e,t){switch(e.tag){case 100:break;case 101:this.jumpDelayAI=.01*Tools.random(20,80),this.jumpFunc();break;case 66:t.tag}},playAct:function(e){var t=this;switch(e){case "待机":"daiji"!=this.anim.animation&&this.anim.setAnimation(0,"daiji",!0);break;case "攻击":"gongji"!=this.anim.animation&&(this.anim.setAnimation(0,"gongji",!1),this.scheduleOnce(function(){for(var e=0;e<AD.playerMng.selfArr.length;e++){var n=AD.playerMng.selfArr[e];Tools.getDistance(n.position,t.node.position)<t.attackDistance&&((n.x-t.node.x>0&&t.animNode.scaleX>0||n.x-t.node.x<0&&t.animNode.scaleX<0)&&n.getComponent("player").beHit(t.hurtNum,t.node.x>n.x,null,!1))}},.3));break;case "受击":"shouji"!=this.anim.animation&&this.anim.setAnimation(0,"shouji",!1);break;case "死亡":"siwang"!=this.anim.animation&&this.anim.setAnimation(0,"siwang",!1);break;case "移动":"yidong"!=this.anim.animation&&this.anim.setAnimation(0,"yidong",!0);break;case "跳跃":"tiao"!=this.anim.animation&&this.anim.setAnimation(0,"tiao",!1)}}}),cc._RF.pop()},{}],numClickListener:[function(e,t,n){"use strict";cc._RF.push(t,"ee4d3qilXVHAbCeF9zKDxB8","numClickListener"),cc.Class({extends:cc.Component,properties:{numNow:1},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){cc.director.emit("输入数字",e.numNow)},this)},start:function(){}}),cc._RF.pop()},{}],oppo_ChaPingVide:[function(e,t,n){"use strict";cc._RF.push(t,"9217fFTEX1ODpO9eIpCbeuH","oppo_ChaPingVide"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentNode=null,t.title=null,t.desc=null,t.icon=null,t.img=null,t}
return __extends(t,e),t.prototype.onLoad=function(){var e=this;"oppo"!=window.AD.chanelName1&&this.node.destroy(),cc.director.on("关闭插屏",function(t){e.node.uuid!=t&&e.node.destroy()},this),this.title.node.active=!0,this.desc.node.active=!0,this.title.node.scale=this.desc.node.scale=0},t.prototype.start=function(){},t.prototype.onEnable=function(){var e=this;null!=window.AD_oppo.result?(this.currentNode.active=!0,cc.director.on("oppo_ChaPingShuaXin",this.dataUpdate,this),this.img.on(cc.Node.EventType.TOUCH_START,function(){window.AD.chanelName==window.AD.chanelName1&&(e.reportAdClick(),e.node.active=!1)},this),this.init()):this.currentNode.active=!1},t.prototype.onDisable=function(){var e=this;cc.director.off("oppo_ChaPingShuaXin",this.dataUpdate,this),cc.director.off("关闭插屏",function(t){e.node.uuid!=t&&e.node.destroy()},this)},t.prototype.onDestroy=function(){},t.prototype.init=function(){console.log("展示数据1"),this.dataUpdate()},t.prototype.pageClose=function(){this.node.active=!1},t.prototype.dataUpdate=function(){var e=window.AD_oppo.result;if(null!=e&&1==window.AD_oppo.chaPingBoo){this.currentNode.active=!0,console.log("展示数据2"),this.reportAdShow(),this.title.string=e.title,this.desc.string=e.desc,console.log("展示数据3"),console.log("展示数据3-1");var t=e.icon,n=e.imgUrlList[0];console.log("展示数据3-2");var i=this.icon.getComponent(cc.Sprite),o=this.img.getComponent(cc.Sprite);console.log("展示数据4"),""!=t?(this.icon.active=!0,cc.loader.load(t,function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);i.spriteFrame=n}})):this.icon.active=!1,console.log("展示数据5");var a=n.indexOf(".png")>=0,c=n.indexOf(".jpg")>=0;if(a||c){var s=n.split("?");cc.assetManager.loadRemote(s[0],function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);o.spriteFrame=n}})}else cc.assetManager.loadRemote(n,{ext:".png"},function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);o.spriteFrame=n}})}else this.currentNode.active=!1},t.prototype.reportAdClick=function(){var e=window.AD_oppo.result,t=window.AD_oppo.nativeAd;null!=e&&(t.reportAdClick({adId:e.adId.toString()}),window.AD_oppo.loadData())},t.prototype.reportAdShow=function(){if(1!=window.AD_oppo.reportingBoo){var e=window.AD_oppo.result,t=window.AD_oppo.nativeAd;null!=e&&(t.reportAdShow({adId:e.adId.toString()}),window.AD_oppo.reportingBoo=!0)}},t.prototype.touchHanler=function(e,t){switch(t){case "点击":if(window.AD.chanelName!=window.AD.chanelName1)return;this.reportAdClick(),this.node.active=!1;break;case "关闭":console.log("关闭插屏"),window.AD.couldZDJ()&&this.reportAdClick(),this.node.active=!1}},__decorate([a({type:cc.Node,displayName:"当前界面节点"})],t.prototype,"currentNode",void 0),__decorate([a({type:cc.Label,displayName:"title"})],t.prototype,"title",void 0),__decorate([a({type:cc.Label,displayName:"desc"})],t.prototype,"desc",void 0),__decorate([a({type:cc.Node,displayName:"icon"})],t.prototype,"icon",void 0),__decorate([a({type:cc.Node,displayName:"img"})],t.prototype,"img",void 0),t=__decorate([o],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],paoMaDengMng:[function(e,t,n){"use strict";cc._RF.push(t,"09faaWPGUdGObAYxprAFRP7","paoMaDengMng"),cc.Class({extends:cc.Component,properties:{content:cc.Node,nameLabel:cc.Label,junXianLabel:cc.Label},onLoad:function(){},start:function(){var e=this;this.content.x=-570,this.node.scaleY=0,this.scheduleOnce(function(){cc.tween(e.node).to(.2,{scaleY:1}).delay(.5).call(function(){cc.tween(e.content).to(1.5,{x:0}).start()}).delay(3).call(function(){cc.tween(e.content).to(1.5,{x:570}).start()}).delay(2).to(.2,{scaleY:0}).call(function(){e.node.destroy()}).start()},1)}}),cc._RF.pop()},{}],playerBtMng:[function(e,t,n){"use strict";cc._RF.push(t,"8888cv/FkhHv4kmbH+wbjK/","playerBtMng"),cc.Class({extends:cc.Component,properties:{playerBt:cc.Prefab,playerBtEnemy:cc.Prefab,playerBtDefalult:cc.Prefab,shouLeiPrefab:cc.Prefab,btTailSelf:cc.SpriteFrame,btTailEnemy:cc.SpriteFrame,effectShouLeiBomb:cc.Prefab},onLoad:function(){AD.playerBtMng=this,this.playerBtPool=new cc.NodePool,this.playerBtEnemyPool=new cc.NodePool,this.playerBtDefaultPool=new cc.NodePool},start:function(){},createBt:function(e,t,n,i,o){var a=null;switch(globalData.modeType){case "个人竞技":a=this.playerBtDefaultPool.size()>0?this.playerBtDefaultPool.get():cc.instantiate(this.playerBtDefalult);break;default:a=o?this.playerBtEnemyPool.size()>0?this.playerBtEnemyPool.get():cc.instantiate(this.playerBtEnemy):this.playerBtPool.size()>0?this.playerBtPool.get():cc.instantiate(this.playerBt)}(arguments.length<=5?void 0:arguments[5])?a.getComponent("playerBt").reset(e,t,i,n,o,arguments.length<=5?void 0:arguments[5]):a.getComponent("playerBt").reset(e,t,i,n,o),a.position=n,a.parent=this.node},createShouLei:function(e,t,n){var i=cc.instantiate(this.shouLeiPrefab);i.parent=this.node,i.position=t,i.getComponent("shouLei").reset(e,n)},createEffectShouLei:function(e){if(!(Math.abs(e.x-AD.gameScene.camera.x)>cc.winSize.width/2+100)){AD.audioMng.playSfx("手雷爆炸");var t=cc.instantiate(this.effectShouLeiBomb);t.parent=this.node,t.position=e,this.scheduleOnce(function(){t.destroy()},1)}}}),cc._RF.pop()},{}],playerBt:[function(e,t,n){"use strict";cc._RF.push(t,"e6e28PnDiZMRolOTJLoxOzq","playerBt"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.frames=0},start:function(){},reset:function(e,t,n,i,o){this.tail=cc.find("tail",this.node),this.paoDan=cc.find("paoDan",this.node),this.tailH=this.tail.height,this.tail.scaleY=0,this.hurtDistance=0,(arguments.length<=5?void 0:arguments[5])?(this.hurtDistance=arguments.length<=5?void 0:arguments[5],this.node.getComponent(cc.ParticleSystem).enabled=!0,this.paoDan.active=!0,this.tail.active=!1):(this.node.getComponent(cc.ParticleSystem).enabled=!1,this.paoDan.active=!1,this.tail.active=!0),this.playerNode=e,this.playerJS=this.playerNode.getComponent("player");var a=AD.gunData[t];this.playerJS.isAI?this.shootDistance=a.Gun_Range:this.shootDistance=globalData.getGunCfg(t,"攻击范围"),this.type=t;var c=a.Gun_Hit+globalData.getQiangHua("暴击率");this.baoJi=Tools.random(1,100)<c;var s=1;this.baoJi&&(s=2);var r=1;if(0==e.getComponent("player").isAI?(r=1+.01*globalData.getQiangHua("伤害"),"个人竞技"==globalData.modeType&&(this.tail.getComponent(cc.Sprite).spriteFrame=AD.playerBtMng.btTailSelf)):"个人竞技"==globalData.modeType&&(this.tail.getComponent(cc.Sprite).spriteFrame=AD.playerBtMng.btTailEnemy),this.playerJS.isAI)var l=a.Gun_Hurt;else l=globalData.getGunCfg(t,"伤害");this.hurt=l*s*r,e.getComponent("player").prop_hurtDuration>0&&(this.hurt=2*this.hurt);var h=a.Gun_Bulletrate;if(this.playerJS.isAI)var d=Tools.random(-a.Gun_Accurate,a.Gun_Accurate);else d=Tools.random(-globalData.getGunCfg(t,"精准"),globalData.getGunCfg(t,"精准"));n+=d,(arguments.length<=5?void 0:arguments[5])&&(this.hurt=150),this.dieNow=!1,this.isEnemy=o,this.node.angle=n,this.vx=-Math.sin(Tools.angleToRadian(n))*h,this.vy=Math.cos(Tools.angleToRadian(n))*h,this.yuanPos=i},update:function(e){this.dieNow||(this.node.x+=this.vx,this.node.y+=this.vy,this.frames++,this.moveDistance=Tools.getDistance(this.node.position,this.yuanPos),this.tail.scaleY<1&&(this.tail.scaleY=this.moveDistance/this.tailH),this.checkOutScreen())},checkOutScreen:function(){this.node.y>560?this.dieFunc(1):this.moveDistance>=this.shootDistance&&this.dieFunc(1)},dieFunc:function(e){var t=this;if(!this.dieNow)if(this.dieNow=!0,cc.tween(this.tail).to(.1,{scaleY:0}).call(function(){switch(globalData.modeType){case "个人竞技":AD.playerBtMng.playerBtDefaultPool.put(t.node);break;default:t.isEnemy?AD.playerBtMng.playerBtEnemyPool.put(t.node):AD.playerBtMng.playerBtPool.put(t.node)}}).start(),this.hurtDistance>0)this.bomb(),AD.playerBtMng.createEffectShouLei(this.node.position);else switch(e){case 0:AD.playerMng.createEffectHit(this.node.position);break;case 1:break;case 2:AD.playerMng.createEffectHit(this.node.position)}},onBeginContact:function(e,t,n){if(!this.dieNow)switch(n.tag){case 66:n.node!=this.playerNode&&(this.dieFunc(0),this.hurtDistance<=0&&n.node.getComponent("player").beHit(this.hurt,this.node.x>n.node.x,this.playerNode,this.baoJi));break;case 88:this.dieFunc(2);break;case 888:n.node.getComponent("npc").couldUpdate&&(this.dieFunc(0),n.node.getComponent("npc").beHit(this.hurt,this.node.x>n.node.x,this.playerNode,this.baoJi))}},bomb:function(){Tools.shakeScreen(1);var e=null;switch(globalData.modeType){case "个人竞技":e=AD.playerMng.selfArr;break;default:e=this.isEnemy?AD.playerMng.selfArr:AD.playerMng.enemyArr}
if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n!=this.playerNode){var i=Tools.getDistance(this.node.position,n.position);i<this.hurtDistance/2?(n.getComponent("player").beHit(this.hurt,this.node.x>n.x,this.playerNode,!1),this.pushRole(n,1)):i<this.hurtDistance&&(n.getComponent("player").beHit(this.hurt/2,this.node.x>n.x,this.playerNode,!1),this.pushRole(n,.5))}}},pushRole:function(e,t){var n=Tools.getAngle(e.position,this.node.position),i=-Math.sin(Tools.angleToRadian(n)),o=Math.cos(Tools.angleToRadian(n));e.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(1e4*i*t,1e4*o*t),e.getComponent(cc.RigidBody).getWorldCenter(),!0)}}),cc._RF.pop()},{}],playerLine:[function(e,t,n){"use strict";cc._RF.push(t,"91789f5S3xJ37IjHgTZOuxq","playerLine"),cc.Class({extends:cc.Component,properties:{playerNode:cc.Node},onLoad:function(){this.player=this.playerNode.getComponent("player")},start:function(){this.wallArr=new Array,this.isEnemy=this.player.isEnemy,this.yuanScaleY=this.player.shootDistance/this.node.height},onCollisionEnter:function(e,t){switch(e.tag){case 88:this.wallArr.push(e.node)}},onCollisionStay:function(e,t){switch(globalData.modeType){case "个人竞技":switch(e.tag){case 66:e.node!=this.playerNode&&(this.player.noWall=!0)}
break;case "生化模式":switch(e.tag){case 888:this.player.noWall=!0}
break;default:switch(e.tag){case 66:e.node.getComponent("player").isEnemy!=this.isEnemy&&(this.player.noWall=!0)}}},onCollisionExit:function(e,t){switch(e.tag){case 88:Tools.removeElementFromArr2(this.wallArr,e.node);break;case 66:this.player.noWall=!1}},update:function(e){0==this.player.beiDianing&&this.changeScale()},changeScale:function(){this.node.scaleY=4;for(var e=0;e<this.wallArr.length;e++){var t=this.wallArr[e],n=this.getPos(this.node),i=this.getPos(t);if(t&&n&&i){var o=Math.abs(1/Math.cos(Tools.angleToRadian(this.node.parent.angle))*Math.abs(n.y-i.y)/1e3),a=Math.abs(1/Math.sin(Tools.angleToRadian(this.node.parent.angle))*Math.abs(n.x-i.x)/1e3);this.node.scaleY=o>a?a:o}}},getPos:function(e){return e&&e.parent?e.parent.convertToWorldSpaceAR(e.position):null}}),cc._RF.pop()},{}],playerMng:[function(e,t,n){"use strict";cc._RF.push(t,"74ea3Sk2hhJboWRHxkRQpfX","playerMng"),cc.Class({extends:cc.Component,properties:{npcSmallPrefab:cc.Prefab,npcBigPrefab:cc.Prefab,rolePrefab:cc.Prefab,roleEnemyPrefab:cc.Prefab,bulletShellPrefab:cc.Prefab,hurtNumTipsPrefab:cc.Prefab,c4BombPrefab:cc.Prefab,c4OnRolePrefab:cc.Prefab,flagSelfPrefab:cc.Prefab,flagEnemyPrefab:cc.Prefab,effectHitPrefab:cc.Prefab,armOutArr:[cc.SpriteFrame],armInArr:[cc.SpriteFrame],headArr:[cc.SpriteFrame],bodyArr:[cc.SpriteFrame],eyeArr:[cc.SpriteFrame]},onLoad:function(){AD.playerMng=this,this.selfArr=new Array,this.selfArrForever=new Array,this.enemyArr=new Array,this.enemyArrForever=new Array,this.bulletShellPool=new cc.NodePool,this.hurtNumTipsPool=new cc.NodePool,this.effectHitPool=new cc.NodePool,this.npcArr=new Array},start:function(){var e=this;"爆破模式"==globalData.modeType?(this.targetC4Bomb=null,this.baoPoModeTimmer=60,this.chaiBaoTimer=30,this.chaiBaoRoleIsEnemy=!1,this.anBaoIsComplete=!1,AD.labelMng.timmerModeBaoPo_fangShou.active=!0,AD.labelMng.timmerModeBaoPo_fangShou.getChildByName("tips").getChildByName("anBao").active=AD.playerNowJS.isAnBaoFang,AD.labelMng.timmerModeBaoPo_fangShou.getChildByName("tips").getChildByName("chaiBao").active=!AD.playerNowJS.isAnBaoFang,AD.labelMng.timmerModeBaoPo_jingGong.getChildByName("tips").getChildByName("anBao").active=AD.playerNowJS.isAnBaoFang,AD.labelMng.timmerModeBaoPo_jingGong.getChildByName("tips").getChildByName("chaiBao").active=!AD.playerNowJS.isAnBaoFang,AD.labelMng.timmerModeBaoPo_jingGong.active=!1,this.timerSecond_fangShou=AD.labelMng.timmerModeBaoPo_fangShou.getChildByName("label").getComponent(cc.Label),this.timerSecond_jinGong=AD.labelMng.timmerModeBaoPo_jingGong.getChildByName("label").getComponent(cc.Label),this.timerSecond_fangShou.string=Tools.getSecond(this.baoPoModeTimmer),this.timerSecond_jinGong.string=Tools.getSecond(this.chaiBaoTimer),cc.director.on("安包完成",function(){e.anBaoIsComplete=!0,AD.mapMng.anBaoTipsMap.active=!1,AD.labelMng.timmerModeBaoPo_fangShou.active=!1,AD.labelMng.timmerModeBaoPo_jingGong.active=!0,AD.gameScene.createTips("炸弹已安放"),e.schedule(function(){0==AD.gameScene.gameOver&&AD.audioMng.playSfx("c4已安放")},1.5)},this),this.schedule(function(){e.anBaoIsComplete?e.anBaoIsComplete&&(e.timerSecond_jinGong.string=Tools.getSecond(e.chaiBaoTimer),e.chaiBaoTimer<=0&&0==AD.gameScene.gameOver&&e.c4Bomb?(AD.playerBtMng.createEffectShouLei(e.c4Bomb.position),Math.abs(e.c4Bomb.position.x-AD.gameScene.camera.x)>cc.winSize.width/2+100&&AD.audioMng.playSfx("手雷爆炸"),e.c4Bomb.active=!1,cc.tween(e.node.parent.getChildByName("baiSe")).to(1,{opacity:255}).call(function(){AD.gameScene.gameOverFunc(!AD.gameScene.jinGongFangIsEnemy)}).to(1,{opacity:0}).start()):e.chaiBaoTimer-=1):(e.timerSecond_fangShou.string=Tools.getSecond(e.baoPoModeTimmer),e.baoPoModeTimmer<=0?AD.gameScene.gameOverFunc(AD.gameScene.jinGongFangIsEnemy):e.baoPoModeTimmer-=1)},1)):"抢旗模式"==globalData.modeType?(this.flagEnemy=null,this.flagSelf=null,this.scheduleOnce(function(){e.createFlagInit(!0),e.createFlagInit(!1)},.01)):"生化模式"==globalData.modeType&&(this.junXianLevel=globalData.getChengHaoLevel(),this.npcMaxNum=20,cc.director.on("游戏开始",function(){e.createNpcFunc()},this))},createNpcFunc:function(){var e=this;this.createNpcSecond=0,this.schedule(function(){e.createNpcSecond++,90==e.createNpcSecond&&AD.gameScene.createTips("僵尸来袭"),e.createNpcSecond<90?(e.createNpcSecond%2==0&&e.createNpc(!1),e.createNpcSecond%5==0&&e.createNpc(!0)):(e.createNpc(!0),e.createNpcSecond%3==0&&e.createNpc(!0))},1)},createNpc:function(e){if(!(this.node.childrenCount>3+this.npcMaxNum)){if(e)var t=cc.instantiate(this.npcBigPrefab);else t=cc.instantiate(this.npcSmallPrefab);t.parent=this.node,t.position=this.getRevivePos(!1),t.getComponent("npc").reset()}},createRole:function(e,t,n,i){var o=null;(o=n?cc.instantiate(this.roleEnemyPrefab):cc.instantiate(this.rolePrefab)).parent=AD.mapMng.mapNow,o.position=this.getRevivePos(n),o.getComponent("player").reset(e,t,n,i)},getRevivePos:function(e){var t=null;switch(globalData.modeType){case "个人竞技":case "生化模式":t=AD.mapMng.revivePosArrDefaultArr[Tools.random(0,AD.mapMng.revivePosArrDefaultArr.length-1)];break;default:t=1==AD.randomFang?e?AD.mapMng.revivePosEnemyArr[Tools.random(0,AD.mapMng.revivePosEnemyArr.length-1)]:AD.mapMng.revivePosArrSelfArr[Tools.random(0,AD.mapMng.revivePosArrSelfArr.length-1)]:e?AD.mapMng.revivePosArrSelfArr[Tools.random(0,AD.mapMng.revivePosArrSelfArr.length-1)]:AD.mapMng.revivePosEnemyArr[Tools.random(0,AD.mapMng.revivePosEnemyArr.length-1)]}
return null==t?(console.error("角色生成位置获取失败  getRevivePos"),cc.v2(0,0)):cc.v2(t.x+Tools.random(-20,20),t.y)},createBulletShell:function(e){if(!(Math.abs(e.x-AD.gameScene.camera.x)>cc.winSize.width/2+100)){var t=null;(t=this.bulletShellPool.size()>0?this.bulletShellPool.get():cc.instantiate(this.bulletShellPrefab)).parent=this.node,t.position=e,t.getComponent("bulletShell").reset()}},createHurtTips:function(e,t,n){if(!(Math.abs(e.x-AD.gameScene.camera.x)>cc.winSize.width/2+100)){var i=null;(i=this.hurtNumTipsPool.size()>0?this.hurtNumTipsPool.get():cc.instantiate(this.hurtNumTipsPrefab)).parent=this.node,i.position=e,i.getComponent("hurtNumTips").reset(t,n)}},createEffectHit:function(e){if(!(Math.abs(e.x-AD.gameScene.camera.x)>cc.winSize.width/2+100)){var t=null;(t=this.effectHitPool.size()>0?this.effectHitPool.get():cc.instantiate(this.effectHitPrefab)).parent=this.node,t.position=e,t.getComponent("effectHit").reset()}},createC4Bomb:function(e){this.c4Bomb=cc.instantiate(this.c4BombPrefab),this.c4Bomb.parent=this.node,this.c4Bomb.position=cc.v2(e.x,e.y-40),cc.director.emit("安包开始",e.getComponent("player").isEnemy)},createC4OnRole:function(e){var t=cc.instantiate(this.c4OnRolePrefab);t.parent=this.node,t.position=e.position,t.getComponent("c4OnRole").reset(e.getComponent("player").isEnemy)},createFlagInit:function(e){e&&null==this.flagEnemy?(this.flagEnemy=cc.instantiate(this.flagEnemyPrefab),this.flagEnemy.position=AD.mapMng.flagPosEnemy.position,this.flagEnemy.parent=this.node):e||null!=this.flagSelf||(this.flagSelf=cc.instantiate(this.flagSelfPrefab),this.flagSelf.position=AD.mapMng.flagPosSelf.position,this.flagSelf.parent=this.node)},createFlag:function(e){e.getComponent("player").isEnemy?(this.flagEnemy=cc.instantiate(this.flagEnemyPrefab),this.flagEnemy.parent=this.node,this.flagEnemy.position=e.position):(this.flagSelf=cc.instantiate(this.flagSelfPrefab),this.flagSelf.parent=this.node,this.flagSelf.position=e.position)}}),cc._RF.pop()},{}],playerNumRandom:[function(e,t,n){"use strict";cc._RF.push(t,"0c77a5XafpOZYgS2maHjeUw","playerNumRandom"),cc.Class({extends:cc.Component,properties:{minNum:5e3,maxNum:1e4},start:function(){this.node.getComponent(cc.Label).string=Tools.random(this.minNum,this.maxNum)}}),cc._RF.pop()},{}],player:[function(e,t,n){"use strict";cc._RF.push(t,"ee4f3OMsphBlJKFYtd1gCDv","player"),cc.Class({extends:cc.Component,properties:{isAI:!1,isEnemy:!1,animNode:cc.Node,gun:cc.Node,shootPoint:cc.Node,hpBar:cc.Node,line:cc.Node,nameNode:cc.Node,armIn:cc.Node,armOut:cc.Node,body:cc.Node,head:cc.Node,eye:cc.Node,gunSpr:cc.Node,shouLeiNode:cc.Node,flagNode:cc.Node,barHuJia:cc.Sprite,barSprSelf:cc.SpriteFrame,barSprEnemy:cc.SpriteFrame,c4Node:cc.Node},onLoad:function(){var e=this;this.anim=this.animNode.getComponent(sp.Skeleton),this.hideNodes=new Array,this.hideNodes.push(this.gun),this.hideNodes.push(this.body),this.hideNodes.push(this.armIn.parent),this.hideNodes.push(this.gunSpr),this.rolesId=AD.gameScene.rolesId,AD.gameScene.rolesId++,this.killerRoleId=null,this.killNum=0,this.dieNum=0,this.nameNode.active=!1,this.scheduleOnce(function(){e.nameNode.active=!0,e.nameLabel=null,e.isAI?(e.nameLabel=AD.nameArr[e.rolesId],e.roleIcon=AD.roleIconArr[e.rolesId],console.log("  this.rolesId "+e.rolesId+e.roleIcon.name),"touTiao"==AD.chanelName1&&AD.delayTime<=0?e.type=Tools.random(0,13):e.type=Tools.random(0,18),e.initPlayerData()):("4399"==AD.chanelName1&&e.initMouse(),e.nameLabel="You",e.roleIcon=AD.iconSelf,console.log("  自己 this.rolesId "+e.rolesId),e.schedule(function(){e.hp>0&&e.hp<e.hpZong&&(e.hp+=1,e.hpBar.getComponent(cc.Sprite).fillRange=e.hp/e.hpZong)},1)),e.nameNode.getComponent(cc.Label).string=e.nameLabel,e.setSkin(),e.isAI||(cc.director.on("玩家走",function(t){"chaibao"!=e.anim.animation&&(e.direction=t,e.couldMove=!0)},e),cc.director.on("玩家停",function(){e.couldMove=!1},e),cc.director.on("玩家跳",function(){"chaibao"!=e.anim.animation&&e.jumpFunc()},e),cc.director.on("开始射击",function(){"chaibao"!=e.anim.animation&&(e.couldShoot=!0)},e),cc.director.on("停止射击",function(){e.couldShoot=!1},e),cc.director.on("换弹",function(){e.hp<=0||"chaibao"!=e.anim.animation&&e.addBt()},e),cc.director.on("手雷",function(){e.hp<=0||"chaibao"!=e.anim.animation&&(e.leiNum<=0?e.isAI||cc.director.emit("系统提示","Not Enough Grenades"):e.shouLei())},e),cc.director.on("复活主角",function(){e.wuDiTime=e.wuDiTimeSum,e.revive(AD.playerMng.getRevivePos(e.isEnemy))},e)),e.isEnemy?AD.playerMng.enemyArrForever.push(e.node):AD.playerMng.selfArrForever.push(e.node),e.wuDiTime=e.wuDiTimeSum,e.effect.children[2].active=!0},.1),this.gunSprYuanX=this.gunSpr.x,this.hadCreateQiangQiRole=!1,this.fireEffectSelf=cc.find("effect0",this.shootPoint).getComponent(cc.Animation),this.fireEffectEnemy=cc.find("effect1",this.shootPoint).getComponent(cc.Animation),this.hpBarDi=cc.find("hpDi",this.node),this.effect=cc.find("effect",this.node),this.tipsHuanDan=cc.find("tips_huanDanZhong",this.hpBar),this.tipsHuanDan.active=!1,this.couldMoveSum=!0,this.beiDianNode=cc.find("beiDian",this.node),this.beiDianNode.active=!1},start:function(){switch(this.jumpForceRate=1,globalData.modeType){case "月球模式":this.jumpForceRate=.7,this.node.getComponent(cc.RigidBody).gravityScale=.5}},revive:function(e){var t=this;if(cc.director.emit("死亡复活的X",!1,this.rolesId),this.effect.children[0].active=!1,this.effect.children[1].active=!1,this.effect.children[3].active=!1,this.effect.children[2].active=!0,this.node.position=e,!this.isAI){var n=this.node.x;n>=AD.mapMng.airWallRight.x-cc.winSize.width/2?n=AD.mapMng.airWallRight.x-cc.winSize.width/2:n<=AD.mapMng.airWallLeft.x+cc.winSize.width/2&&(n=AD.mapMng.airWallLeft.x+cc.winSize.width/2),cc.tween(AD.gameScene.camera).to(.2,{x:n}).call(function(){t.moveCamera=!0}).start()}
this.reset(this.type,this.isAI,this.isEnemy,this.gunType),this.armOut.getComponent(cc.Animation).play("shouLei2"),this.hpBar.active=!0,this.hpBarDi.active=!0,this.isAI&&(this.couldMove=!0),this.couldJump=!0,this.setSkin(),this.resetGunPos()},reset:function(e,t,n,i){this.scaleRate=1,this.node.scale=1,t||(AD.playerNow=this.node,AD.playerNowJS=this),this.initPlayerNormalData(e,t,n),this.initPlayerData(),this.gunType=i,this.initGunData(),this.isEnemy?AD.playerMng.enemyArr.push(this.node):AD.playerMng.selfArr.push(this.node)},initPlayerNormalData:function(e,t,n){switch("生化模式"==globalData.modeType&&(this.node.position=cc.v2(Tools.random(-150,150),0)),this.beiDianing=!1,this.node.angle=0,this.node.getComponent(cc.RigidBody).fixedRotation=!0,this.hpBar.getComponent(cc.Sprite).fillRange=1,this.type=e,this.isAI=t,this.isEnemy=n,this.moveCamera=!0,this.wuDiTime=3,this.wuDiTimeSum=3,this.isAI||(this.wuDiTimeSum=3-globalData.getQiangHua("无敌时间")),this.shootAngle=this.shootAngleTemp=-90,this.nodeScaleXTemp=.25,this.direction=1,this.beginNow=!0,this.targetNode=null,this.targetPos=cc.v2(0,0),this.updateTimes=0,this.shootIntervalTemp=100,this.couldMove=!1,this.couldJump=!0,this.onGround=!1,this.isDie=!1,this.couldShoot=!1,this.noWall=!1,this.beHitRight=!0,this.yuanX=this.node.x,this.isJumping=!1,this.huanDaning=!1,this.killEnemyDuration=100,this.killEnemyDurationMax=20,this.lianShaNum=0,this.rengLeing=!1,this.leiNum=1,this.barHuJia.fillRange=0,this.isAI||cc.director.emit("手雷数量变化",this.leiNum),this.rangLeiRate=5,this.prop_jiaSuDuration=0,this.prop_hurtDuration=0,this.prop_wuXianBtDuration=0,this.prop_biggerDuration=0,this.armorNum=0,this.huoJianTongBtNum=0,this.shootDrutationForHuoJianDan=.5,this.isAI&&this.initAI(),this.line.opacity=0,this.shouLeiCD=this.shouLeiCDSum=3,this.flagNode.active=!1,this.isDaiQiRole=!1,this.btnAnBaoClick=!1,this.isPlayingAnBaoAct=!1,this.inAnBaoArea=!1,this.c4Node.active=!1,globalData.modeType){case "爆破模式":this.isChaiBaoing=!1,this.isAnBaoFang=AD.gameScene.jinGongFangIsEnemy==n,this.isAnBaoRole=!1,this.isAnBaoFang&&(AD.gameScene.anBaoRoleIndex--,AD.gameScene.anBaoRoleIndex<=0&&0==AD.gameScene.hadCreatAnBaoRole&&(this.isAnBaoRole=!0,this.c4Node.active=!0,AD.gameScene.hadCreatAnBaoRole=!0));break;case "个人竞技":this.isAI?(this.hpBar.getComponent(cc.Sprite).spriteFrame=this.barSprEnemy,Tools.setNodeColor(this.nameNode,255,10,10)):this.hpBar.getComponent(cc.Sprite).spriteFrame=this.barSprSelf;break;case "抢旗模式":this.isAI||cc.director.emit("去抢旗吗",!0)}},initPlayerData:function(){var e;this.isAI?"个人竞技"==globalData.modeType?((e=.1*parseInt((AD.gameScene.playTimes-1)/5)+.5)>=1&&(e=1),this.hp=this.hpZong=this.hpTemp=globalData.hpArr[this.type]*e):this.isEnemy?((e=.1*parseInt((AD.gameScene.playTimes-1)/5)+.5)>=1&&(e=1),this.hp=this.hpZong=this.hpTemp=globalData.hpArr[this.type]*e):this.hp=this.hpZong=this.hpTemp=1*globalData.hpArr[this.type]:(this.hp=this.hpZong=this.hpTemp=globalData.hpArr[this.type]*(.01*globalData.getQiangHua("血量上限")+1),console.log("角色类型是hp  "+this.hp));this.moveSpeed=300*(.01*globalData.getQiangHua("移动速度")+1)},initGunData:function(){if(this.isAI){e=AD.gunData[this.gunType];this.shootDistance=e.Gun_Range,this.shootInterval=e.Gun_Firerate,this.butNum=this.btNumZong=e.Gun_Ammo,this.addBtDuration=e.Gun_Reload}else{var e=AD.gunData[this.gunType];this.shootDistance=globalData.getGunCfg(this.gunType,"攻击范围"),this.shootInterval=globalData.getGunCfg(this.gunType,"射速"),this.butNum=this.btNumZong=globalData.getGunCfg(this.gunType,"弹夹数"),this.addBtDuration=globalData.getGunCfg(this.gunType,"换弹速度")}
this.isAI||this.isEnemy||cc.director.emit("子弹数量变化",this.butNum),this.resetGunPos()},resetGunPos:function(){var e=null;switch(this.gunType){case 0:e=cc.v2(283,40);break;case 1:e=cc.v2(310,11);break;case 2:e=cc.v2(396,53);break;case 3:e=cc.v2(331,50);break;case 4:e=cc.v2(357,34);break;case 5:e=cc.v2(451,26);break;case 6:case 7:e=cc.v2(401,32);break;case 8:e=cc.v2(384,48);break;case 9:e=cc.v2(415,24);break;case 10:e=cc.v2(350,46);break;case 11:e=cc.v2(464,60);break;case 12:e=cc.v2(364,24);break;case 13:e=cc.v2(402,38);break;case 14:e=cc.v2(458,55);break;case 15:e=cc.v2(445,28)}
this.shootPoint.position=e},createBtByType:function(e){if(e)this.createBt(0,300);else switch(this.gunType){case 2:this.createBt(),this.createBt(-3),this.createBt(3),this.createBt(-1.5),this.createBt(1.5);break;case 8:this.createBt(),this.createBt(-3),this.createBt(3);break;default:this.createBt()}},createBt:function(){if(AD.gameScene.beginNow&&!AD.gameScene.gameOver&&this.couldMoveSum&&!this.beiDianing&&"手雷模式"!=globalData.modeType&&!(!this.beginNow||this.isDie||this.butNum<=0||this.rengLeing)){if(this.isAI){if(!this.noWall)return}else this.isEnemy||(arguments.length<=0?void 0:arguments[0])||("daiji"!=this.anim.animation?AD.couldShake=!1:this.couldMoveSum&&(AD.couldShake=!0,Tools.shakeScreen(.4)));cc.tween(this.gunSpr).to(.02,{x:this.gunSprYuanX-20}).to(.05,{x:this.gunSprYuanX}).start();var e=this.shootPoint.parent.convertToWorldSpaceAR(this.shootPoint.position),t=AD.playerBtMng.node.convertToNodeSpaceAR(e),n=0;(arguments.length<=0?void 0:arguments[0])?n=arguments.length<=0?void 0:arguments[0]:this.checkBtNum(),(arguments.length<=1?void 0:arguments[1])?(this.huoJianTongBtNum--,this.huoJianTongBtNum<=0&&(this.gunSpr.getComponent(cc.Sprite).spriteFrame=AD.gunIconArr[this.gunType],this.resetGunPos()),Math.abs(this.node.x-AD.gameScene.camera.x)<cc.winSize.width/2&&AD.audioMng.playSfx("火箭筒"),this.animNode.scaleX<0?AD.playerBtMng.createBt(this.node,this.gunType,t,-1*(this.gun.angle-90+n)/this.scaleRate,this.isEnemy,arguments.length<=1?void 0:arguments[1]):AD.playerBtMng.createBt(this.node,this.gunType,t,1*(this.gun.angle-90+n)/this.scaleRate,this.isEnemy,arguments.length<=1?void 0:arguments[1])):(this.animNode.scaleX<0?AD.playerBtMng.createBt(this.node,this.gunType,t,-1*(this.gun.angle-90+n),this.isEnemy):AD.playerBtMng.createBt(this.node,this.gunType,t,1*(this.gun.angle-90+n),this.isEnemy),Math.abs(this.node.x-AD.gameScene.camera.x)<cc.winSize.width/2&&AD.audioMng.playSfx("枪声",this.gunType,this.isAI)),(arguments.length<=0?void 0:arguments[0])||AD.playerMng.createBulletShell(this.node.position),this.isEnemy?this.fireEffectEnemy.play():"个人竞技"==globalData.modeType&&this.isAI?this.fireEffectEnemy.play():this.fireEffectSelf.play()}},checkBtNum:function(){this.prop_wuXianBtDuration<=0&&this.butNum--,this.isAI||this.isEnemy||cc.director.emit("子弹数量变化",this.butNum),this.butNum<=0&&this.addBt()},addBt:function(){var e=this;if(this.butNum=0,this.isAI)this.tipsHuanDan.active=!0,this.body.parent.getComponent(cc.Animation).play(),this.scheduleOnce(function(){e.butNum=e.btNumZong,e.tipsHuanDan.active=!1},this.addBtDuration);else{if(this.huanDaning)return;this.tipsHuanDan.active=!0,AD.audioMng.playSfx("换弹"),this.body.parent.getComponent(cc.Animation).play(),this.huanDaning=!0,cc.director.emit("隐藏子弹label",!0),this.scheduleOnce(function(){e.butNum=e.btNumZong,e.tipsHuanDan.active=!1,e.huanDaning=!1,cc.director.emit("子弹数量变化",e.butNum),cc.director.emit("隐藏子弹label",!1)},this.addBtDuration)}},shouLei:function(){AD.gameScene.gameOver||("手雷模式"!=globalData.modeType?this.rengLeing||(this.leiNum--,this.isAI?Math.abs(this.node.x-AD.gameScene.camera.x)<=cc.winSize.width/2+100&&AD.audioMng.playSfx("扔手雷",0,!0):(cc.director.emit("手雷数量变化",this.leiNum),AD.audioMng.playSfx("扔手雷")),this.rengLeing=!0,this.playAct("手雷")):this.shouLeiCD<=0&&(this.shouLeiCD=this.shouLeiCDSum,this.playAct("手雷")))},showFlag:function(){this.flagNode.active=!0,this.isAI||cc.director.emit("去抢旗吗",!1)},getGunAngle:function(){if("4399"!=AD.chanelName1||this.isAI){var e=this.gun.parent.convertToWorldSpaceAR(this.gun.position);if(this.updateTimes++,this.updateTimes%2==0){var t=this.shootDistance;this.targetPos=null,this.targetNode=null;var n=null,i=null;switch(globalData.modeType){case "个人竞技":i=AD.playerMng.selfArr;break;case "生化模式":i=AD.playerMng.npcArr;break;default:i=this.isEnemy?AD.playerMng.selfArr:AD.playerMng.enemyArr}
if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a!=this.node){var c=Tools.getDistance(cc.v2(a.x,a.y),this.node.position);c<t&&(t=c,n=a)}}
if(!n)return;this.targetNode=n,this.targetPos=n.parent.convertToWorldSpaceAR(cc.v2(n.x,n.y))}
if(!this.isPlayingAnBaoAct){if(this.animNode.scaleX=this.nodeScaleXTemp,this.targetNode){this.targetPos&&(this.shootAngle=Tools.getAngle(this.targetPos,e)%360),this.targetNode.x<this.node.x&&(this.animNode.scaleX=-this.nodeScaleXTemp);var s=0;s=this.animNode.scaleX>0?this.shootAngle:-this.shootAngle,Math.abs(this.shootAngleTemp-s)>90?this.shootAngleTemp=s:this.shootAngleTemp<s-5?this.shootAngleTemp+=5:this.shootAngleTemp>s+5?this.shootAngleTemp-=5:this.shootAngleTemp=s,this.gun.angle=this.shootAngleTemp+90,Math.abs(this.node.y-this.targetNode.y)>10?this.animNode.scaleX<0?(this.body.angle=(s+90)%360,this.targetNode.y<this.node.y?this.body.angle<-30&&(this.body.angle=-30):this.body.angle>30&&(this.body.angle=30)):(this.body.angle=(s+90)%360,this.targetNode.y<this.node.y?this.body.angle<330&&this.body.angle>270?this.body.angle=330:this.body.angle<-30&&(this.body.angle=-30):this.body.angle>30&&(this.body.angle=30)):this.body.angle=0}else this.gun.angle=0,this.shootAngle=-90*this.direction+90,this.animNode.scaleX=this.direction*this.nodeScaleXTemp,this.body.angle=0;this.armIn.angle=this.gun.angle}}else{if(this.isPlayingAnBaoAct)return;this.armIn.angle=this.gun.angle}},beHit:function(e,t,n,i){if(!(this.wuDiTime>0||this.hp<=0)){if(this.scaleRate>1&&(e=parseInt(.3*e)),AD.playerMng.createHurtTips(this.node.position,e,i),this.armorNum>0){if(this.armorNum-=e,this.barHuJia.fillRange=this.armorNum/this.hpZong,!(this.armorNum<0))return;this.hp+=this.armorNum,this.armorNum=0}
this.hp-=e,this.hpBar.getComponent(cc.Sprite).fillRange=this.hp/this.hpZong,this.beHitRight=t,this.hp<=0&&n&&this.beKill(n)}},beKill:function(e){this.dieNum++,this.killerRoleId=e.getComponent("player").rolesId,cc.director.emit("杀人信息统计",e.getComponent("player").nameLabel,this.nameLabel,this.isEnemy,this.isAI),e.getComponent("player").killEnemy(this.rolesId),this.isAI?Math.abs(this.node.x-AD.gameScene.camera.x)<=cc.winSize.width/2+100&&AD.audioMng.playSfx("死亡",0,!0):(AD.audioMng.playSfx("死亡"),cc.director.emit("死亡数变化",this.dieNum))},killEnemy:function(e){switch(this.killNum++,globalData.modeType){case "个人竞技":this.isAI?this.killNum>AD.killNumEnemy&&(AD.killNumEnemy=this.killNum,cc.director.emit("得分变化",!0)):(AD.killNumSelf=this.killNum,cc.director.emit("得分变化",!1));break;case "抢旗模式":break;default:this.isEnemy?AD.killNumEnemy++:AD.killNumSelf++,cc.director.emit("得分变化",this.isEnemy)}
this.isAI||(cc.director.emit("杀人数变化",this.killNum),0==this.lianShaNum&&AD.audioMng.playSfx("连杀",0),this.lianShaNum++,cc.director.emit("连杀",this.lianShaNum),this.killerRoleId==e&&(cc.director.emit("复仇"),this.killerRoleId=null),"个人竞技"!=globalData.modeType&&"团队竞技"!=globalData.modeType&&"爆破模式"!=globalData.modeType||globalData.setHuoDongData("竞技先锋"))},updateLianSha:function(e){},updateHpBar:function(){this.hp>0?this.hpTemp>this.hp&&(this.hpTemp-=10,this.hpTemp<this.hp&&(this.hpTemp=this.hp),this.hpBar.getComponent(cc.Sprite).fillRange=this.hpTemp/this.hpZong):(this.hpBar.getComponent(cc.Sprite).fillRange=0,this.die())},beiDian:function(){var e=this;if(!(this.wuDiTime>0)){this.beiDianing=!0;for(var t=0;t<this.node.children.length;t++)this.node.children[t].opacity=0;this.beiDianNode.active=!0,this.beiDianNode.opacity=255,Math.abs(this.node.x-AD.gameScene.camera.x)<cc.winSize.width/2+100&&(AD.audioMng.playSfx("电击",0,this.isAI),AD.audioMng.playSfx("死亡",0,this.isAI)),this.beiDianPos=this.node.position,this.scheduleOnce(function(){e.beiDianing=!1;for(var t=0;t<e.node.children.length;t++)e.node.children[t].opacity=255;e.beiDianNode.active=!1,e.node.position=e.beiDianPos,e.couldMove=!1,e.node.getComponent(cc.RigidBody).linearVelocity.x=e.node.getComponent(cc.RigidBody).linearVelocity.y=0},1)}},die:function(){var e=this;if(this.isDie=!0,this.isEnemy?Tools.removeElementFromArr2(AD.playerMng.enemyArr,this.node):Tools.removeElementFromArr2(AD.playerMng.selfArr,this.node),cc.director.emit("死亡复活的X",!0,this.rolesId),this.beiDianing){this.beiDianing=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].opacity=255;this.beiDianNode.active=!1,this.node.position=this.beiDianPos,this.node.getComponent(cc.RigidBody).linearVelocity.x=this.node.getComponent(cc.RigidBody).linearVelocity.y=0}
this.node.getComponent(cc.RigidBody).fixedRotation=!1,0==this.beHitRight?(this.node.getComponent(cc.RigidBody).angularVelocity=500,this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(5e3,0),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)):1==this.beHitRight&&(this.node.getComponent(cc.RigidBody).angularVelocity=-500,this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(-5e3,0),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)),this.isAI||this.scheduleOnce(function(){e.moveCamera=!1},2);var n=3;this.isAI||(n=3-globalData.getQiangHua("复活时间")),this.scheduleOnce(function(){var e=this;"生化模式"==globalData.modeType?this.isAI?Tools.random(1,100)<70&&this.scheduleOnce(function(){e.wuDiTime=e.wuDiTimeSum,e.revive(AD.playerMng.getRevivePos(e.isEnemy))},5):cc.director.emit("显示复活弹窗"):(this.wuDiTime=this.wuDiTimeSum,this.revive(AD.playerMng.getRevivePos(this.isEnemy)))},n),"爆破模式"==globalData.modeType?(this.isPlayingAnBaoAct=!1,this.couldJump=!0,"chaibao"==this.anim.animation&&(this.isAnBaoFang?this.isAnBaoRole&&!AD.gameScene.hadAnBao&&(0==this.isAI?AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax-globalData.getQiangHua("c4安装时间"):AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax,cc.director.emit("安包中断"),this.c4Node.active=!0,AD.playerMng.c4Bomb=null):(0==this.isAI?AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax-globalData.getQiangHua("c4拆除时间"):AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax,cc.director.emit("拆包中断"),AD.gameScene.isChaiBaoing=!1)),this.c4Node.active&&(this.c4Node.active=!1,AD.playerMng.createC4OnRole(this.node))):"抢旗模式"==globalData.modeType&&this.flagNode.active&&(this.flagNode.active=!1,AD.playerMng.createFlag(this.node)),this.hpBar.active=!1,this.hpBarDi.active=!1},update:function(e){var t=this;this.isDie?this.playAct("死亡1"):this.beginNow&&(this.updateHpBar(e),this.hp<=0||(this.getGunAngle(),this.updatePorpDuration(e),this.couldMoveSum?this.beiDianing?this.node.position=this.beiDianPos:this.couldMove&&AD.gameScene.beginNow&&(this.prop_jiaSuDuration>0?this.node.x+=this.moveSpeed*e*this.direction*1.5:this.node.x+=this.moveSpeed*e*this.direction):Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<1&&Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.x<1)&&(this.couldMoveSum=!0,this.scheduleOnce(function(){t.node.getComponent(cc.RigidBody).fixedRotation=!0,t.jumpFunc(),t.node.angle=t.node.angle%360,cc.tween(t.node).to(.3,{angle:0}).start()},.5)),Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<1&&this.onGround?Math.abs(this.node.x-this.yuanX)>1?(this.yuanX>this.node.x?this.animNode.scaleX<0?this.playAct("跑步"):this.playAct("倒走"):this.animNode.scaleX>0?this.playAct("跑步"):this.playAct("倒走"),this.yuanX=this.node.x):this.isPlayingAnBaoAct||this.playAct("待机"):this.playAct("起跳"),this.huoJianTongBtNum<=0?this.shootIntervalTemp<this.shootInterval&&(this.shootIntervalTemp+=e):this.shootIntervalTemp<this.shootDrutationForHuoJianDan&&(this.shootIntervalTemp+=e),this.couldShoot&&(this.huoJianTongBtNum<=0?this.shootIntervalTemp>=this.shootInterval&&(this.createBtByType(!1),this.shootIntervalTemp=0):this.shootIntervalTemp>=this.shootDrutationForHuoJianDan&&(this.createBtByType(!0),this.shootIntervalTemp=0)),this.wuDiTime>0&&(this.wuDiTime-=e,this.wuDiTime<=0&&(this.effect.children[2].active=!1)),this.isAI?this.updateAI(e):(this.updateLianSha(e),this.updateBombMode(e),"手雷模式"==globalData.modeType&&this.shouLeiCD>0&&(this.shouLeiCD-=e,this.isAI||AD.btnsPanel.updateShouLeiCD(this.shouLeiCD/this.shouLeiCDSum),this.shouLeiCD<=0&&(this.shouLeiNode.active=!0)))))},btnAnBaoCallBack:function(e){this.btnAnBaoClick=e,e||(this.isPlayingAnBaoAct=!1,this.couldJump=!0,"chaibao"==this.anim.animation&&(this.isAnBaoFang?this.isAnBaoRole&&!AD.gameScene.hadAnBao&&(AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax-globalData.getQiangHua("c4安装时间"),cc.director.emit("安包中断"),this.c4Node.active=!0):(AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax-globalData.getQiangHua("c4拆除时间"),cc.director.emit("拆包中断"))),this.couldMove=!1)},updateBombMode:function(e){if("爆破模式"==globalData.modeType&&this.btnAnBaoClick&&this.inAnBaoArea)if(this.isAnBaoFang){if(this.isAnBaoRole&&0==AD.gameScene.hadAnBao)return void(Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&(this.couldMove=!1,this.couldJump=!1,0==this.isPlayingAnBaoAct&&(AD.playerMng.createC4Bomb(this.node),this.c4Node.active=!1,this.isPlayingAnBaoAct=!0),this.playAct("拆包"),AD.gameScene.anBaoTimer-=e,AD.gameScene.anBaoTimer<=0&&(cc.director.emit("安包完成",this.isEnemy),AD.gameScene.hadAnBao=!0,this.isPlayingAnBaoAct=!1,this.couldJump=!0,this.couldMove=!1)))}else if(!this.isAnBaoFang&&1==AD.gameScene.hadAnBao&&Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1){if(!AD.playerMng.c4Bomb)return;Math.abs(AD.playerMng.c4Bomb.x-this.node.x)>100?Math.abs(AD.playerMng.c4Bomb.x-this.node.x)>100&&(this.couldMove=!0):(AD.playerMng.c4Bomb.x>this.node.x?this.animNode.scaleX=this.nodeScaleXTemp:this.animNode.scaleX=-this.nodeScaleXTemp,this.couldMove=!1,0==this.isPlayingAnBaoAct&&(cc.director.emit("拆包开始",this.isEnemy),this.isPlayingAnBaoAct=!0),this.isChaiBaoing=!0,this.playAct("拆包"),AD.gameScene.chaiBaoTimer-=e,AD.gameScene.chaiBaoTimer<=0&&(console.log("拆包完毕  防守方胜利"),globalData.setHuoDongData("拆弹专家"),AD.playerMng.c4Bomb.destroy(),AD.gameScene.gameOverFunc(!this.isEnemy),this.isPlayingAnBaoAct=!1,this.playAct("待机")))}},initAI:function(){this.directionBig=1,this.node.x>0&&(this.directionBig=-1),this.moveStateAI=0,this.moveStateAIDuration=.1*Tools.random(5,10),this.jumpDelayAI=0,this.targetNodeTemp=null,this.shootDealyStart=.01*Tools.random(20,80),this.shootDealyEnd=.01*Tools.random(20,50),this.autoJumpDuration=.1*Tools.random(30,50),this.forceDirectionDuration=0},updateAI:function(e){"手雷模式"==globalData.modeType&&(this.shouLeiCD-=e),this.autoJumpDuration-=e,this.autoJumpDuration<=0&&(this.autoJumpDuration=.1*Tools.random(30,50),this.jumpFunc()),this.shootAI(e),this.moveAI(e)},moveAI:function(e){if("爆破模式"==globalData.modeType){if(this.isAnBaoFang){if(!AD.gameScene.hadAnBao)if(AD.playerMng.targetC4Bomb)if(!(t=this.getSomeOneIsChaiBaoing())){if(this.couldMove=!0,this.couldJump=!0,Math.abs(AD.playerMng.targetC4Bomb.x-this.node.x)>250)return void(AD.playerMng.targetC4Bomb.x>this.node.x?this.direction=1:this.direction=-1);if(Math.abs(AD.playerMng.targetC4Bomb.y-this.node.y)<100)return void(AD.playerMng.targetC4Bomb.x>this.node.x?this.direction=1:this.direction=-1)}}else if(AD.gameScene.hadAnBao){this.couldMove=!0,this.couldJump=!0;var t=this.getSomeOneIsChaiBaoing();if(AD.playerMng.c4Bomb&&!t&&Math.abs(AD.playerMng.c4Bomb.y-this.node.y)<100&&0==this.inAnBaoArea)return void(AD.playerMng.c4Bomb.x>this.node.x?this.direction=1:this.direction=-1)}
if(this.inAnBaoArea){if(this.isAnBaoFang){if(this.isAnBaoRole&&0==AD.gameScene.hadAnBao)return void(Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&(this.couldMove=!1,this.couldJump=!1,this.c4Node.active=!1,0==this.isPlayingAnBaoAct&&(AD.playerMng.createC4Bomb(this.node),this.isPlayingAnBaoAct=!0),this.playAct("拆包"),AD.gameScene.anBaoTimer-=e,AD.gameScene.anBaoTimer<=0&&(cc.director.emit("安包完成",this.isEnemy),AD.gameScene.hadAnBao=!0,this.isPlayingAnBaoAct=!1)))}else if(!this.isAnBaoFang){if(!(t=this.getSomeOneIsChaiBaoing())&&1==AD.gameScene.hadAnBao&&AD.playerMng.c4Bomb)return void(Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&(this.couldMove=!1,this.couldJump=!1,Math.abs(AD.playerMng.c4Bomb.x-this.node.x)>60?(this.couldMove=!0,AD.playerMng.c4Bomb.x>this.node.x?(this.direction=1,this.animNode.scaleX=this.nodeScaleXTemp):(this.direction=-1,this.animNode.scaleX=-this.nodeScaleXTemp)):(AD.playerMng.c4Bomb.x>this.node.x?this.animNode.scaleX=this.nodeScaleXTemp:this.animNode.scaleX=-this.nodeScaleXTemp,0==this.isPlayingAnBaoAct&&(cc.director.emit("拆包开始"),this.isPlayingAnBaoAct=!0),this.playAct("拆包"),AD.gameScene.chaiBaoTimer-=e,AD.gameScene.chaiBaoTimer<=0&&(console.log("拆包完毕  防守方胜利"),AD.gameScene.gameOverFunc(!this.isEnemy),AD.playerMng.c4Bomb.destroy(),this.isPlayingAnBaoAct=!1,this.playAct("待机")))))}}else this.isPlayingAnBaoAct=!1,this.couldJump=!0,"chaibao"==this.anim.animation&&(this.isAnBaoFang?this.isAnBaoRole&&!AD.gameScene.hadAnBao&&(AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax,cc.director.emit("安包中断"),this.c4Node.active=!0):(AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax,cc.director.emit("拆包中断")))}else if("抢旗模式"==globalData.modeType)return void(this.isEnemy?AD.playerMng.flagEnemy?(this.couldMove=!0,this.couldJump=!0,Math.abs(AD.playerMng.flagEnemy.x-this.node.x)>250?AD.playerMng.flagEnemy.x>this.node.x?this.direction=1:this.direction=-1:Math.abs(AD.playerMng.flagEnemy.y-this.node.y)<60&&(AD.playerMng.flagEnemy.x>this.node.x?this.direction=1:this.direction=-1)):this.flagNode.active&&(this.couldMove=!0,this.couldJump=!0,Math.abs(AD.mapMng.targetPosEnemyFlag.x-this.node.x)>100?AD.mapMng.targetPosEnemyFlag.x>this.node.x?this.direction=1:this.direction=-1:Math.abs(AD.mapMng.targetPosEnemyFlag.y-this.node.y)<60&&(AD.mapMng.targetPosEnemyFlag.x>this.node.x?this.direction=1:this.direction=-1)):AD.playerMng.flagSelf?(this.couldMove=!0,this.couldJump=!0,Math.abs(AD.playerMng.flagSelf.x-this.node.x)>250?AD.playerMng.flagSelf.x>this.node.x?this.direction=1:this.direction=-1:Math.abs(AD.playerMng.flagSelf.y-this.node.y)<60&&(AD.playerMng.flagSelf.x>this.node.x?this.direction=1:this.direction=-1)):this.flagNode.active&&(this.couldMove=!0,this.couldJump=!0,Math.abs(AD.mapMng.targetPosSelfFlag.x-this.node.x)>100?AD.mapMng.targetPosSelfFlag.x>this.node.x?this.direction=1:this.direction=-1:Math.abs(AD.mapMng.targetPosSelfFlag.y-this.node.y)<60&&(AD.mapMng.targetPosSelfFlag.x>this.node.x?this.direction=1:this.direction=-1)));if(this.jumpDelayAI>0&&(this.jumpDelayAI-=e,this.jumpDelayAI<=0&&this.jumpFunc()),AD.propNow&&Math.abs(AD.propNow.x-this.node.x)<700&&Math.abs(AD.propNow.y-this.node.y)<50)return this.couldMove=!0,void(AD.propNow.x>this.node.x+50?this.direction=1:AD.propNow.x<this.node.x-50&&(this.direction=-1));switch(this.forceDirectionDuration>0&&(this.forceDirectionDuration-=e),this.moveStateAIDuration-=e,this.moveStateAIDuration<=0&&(this.moveStateAI=Tools.random(1,2),1==this.moveStateAI?this.moveStateAIDuration=.1*Tools.random(40,80):this.moveStateAIDuration=.1*Tools.random(10,20)),this.moveStateAI){case 0:this.couldMove=!1;break;case 1:this.couldMove=!0,this.direction=this.directionBig;break;case 2:this.couldMove=!0,this.direction=-this.directionBig}},shootAI:function(e){this.targetNode&&this.noWall?(null==this.targetNodeTemp&&(this.targetNodeTemp=this.targetNode,this.shootDealyStart=.01*Tools.random(20,50),this.couldShoot=!1,"手雷模式"==globalData.modeType?this.shouLei():Tools.random(1,100)<this.rangLeiRate&&this.shouLei()),this.shootDealyStart<=0?this.couldShoot=!0:this.shootDealyStart-=e):(this.targetNodeTemp&&(this.targetNodeTemp=null,this.shootDealyEnd=.01*Tools.random(20,50)),this.shootDealyEnd>0&&(this.shootDealyEnd-=e,this.couldShoot=!0))},getSomeOneIsChaiBaoing:function(){var e=!1,t=null;t=this.isEnemy?AD.playerMng.enemyArr:AD.playerMng.selfArr;for(var n=0;n<t.length;n++)"chaibao"==t[n].getComponent("player").anim.animation&&t[n]!=this.node&&(e=!0);return e},playAct:function(e){switch("chaibao"==this.anim.animation&&"拆包"!=e&&(this.isAnBaoFang?this.isAnBaoRole&&!AD.gameScene.hadAnBao&&(AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax,cc.director.emit("安包中断"),this.c4Node.active=!0):(AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax,cc.director.emit("拆包中断")),this.isPlayingAnBaoAct=!1,this.couldJump=!0,this.couldMove=this.isAI),e){case "拆包":"chaibao"==this.anim.animation||this.isDie||(this.anim.setAnimation(0,"chaibao",!0),this.setHideNodeState(!1));break;case "跑步":"paobu"==this.anim.animation||this.isDie||(this.anim.setAnimation(0,"paobu",!0),this.setHideNodeState(!0));break;case "倒走":"daozou"==this.anim.animation||this.isDie||(this.anim.setAnimation(0,"daozou",!0),this.setHideNodeState(!0));break;case "起跳":"qitiao"==this.anim.animation||this.isDie||(this.anim.setAnimation(0,"qitiao",!1),this.setHideNodeState(!0));break;case "待机":"daiji"==this.anim.animation||this.isDie||(this.anim.setAnimation(0,"daiji",!0),this.setHideNodeState(!0));break;case "手雷":this.armOut.getComponent(cc.Animation).play("shouLei");break;case "死亡1":"siwang1"!=this.anim.animation&&(this.anim.setAnimation(0,"siwang1",!1),this.setHideNodeState(!1));break;case "死亡2":"siwang2"!=this.anim.animation&&(this.anim.setAnimation(0,"siwang",!1),this.setHideNodeState(!1))}},setHideNodeState:function(e){this.hideNodes.forEach(function(t){t.active=e}),"手雷模式"==globalData.modeType&&(this.gunSpr.active=!1)},checkHideNodeSpr:function(){if(this.isAI){var e=Tools.random(1,100);this.gunSpr.getComponent(cc.Sprite).spriteFrame=e<90?AD.gunIconArr[this.gunType]:AD.gunGoldIconArr[this.gunType]}else globalData.getGunLevel(this.gunType)<5?this.gunSpr.getComponent(cc.Sprite).spriteFrame=AD.gunIconArr[this.gunType]:this.gunSpr.getComponent(cc.Sprite).spriteFrame=AD.gunGoldIconArr[this.gunType];this.armIn.children[0].getComponent(cc.Sprite).spriteFrame=AD.playerMng.armInArr[this.type],this.armOut.getChildByName("spr").getComponent(cc.Sprite).spriteFrame=AD.playerMng.armOutArr[this.type],this.body.getChildByName("body").getComponent(cc.Sprite).spriteFrame=AD.playerMng.bodyArr[this.type],this.head.getComponent(cc.Sprite).spriteFrame=AD.playerMng.headArr[this.type],this.eye.getComponent(cc.Sprite).spriteFrame=AD.playerMng.eyeArr[this.type],"手雷模式"==globalData.modeType&&(this.gunSpr.active=!1)},setSkin:function(){this.anim.setSkin("js"+(this.type+1)),this.checkHideNodeSpr()},jumpFunc:function(){var e=this;AD.gameScene.gameOver||this.hp<=0||!this.couldJump||Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.y)<=1&&(Math.abs(this.node.x-AD.gameScene.camera.x)<=cc.winSize.width/2+100&&AD.audioMng.playSfx("跳跃"),this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(0,8500*this.jumpForceRate*this.scaleRate*this.scaleRate),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){e.isJumping=!0},.05))},getProp:function(e){var t=this,n=["回血","加速","护甲","伤害","手雷","无限子弹","火箭筒","变大"];switch(e){case n[0]:this.hp=this.hpZong,this.hpBar.getComponent(cc.Sprite).fillRange=this.hp/this.hpZong,this.hpTemp=this.hp,this.effect.children[1].active=!0,this.scheduleOnce(function(){t.effect.children[1].active=!1},1);break;case n[1]:this.prop_jiaSuDuration=10,this.effect.children[3].active=!0;break;case n[2]:this.armorNum+=.3*this.hpZong,this.armorNum>this.hpZong&&(this.armorNum=this.hpZong),this.barHuJia.fillRange=this.armorNum/this.hpZong;break;case n[3]:this.prop_hurtDuration=10,this.effect.children[0].active=!0;break;case n[4]:this.leiNum++,this.isAI||cc.director.emit("手雷数量变化",this.leiNum);break;case n[5]:this.prop_wuXianBtDuration=10;break;case n[6]:this.huoJianTongBtNum=3,this.gunSpr.getComponent(cc.Sprite).spriteFrame=AD.gunIconArr[16],this.shootPoint.position=cc.v2(287,48);break;case n[7]:this.node.scale=2,this.scaleRate=2,this.prop_biggerDuration=10}},updatePorpDuration:function(e){this.prop_jiaSuDuration>0&&(this.prop_jiaSuDuration-=e,this.prop_jiaSuDuration<=0&&(this.effect.children[3].active=!1)),this.prop_hurtDuration>0&&(this.prop_hurtDuration-=e,this.prop_hurtDuration<=0&&(this.effect.children[0].active=!1)),this.prop_wuXianBtDuration>0&&(this.prop_wuXianBtDuration-=e),this.prop_biggerDuration>0&&(this.prop_biggerDuration-=e,this.prop_biggerDuration<=0&&(this.node.scale=1,this.scaleRate=1))},onBeginContact:function(e,t,n){switch(n.tag){case 88:this.node.x>n.node.x-n.node.anchorX*n.node.width&&this.node.x<n.node.x+(1-n.node.anchorX)*n.node.width&&(this.isJumping=!1);break;case 886:if(!this.isAI)return;this.directionBig=1;break;case 887:if(!this.isAI)return;this.directionBig=-1;break;case 101:if("抢旗模式"!=globalData.modeType)return;this.flagNode.active&&(this.flagNode.active=!1,AD.playerMng.createFlagInit(this.isEnemy),this.isAI||(globalData.setHuoDongData("抢旗模式"),AD.audioMng.playSfx("获得奖励")),this.isEnemy?AD.flagNumEnemy++:AD.flagNumSelf++,cc.director.emit("旗子数量变化",this.isEnemy))}},onEndContact:function(e,t,n){switch(n.tag){case 88:this.onGround=!1}},onPreSolve:function(e,t,n){switch(n.tag){case 88:this.onGround=!0}},onCollisionEnter:function(e,t){switch(e.tag){case 100:if(!this.isAI)return;this.jumpDelayAI=.01*Tools.random(20,80);break;case 101:if(!this.isAI)return;this.direction=e.node.scaleX,this.forceDirectionDuration=2,this.jumpFunc();break;case 886:globalData.modeType}},onCollisionStay:function(e,t){switch(e.tag){case 886:"爆破模式"==globalData.modeType&&(this.inAnBaoArea=!0,this.isAI||(this.isAnBaoRole&&!AD.gameScene.hadAnBao?cc.director.emit("显示安包按钮",!0,!0):0==this.getSomeOneIsChaiBaoing()&&!this.isAnBaoFang&&AD.gameScene.hadAnBao&&cc.director.emit("显示安包按钮",!0,!1)))}},onCollisionExit:function(e,t){switch(e.tag){case 886:"爆破模式"==globalData.modeType&&(this.inAnBaoArea=!1,this.isAI||cc.director.emit("显示安包按钮",!1,!0),"chaibao"==this.anim.animation&&(this.isAnBaoFang?this.isAnBaoRole&&!AD.gameScene.hadAnBao&&(AD.gameScene.anBaoTimer=AD.gameScene.anBaoTimerMax,cc.director.emit("安包中断"),this.c4Node.active=!0):(AD.gameScene.chaiBaoTimer=AD.gameScene.chaiBaoTimerMax,cc.director.emit("拆包中断"),this.couldJump=!0,this.couldMove=this.isAI)))}},initMouse:function(){this.touchObj=cc.find("Canvas/dialogMng"),this.touchObj.on(cc.Node.EventType.MOUSE_ENTER,function(e){AD.mouseClick=!0,AD.gameScene.zhunXing.active=!0},this),this.touchObj.on(cc.Node.EventType.MOUSE_MOVE,function(e){var t=e.getLocation();AD.gameScene.zhunXing.position=this.touchObj.convertToNodeSpaceAR(t);var n=this.gun.parent.convertToWorldSpaceAR(this.gun.position);n=cc.v2(n.x-AD.gameScene.camera.x,n.y+-AD.gameScene.camera.y),t.x<n.x?(this.animNode.scaleX=-this.nodeScaleXTemp,this.shootAngle=Tools.getAngle(t,n),this.gun.angle=-(this.shootAngle-90),this.body.angle=this.gun.angle,this.body.angle>30&&(this.body.angle=30),this.body.angle<-30&&(this.body.angle=-30)):(this.animNode.scaleX=this.nodeScaleXTemp,this.shootAngle=Tools.getAngle(t,n),this.gun.angle=this.shootAngle+90,this.body.angle=this.gun.angle-360,this.body.angle>30&&(this.body.angle=30),this.body.angle<-30&&(this.body.angle=-30))},this),this.touchObj.on(cc.Node.EventType.MOUSE_DOWN,function(e){cc.director.emit("开始射击")},this),this.touchObj.on(cc.Node.EventType.MOUSE_LEAVE,function(e){cc.director.emit("停止射击")},this),this.touchObj.on(cc.Node.EventType.MOUSE_UP,function(e){cc.director.emit("停止射击")},this)}}),cc._RF.pop()},{}],propTips:[function(e,t,n){"use strict";cc._RF.push(t,"a032dHTz3hGr4ErVEZ6Og6S","propTips"),cc.Class({extends:cc.Component,properties:{},start:function(){},reset:function(e){for(var t=0;t<this.node.children.length;t++)this.node.children[t].active=t==e}}),cc._RF.pop()},{}],prop:[function(e,t,n){"use strict";cc._RF.push(t,"752dbiLxXxIWZ9YIAUFHSkm","prop"),cc.Class({extends:cc.Component,properties:{sprNode:cc.Node,tips:cc.Prefab},onLoad:function(){this.typeArr=["回血","加速","护甲","伤害","手雷","无限子弹","火箭筒","变大"],this.sprArr=this.sprNode.children,this.typeIndex=Tools.random(0,this.typeArr.length-1)},start:function(){for(var e=0;e<this.sprArr.length;e++)this.sprArr[e].active=e==this.typeIndex;cc.tween(this.node).repeatForever(cc.tween().by(1,{y:20}).by(1,{y:-20})).start()},onEnable:function(){AD.propNow=this.node},onDisable:function(){AD.propNow=null,AD.gameScene.propDuration=0},onCollisionEnter:function(e,t){switch(e.tag){case 66:this.die(e.node)}},die:function(e){if(!(e.getComponent("player").hp<=0)){if(0==e.getComponent("player").isAI){AD.audioMng.playSfx("吃道具");var t=cc.instantiate(this.tips);t.parent=e.getComponent("player").hpBar,t.getComponent("propTips").reset(this.typeIndex)}
e.getComponent("player").getProp(this.typeArr[this.typeIndex]),this.node.destroy()}}}),cc._RF.pop()},{}],qiangHuaLineListener:[function(e,t,n){"use strict";cc._RF.push(t,"c6d47FKR69Em7XVXCur1qyl","qiangHuaLineListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.btnsCollisionArr=new Array,this.node.opacity=0,this.level=Tools.getIndexInArray2(this.node.parent.parent.children,this.node.parent)},start:function(){this.btnNum=0},reset:function(){var e=this;this.scheduleOnce(function(){if(e.btnsCollisionArr.length>=2)e.node.opacity=255,e.node.scaleX=1;else if(1==e.btnsCollisionArr.length){globalData.getQiangHuaLevel()-1==e.level?0==e.node.opacity&&(e.node.scaleX=0,cc.tween(e.node).to(.5,{scaleX:1}).start(),e.node.opacity=255):cc.tween(e.node).to(.5,{opacity:0}).start()}else e.node.opacity=0},.01)},onCollisionEnter:function(e,t){if(1==e.tag){for(var n=0;n<this.btnsCollisionArr.length;n++)
if(e.node==this.btnsCollisionArr[n])return;this.btnsCollisionArr.push(e.node)}},onCollisionStay:function(e,t){},onCollisionExit:function(e,t){1==e.tag&&Tools.removeElementFromArr2(this.btnsCollisionArr,this.node)}}),cc._RF.pop()},{}],qiangHuaNumListener:[function(e,t,n){"use strict";cc._RF.push(t,"f361505HnFIoYq4gWVpWurz","qiangHuaNumListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.node.getComponent(cc.Label).string=globalData.getQiangHuaNum(),cc.director.on("强化点数量变化",function(){e.node.getComponent(cc.Label).string=globalData.getQiangHuaNum()},this)},start:function(){}}),cc._RF.pop()},{}],rengLeiAnimListener:[function(e,t,n){"use strict";cc._RF.push(t,"81737aYX/pDmqvfcwC7/BQo","rengLeiAnimListener"),cc.Class({extends:cc.Component,properties:{playerNode:cc.Node},reng:function(){this.playerNode.scaleX>0?AD.playerBtMng.createShouLei(this.playerNode.parent,cc.v2(this.playerNode.parent.x+50,this.playerNode.parent.y+50),1):AD.playerBtMng.createShouLei(this.playerNode.parent,cc.v2(this.playerNode.parent.x+-50,this.playerNode.parent.y+50),-1)},over:function(){this.playerNode.parent.getComponent("player").rengLeing=!1}}),cc._RF.pop()},{}],roleInJunXian:[function(e,t,n){"use strict";cc._RF.push(t,"0514e+kUfJJrrivANM4Ioac","roleInJunXian"),cc.Class({extends:cc.Component,properties:{animNode:cc.Node,armNode:cc.Node,armSprArr:[cc.SpriteFrame]},start:function(){},reset:function(e){this.anim=this.animNode.getComponent(sp.Skeleton),this.anim.setSkin("js"+(e+1)),this.armNode.getComponent(cc.Sprite).spriteFrame=this.armSprArr[e]}}),cc._RF.pop()},{}],roleInfoPanel:[function(e,t,n){"use strict";cc._RF.push(t,"2af48Rsv8NFqKHifDJCFdSO","roleInfoPanel"),cc.Class({extends:cc.Component,properties:{chengHaoName:cc.Label,chengHaoIcon:cc.Sprite,chengHaoJingYanLabel:cc.Label,chengHaoBar:cc.Sprite,chengHaoLevel:cc.Label},onLoad:function(){this.chengHaoLevel.string=globalData.getChengHaoLevel()+1,this.chengHaoName.string=AD.chengHaoData[globalData.getChengHaoLevel()].Rank_Name,this.chengHaoIcon.spriteFrame=AD.chengHaoIconArr[globalData.getChengHaoLevel()],this.chengHaoJingYanLabel.string=globalData.getChengHaoEPLevelNow().EPNow+"/"+globalData.getChengHaoEPLevelNow().EPLevelNow,this.chengHaoBar.fillRange=globalData.getChengHaoEPLevelNow().progress},start:function(){}}),cc._RF.pop()},{}],roleShow:[function(e,t,n){"use strict";cc._RF.push(t,"fcb38QZLYdHlLmtn4uzhbbZ","roleShow"),cc.Class({extends:cc.Component,properties:{animNode:cc.Node,armNode:cc.Node,armSprArr:[cc.SpriteFrame],gunNode:cc.Node,gunSprArr:[cc.SpriteFrame]},onLoad:function(){this.anim=this.animNode.getComponent(sp.Skeleton)},start:function(){var e=this;this.anim.setSkin("js"+(globalData.roleType+1)),this.anim.setAnimation(0,"daijizhayan",!0),this.changeRoleSpr(globalData.roleType),this.changeGunSpr(globalData.gunType),cc.director.on("切换展示角色",function(t){e.anim.setSkin("js"+(t+1)),e.changeRoleSpr(t)},this),cc.director.on("切换展示枪支",function(t){e.changeGunSpr(t)},this)},changeRoleSpr:function(e){this.armNode.getComponent(cc.Sprite).spriteFrame=this.armSprArr[e]},changeGunSpr:function(e){globalData.getGunLevel(e)<5?this.gunNode.getComponent(cc.Sprite).spriteFrame=this.gunSprArr[e]:this.gunNode.getComponent(cc.Sprite).spriteFrame=AD.gunGoldIconArr[e]}}),cc._RF.pop()},{}],shopRoleItem:[function(e,t,n){"use strict";cc._RF.push(t,"4cda43e769E7I1HGNBgswf1","shopRoleItem"),cc.Class({extends:cc.Component,properties:{xuanZhongKuang:cc.Node,yiJieSuo:cc.Node,animNode:cc.Node,caiDanLabel:cc.Node,priceLabel:cc.Label,bgNode:cc.Sprite,bgSprArr:[cc.SpriteFrame]},onLoad:function(){var e=this;this.anim=this.animNode.getComponent(sp.Skeleton),cc.director.on("显示选中框",function(t){e.xuanZhongKuang.active=t==e.node,t==e.node&&AD.audioMng.playSfx("按钮")},this)},start:function(){var e=this;cc.director.on("角色解锁成功",function(t){e.index==t&&(AD.audioMng.playSfx("购买成功"),e.reset(t))},this)},reset:function(e){this.priceNum=500+200*e,this.index=e,this.xuanZhongKuang.active=e==globalData.roleType,this.anim.setSkin("js"+(e+1)),this.priceLabel.node.active=!1,this.caiDanLabel.active=!1,0==globalData.getRoleUnlockState(e)&&(e<12||e>15?this.priceLabel.node.active=!0:this.caiDanLabel.active=!0),this.yiJieSuo.active=!(0==globalData.getRoleUnlockState(e)),this.priceLabel.string=this.priceNum,this.bgNode.spriteFrame=e<6?this.bgSprArr[0]:e<12?this.bgSprArr[1]:this.bgSprArr[2],e==globalData.roleType&&cc.director.emit("选中角色",globalData.getRoleUnlockState(this.index)>0,this.priceNum,e)},chooseRole:function(){cc.director.emit("显示选中框",this.node),cc.director.emit("选中角色",globalData.getRoleUnlockState(this.index)>0,this.priceNum,this.index),cc.director.emit("切换展示角色",this.index)}}),cc._RF.pop()},{}],shopScene:[function(e,t,n){"use strict";cc._RF.push(t,"e4c37brMHdErIP/kP7oNpOR","shopScene"),cc.Class({extends:cc.Component,properties:{shopRoleItem:cc.Prefab,shopRoleItemParent:cc.Node,btnUnlockRoleNormal:cc.Node,btnUnlockRoleAD:cc.Node,btnUsed:cc.Node,btnUsing:cc.Node,btnCaiDan:cc.Node,weaponItem:cc.Prefab,weaponItemParent:cc.Node,btnUsedWeapon:cc.Node,btnUsingWeapon:cc.Node,btnUnlockWeapon:cc.Node,caiDan_role15:cc.Node,hpLabel:cc.Label},onLoad:function(){var e=this;cc.director.on("选中角色",function(t,n,i){e.resetRolePanelBtns(t,n,i)},this),this.unlockRolePriceNum=0,cc.director.on("切换枪",function(t){if(globalData.getChengHaoLevel()<globalData.getGunCfg(t,"军衔等级限制")-1)e.btnUsedWeapon.active=!1,e.btnUsingWeapon.active=!1,e.btnUnlockWeapon.active=!1;else{e.chooseGunType=t;var n=globalData.getGunUnlockState(t);e.btnUsedWeapon.active=2==n,e.btnUsingWeapon.active=1==n,e.btnUnlockWeapon.active=0==n}},this),this.caiDan_role15.active=0==globalData.getRoleUnlockState(15),this.clickNum=0,cc.director.on("解锁彩蛋角色",function(t){15==t&&(e.caiDan_role15.active=!1,cc.director.emit("角色解锁成功",15))},this),this.caiDan_role15.on(cc.Node.EventType.TOUCH_START,function(){e.clickNum++,e.clickNum>=10&&cc.director.emit("彩蛋角色",15)},this),this.hpLabel.string=globalData.hpArr[globalData.roleType],cc.director.on("切换展示角色",function(t){e.hpLabel.string=globalData.hpArr[t]},this)},start:function(){this.createRoleItem(),this.createWeaponItem(),AD.showWeaponFirst?(globalData.setShowHongDianNewGun(),cc.find("toggleContainer",this.node).children[0].getComponent(cc.Toggle).isChecked=!1,cc.find("toggleContainer",this.node).children[1].getComponent(cc.Toggle).isChecked=!0):AD.showWeaponFirst&&(cc.find("toggleContainer",this.node).children[0].getComponent(cc.Toggle).isChecked=!0,cc.find("toggleContainer",this.node).children[1].getComponent(cc.Toggle).isChecked=!1),AD.hideBanner(),AD.chaPing()},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "装备":this.unlockRoleSucess();break;case "解锁":globalData.setDiamondNum(-this.unlockRolePriceNum)?this.unlockRoleSucess():(cc.director.emit("系统提示","Not Enough Gems"),this.scheduleOnce(function(){cc.director.emit("显示货币弹窗",!1)},1));break;case "视频解锁":AD.showAD(this.unlockRoleSucess,this);break;case "装备枪支":cc.director.emit("解锁枪支",this.chooseGunType);break;case "视频解锁枪支":AD.showAD(this.unlockGunSucess,this);break;case "切换武器":globalData.setShowHongDianNewGun()}},unlockGunSucess:function(){cc.director.emit("解锁枪支",this.chooseGunType)},unlockRoleSucess:function(){globalData.setRoleUnlockState(this.roleIndexNow),cc.director.emit("角色解锁成功",this.roleIndexNow)},createRoleItem:function(){var e=19;"touTiao"==AD.chanelName1&&AD.delayTime<=0&&(e=12);for(var t=0;t<e;t++){var n=cc.instantiate(this.shopRoleItem);n.parent=this.shopRoleItemParent,n.getComponent("shopRoleItem").reset(t)}},resetRolePanelBtns:function(e,t,n){this.roleIndexNow=n,this.unlockRolePriceNum=t,this.btnUsing.active=!1,this.btnUsed.active=!1,e?(this.btnUnlockRoleAD.active=!1,this.btnUnlockRoleNormal.active=!1,this.btnCaiDan.active=!1,this.btnUsing.active=1==globalData.getRoleUnlockState(n),this.btnUsed.active=2==globalData.getRoleUnlockState(n)):n<12||n>15?(this.btnUnlockRoleAD.active=!0,this.btnUnlockRoleNormal.active=!0,this.btnCaiDan.active=!1):(this.btnUnlockRoleAD.active=!1,this.btnUnlockRoleNormal.active=!1,this.btnCaiDan.active=!0),e||(this.btnUnlockRoleNormal.getChildByName("priceNum").getComponent(cc.Label).string=t)},createWeaponItem:function(){for(var e=0;e<16;e++){var t=cc.instantiate(this.weaponItem);t.parent=this.weaponItemParent,t.getComponent("weaponItem").reset(e)}}}),cc._RF.pop()},{}],shouLei:[function(e,t,n){"use strict";cc._RF.push(t,"9c866jM1DtLk5b/L99s5G05","shouLei"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},reset:function(e,t){var n=this;this.hurtNum=150,this.minDis=200,this.maxDis=400,this.player=e,this.isEnemy=e.getComponent("player").isEnemy,"个人竞技"==globalData.modeType||"生化模式"==globalData.modeType?this.node.children[1].active=e.getComponent("player").isAI:this.node.children[1].active=this.isEnemy,this.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(1300*t,1e3),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){n.bomb()},1.5)},bomb:function(){AD.playerBtMng.createEffectShouLei(this.node.position),Math.abs(this.node.x-AD.gameScene.camera.x)<cc.winSize.width/2+100&&Tools.shakeScreen(1),this.node.destroy();var e=null;switch(globalData.modeType){case "个人竞技":e=AD.playerMng.selfArr;break;case "生化模式":e=AD.playerMng.npcArr;break;default:e=this.isEnemy?AD.playerMng.selfArr:AD.playerMng.enemyArr}
if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n!=this.player){var i=Tools.getDistance(this.node.position,n.position);i<this.minDis?"生化模式"!=globalData.modeType?(n.getComponent("player").beHit(this.hurtNum,this.node.x>n.x,this.player),this.pushRole(n,1)):(n.getComponent("npc").beHit(this.hurtNum,this.node.x>n.x,this.player),n.getComponent("npc").isBig?this.pushRole(n,.5):this.pushRole(n,1)):i<this.maxDis&&("生化模式"!=globalData.modeType?(n.getComponent("player").beHit(this.hurtNum/2,this.node.x>n.x,this.player),this.pushRole(n,.5)):(n.getComponent("npc").beHit(this.hurtNum,this.node.x>n.x,this.player),n.getComponent("npc").isBig?this.pushRole(n,.5):this.pushRole(n,1)))}}},pushRole:function(e,t){var n=Tools.getAngle(e.position,this.node.position),i=-Math.sin(Tools.angleToRadian(n)),o=Math.cos(Tools.angleToRadian(n));e.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(1e4*i*t,1e4*o*t),e.getComponent(cc.RigidBody).getWorldCenter(),!0)}}),cc._RF.pop()},{}],suiBoLi:[function(e,t,n){"use strict";cc._RF.push(t,"cdb6a77pIpHH7KEvA7VTIBN","suiBoLi"),cc.Class({extends:cc.Component,properties:{spr:cc.Node,itemParent:cc.Node},onLoad:function(){cc.game.addPersistRootNode(this.node),this.node.group="UI",this.spr.active=!1,this.itemArr=this.itemParent.children;for(var e=0;e<this.itemArr.length;e++){var t=cc.instantiate(this.spr);t.parent=this.itemArr[e],t.active=!0,t.scale=0;var n=this.spr.parent.convertToWorldSpaceAR(this.spr.position),i=this.itemArr[e].convertToNodeSpaceAR(n);t.position=i}},start:function(){var e=this;cc.director.on("显示方块",function(){e.show()},this),cc.director.on("隐藏方块",function(){e.hide()},this)},onEnable:function(){},show:function(){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].scale=0,cc.tween(this.itemArr[e]).to(.2,{scale:1}).start()},hide:function(){for(var e=0;e<this.itemArr.length;e++)cc.tween(this.itemArr[e]).to(1.2,{scale:0}).start()}}),cc._RF.pop()},{}],tipsGameBeginListenner:[function(e,t,n){"use strict";cc._RF.push(t,"2f0b1rmdQFKV5ywl8tpP23n","tipsGameBeginListenner"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.frame=0},second:function(){this.frame++,console.log("  this.frame "+this.frame),4==this.frame?(cc.director.emit("游戏开始"),AD.audioMng.playSfx("倒计时开始")):AD.audioMng.playSfx("倒计时")}}),cc._RF.pop()},{}],tipsHuanDanZhong:[function(e,t,n){"use strict";cc._RF.push(t,"fd3d2BjUF9DzKkhjHhroC5m","tipsHuanDanZhong"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},reset:function(e){var t=this;this.node.scaleY=0,cc.tween(this.node).to(.2,{scaleY:1}).delay(e-.4).to(.2,{scaleY:0}).call(function(){t.node.destroy()}).start()}}),cc._RF.pop()},{}],tipsManyNpcCome:[function(e,t,n){"use strict";cc._RF.push(t,"1eac8y4MYxED5K4jCPyBdft","tipsManyNpcCome"),cc.Class({extends:cc.Component,properties:{},start:function(){},playEnd:function(){this.node.parent.destroy()}}),cc._RF.pop()},{}],touchListener:[function(e,t,n){"use strict";cc._RF.push(t,"3d932vAdTRBoKI78+1/I+df","touchListener"),cc.Class({extends:cc.Component,properties:{effect:cc.Node,particleArr:[cc.ParticleSystem]},onLoad:function(){var e=this;cc.game.addPersistRootNode(this.node),this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.duration=0,AD.mouseClick=!1,this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(e.node._touchListener.setSwallowTouches(!1),"gameScene"!=cc.director.getScene().name&&!(e.duration>0)){e.duration=1,e.scheduleOnce(function(){e.duration=0},1);var n=e.node.convertToNodeSpaceAR(t.getLocation());e.reset(n)}},this)},start:function(){},reset:function(e){this.effect.position=e;for(var t=0;t<this.particleArr.length;t++)this.particleArr[t].resetSystem()}}),cc._RF.pop()},{}],treeMoveMng:[function(e,t,n){"use strict";cc._RF.push(t,"ab3fdmy/z5NbLRsHdeDk6vq","treeMoveMng"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.treeWidth=this.node.children[0].width,this.treeArr=this.node.children,this.treeNum=this.node.childrenCount,this.speed=1e3,this.minX=AD.mapMng.airWallLeft.x-this.treeWidth,AD.treeMoveMng=this,this.beginNow=!1,AD.audioMng.playSfx("火车"),AD.audioMng.playSfx("汽笛"),this.schedule(function(){AD.gameScene.gameOver||AD.audioMng.playSfx("汽笛")},10)},update:function(e){this.speed<1e3&&(this.speed+=5,1e3==this.speed&&cc.tween(this.node).repeatForever(cc.tween().by(2,{y:30}).by(2,{y:-30})).start());for(var t=0;t<this.treeNum;t++)this.treeArr[t].x-=this.speed*e,this.treeArr[t].x<=this.minX&&(this.treeArr[t].x=0==t?this.treeArr[this.treeNum-1].x+this.treeWidth:this.treeArr[t-1].x+this.treeWidth)}}),cc._RF.pop()},{}],tuanDuiPanel:[function(e,t,n){"use strict";cc._RF.push(t,"61b9e8ulnNNGZY+CgK2bQ8P","tuanDuiPanel"),cc.Class({extends:cc.Component,properties:{geRenItemsParent0:cc.Node,geRenItemsParent1:cc.Node},onLoad:function(){var e=this;this.items0Arr=this.geRenItemsParent0.children,this.matchNum0=1;for(var t=0;t<3;t++)this.items0Arr[t].children[0].active=t<this.matchNum0,this.items0Arr[t].children[0].getComponent(cc.Sprite).spriteFrame=0!=t?AD.roleIconArr[t]:AD.iconSelf;this.schedule(function(){if(Tools.random(1,100)<30&&(e.matchNum0++,e.matchNum0>=3&&e.matchNum1>=3&&cc.director.emit("匹配完成"),e.matchNum0<4))for(var t=0;t<3;t++)e.items0Arr[t].children[0].active=t<e.matchNum0},.3),this.items1Arr=this.geRenItemsParent1.children,this.matchNum1=0;for(t=0;t<3;t++)this.items1Arr[t].children[0].active=t<this.matchNum1,this.items1Arr[t].children[0].getComponent(cc.Sprite).spriteFrame=AD.roleIconArr[t+3];this.schedule(function(){if(Tools.random(1,100)<30&&(e.matchNum1++,e.matchNum0>=3&&e.matchNum1>=3&&cc.director.emit("匹配完成"),e.matchNum1<4))for(var t=0;t<3;t++)e.items1Arr[t].children[0].active=t<e.matchNum1},.3)},start:function(){}}),cc._RF.pop()},{}],tuoDong:[function(e,t,n){"use strict";cc._RF.push(t,"fe087xb5eFBUY+zQU/zR//3","tuoDong"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){e.startPos=t.getLocation()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){Tools.getDistance(e.startPos,t.getLocation())<3&&cc.director.loadScene("menuYuLe")},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var n=t.getDelta();e.node.x+=n.x,e.node.y+=n.y,console.log("eeeeeeeeeeeeeeeeeeeeeee")},this)}}),cc._RF.pop()},{}],upgradeScene:[function(e,t,n){"use strict";cc._RF.push(t,"3b721Vlb4dGLoGLJPSTACKI","upgradeScene"),cc.Class({extends:cc.Component,properties:{btnsArrNode:cc.Node,linesArrNode:cc.Node,qiangHuaDialog:cc.Node,dialogNotEnough:cc.Node},onLoad:function(){this.btnLevelArr=this.btnsArrNode.children,this.lineArr=this.linesArrNode.children,this.lineArr.active=!1,this.dialogNotEnough.active=this.qiangHuaDialog.active=!1},start:function(){var e=this;this.resetBtns(),this.resetLine(),this.btnsAct(),this.scheduleOnce(function(){e.lineArr.active=!0,e.resetBtns()},1.2),AD.hideBanner(),AD.chaPing()},btnsAct:function(){AD.showUpgradeBtnsAct=!1;for(var e=0;e<this.btnsArrNode.children.length;e++)
for(var t=this.btnsArrNode.children[e],n=0;n<t.children.length;n++)t.children[n].scale=0,cc.find("now",t.children[n]).active=!1,cc.find("OK",t.children[n]).active=!1,cc.tween(t.children[n]).delay(.2+.15*e).to(.2,{scale:1}).start()},resetBtns:function(){for(var e=globalData.getQiangHuaLevel(),t=e+1;t<6;t++)
for(var n=0;n<this.btnLevelArr[t].children.length;n++)this.resetBtnItem(this.btnLevelArr[t].children[n],"未解锁");for(t=0;t<e;t++)
for(n=0;n<this.btnLevelArr[t].children.length;n++){var i=this.btnLevelArr[t].children[n];n==globalData.getQiangHuaLine(t)?this.resetBtnItem(i,"已解锁"):this.resetBtnItem(i,"未解锁")}
if(e<6)for(n=0;n<this.btnLevelArr[e].children.length;n++){i=this.btnLevelArr[t].children[n];n==globalData.getQiangHuaLineNextLevel()[0]||n==globalData.getQiangHuaLineNextLevel()[1]?this.resetBtnItem(i,"可解锁"):this.resetBtnItem(i,"未解锁")}
this.resetLine()},resetBtnItem:function(e,t){"未解锁"==t?(cc.find("now",e).active=!1,cc.find("OK",e).active=!1):"已解锁"==t?(cc.find("now",e).active=!1,cc.find("OK",e).active=!0):"可解锁"==t&&(cc.find("now",e).active=!0,cc.find("OK",e).active=!1)},resetLine:function(){globalData.getQiangHuaLevel();for(var e=0;e<5;e++)
for(var t=0;t<this.lineArr[e].children.length;t++)this.lineArr[e].children[t].getComponent("qiangHuaLineListener").reset(),0},getLineIndex:function(){},resetLineItem:function(e,t){"未解锁"==t?(e.scaleX=1,e.active=!1):"LEVEL"==t?(e.scaleX=1,e.active=!0):"正在解锁"==t&&(e.active=!0,e.scaleX=0,cc.tween(e).to(.5,{scaleX:1}).start())},getSucess:function(){globalData.setQiangHuaLevel(!0),cc.director.loadScene("upgradeScene")},btnCallBack:function(e,t){var n=this;switch(AD.audioMng.playSfx("按钮"),t){case "重置":AD.showAD(this.getSucess,this);break;case "返回":cc.director.loadScene("menuScene");break;case "关闭不足":Tools.resetDialog(this.dialogNotEnough,!1);break;case "前往获取":cc.director.loadScene("junXianScene");break;case "再想想":Tools.resetDialog(this.qiangHuaDialog,!1);break;case "强化":if(!globalData.setQiangHuaNum(-globalData.qiangHuaCastArr[globalData.data.qiangHuaLevel]))return this.scheduleOnce(function(){Tools.resetDialog(n.qiangHuaDialog,!1)},1),!1;AD.audioMng.playSfx("购买成功"),Tools.resetDialog(this.qiangHuaDialog,!1),globalData.setQiangHua(this.qiangHuaContent,this.qiangHuaValue);var i=Tools.getIndexInArray2(this.targetItem.parent.parent.children,this.targetItem.parent);globalData.setQiangHuaLine(i),globalData.setQiangHuaLevel(),this.resetBtns()}},btnQiangHuaContent:function(e,t){var n=this;this.qiangHuaContent=t,this.scheduleOnce(function(){n.targetItem=e.target,globalData.getQiangHuaNum()>=globalData.qiangHuaCastArr[globalData.data.qiangHuaLevel]?Tools.resetDialog(n.qiangHuaDialog,!0):Tools.resetDialog(n.dialogNotEnough,!0)},.05)},btnQiangHuaValue:function(e,t){this.qiangHuaValue=parseInt(t)}}),cc._RF.pop()},{}],visibleControl:[function(e,t,n){"use strict";cc._RF.push(t,"8e786cwKtRPTb8hKzoYYZFI","visibleControl"),cc.Class({extends:cc.Component,properties:{targetChanelArr:[cc.String]},onLoad:function(){if(AD.chanelName==AD.chanelName1||"WX"==AD.chanelName){for(var e=!1,t=0;t<this.targetChanelArr.length;t++)
if(AD.chanelName==this.targetChanelArr[t]){e=!0;break}
this.node.active=e}else this.node.active=!1},start:function(){}}),cc._RF.pop()},{}],vivo_ChaPingVide:[function(e,t,n){"use strict";cc._RF.push(t,"1cb7adoB6xCSqEnsIiYnVX4","vivo_ChaPingVide"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentNode=null,t.zheZhao=null,t.title=null,t.desc=null,t.icon=null,t.img=null,t.isBanner=!1,t.h=1,t.timmerForShow=0,t.timmerMax=5,t}
return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.timmerForShow=0,this.schedule(function(){e.timmerForShow++},1),this.currentNode.on(cc.Node.EventType.TOUCH_START,function(){window.AD.chanelName==window.AD.chanelName1&&(e.reportAdClick(),e.pageClose())},this)},t.prototype.start=function(){"vivo"!=window.AD.chanelName1&&this.node.destroy(),cc.game.addPersistRootNode(this.node);var e=cc.winSize.height,t=cc.winSize.width;this.node.x=t/2,this.isBanner?this.node.y=this.h:this.node.y=e/2,this.node.group="UI",this.isBanner?(cc.director.on("vivo_bannerShow",this.pageShow,this),cc.director.on("vivo_bannerClose",this.pageClose,this),console.log("banner **** 注册监听")):(cc.director.on("vivo_ChaPingClose",this.pageClose,this),cc.director.on("vivo_ChaPingShow",this.pageShow,this)),cc.director.on("vivo_dataShuaXin",this.dataUpdate,this)},t.prototype.setLocation=function(e,t){this.node.x=e,this.node.y=t},t.prototype.pageShow=function(){if(console.log("****pageShow"),this.isBanner)console.log("显示banner****pageShow");else if(0==window.AD_vivo.chaPingBoo||this.timmerForShow<this.timmerMax)return;this.timmerForShow=0,this.currentNode.active=!0,this.zheZhao.active=!0,this.dataUpdate()},t.prototype.pageClose=function(){this.currentNode.active=!1,this.zheZhao.active=!1,cc.director.emit("nextBxtnShow"),this.isBanner&&console.log("banner关闭")},t.prototype.dataUpdate=function(){if(0!=this.currentNode.active){var e=window.AD_vivo.result;if(null!=e){this.isBanner||(this.scheduleOnce(function(){cc.director.emit("vivo_bannerClose")},.05),this.currentNode.scale=0,this.zheZhao.opacity=0,cc.tween(this.zheZhao).to(.2,{opacity:150}).start(),cc.tween(this.currentNode).to(.2,{scale:1}).start()),this.currentNode.active=!0,this.zheZhao.active=!0,console.log("展示数据2  "),this.isBanner?console.log("广告类型是 banner 坐标是 "+this.node.position):console.log("广告类型是 插屏 坐标是 "+this.node.position),this.reportAdShow(),this.title.string=e.title,this.desc.string=e.desc;var t=e.icon,n=e.imgUrlList[0],i=this.icon.getComponent(cc.Sprite),o=this.img.getComponent(cc.Sprite);""!=t?(this.icon.active=!0,cc.loader.load(t,function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);i.spriteFrame=n}})):this.icon.active=!1;var a=n.indexOf(".png")>=0,c=n.indexOf(".jpg")>=0;if(a||c){var s=n.split("?");cc.assetManager.loadRemote(s[0],function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);o.spriteFrame=n}})}else cc.assetManager.loadRemote(n,{ext:".png"},function(e,t){if(e)console.log(e);else{var n=new cc.SpriteFrame(t);o.spriteFrame=n}})}else this.isBanner&&console.log("banner原生数据为null "),this.currentNode.active=!1,this.zheZhao.active=!1}},t.prototype.reportAdClick=function(){if(1!=window.AD_vivo.reportClick){var e=window.AD_vivo.result,t=window.AD_vivo.nativeAd;null!=e&&(t.reportAdClick({adId:e.adId.toString()}),window.AD_vivo.reportClick=!0,console.log("下载上报 &&  加载新数据"),this.pageClose(),window.AD_vivo.loadData())}},t.prototype.reportAdShow=function(){if(1!=window.AD_vivo.reportShow){var e=window.AD_vivo.result,t=window.AD_vivo.nativeAd;null!=e&&(t.reportAdShow({adId:e.adId.toString()}),window.AD_vivo.reportShow=!0,console.log("展示上报"))}},t.prototype.touchHanler=function(e,t){switch(t){case "点击":if(window.AD.chanelName!=window.AD.chanelName1)return;this.reportAdClick(),this.pageClose();break;case "关闭":console.log("关闭插屏"),window.AD.couldZDJ()&&this.reportAdClick(),this.pageClose()}},__decorate([a({type:cc.Node,displayName:"当前界面节点"})],t.prototype,"currentNode",void 0),__decorate([a({type:cc.Node,displayName:"遮罩"})],t.prototype,"zheZhao",void 0),__decorate([a({type:cc.Label,displayName:"title"})],t.prototype,"title",void 0),__decorate([a({type:cc.Label,displayName:"desc"})],t.prototype,"desc",void 0),__decorate([a({type:cc.Node,displayName:"icon"})],t.prototype,"icon",void 0),__decorate([a({type:cc.Node,displayName:"img"})],t.prototype,"img",void 0),__decorate([a({displayName:"是banner吗"})],t.prototype,"isBanner",void 0),__decorate([a({type:cc.Integer,displayName:"距离底部高度",visible:function(){return this.isBanner}})],t.prototype,"h",void 0),t=__decorate([o],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],weaponItem:[function(e,t,n){"use strict";cc._RF.push(t,"3681cgi9dpMFIWgjU++lEi5","weaponItem"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,levelLabel:cc.Label,starsParent:cc.Node,btnUnlockNormal:cc.Node,priceUnlockLabel:cc.Label,btnUnlockAD:cc.Node,btnUpgradeNormal:cc.Node,priceUpgradeLabel:cc.Label,btnUpgradeAD:cc.Node,xuanZhongKuang:cc.Node,maxLevel:cc.Node,gunSpr:cc.Sprite,unlockTips:cc.Label,unlockTipsName:cc.Label,unlockTipsIcon:cc.Sprite,upgradeSucessEffect:cc.Prefab},start:function(){var e=this;cc.director.on("切换枪",function(t){e.xuanZhongKuang.active=e.gunType==t},this),cc.director.on("解锁枪支",function(t){t==e.gunType&&(globalData.getChengHaoLevel()<globalData.getGunCfg(e.gunType,"军衔等级限制")-1?cc.director.emit("系统提示","军衔等级限制 "+globalData.getGunCfg(e.gunType,"军衔等级限制")+" Lv"):e.unlockSucess())},this)},reset:function(e){globalData.getGunLevel(e)<5?this.gunSpr.spriteFrame=AD.gunIconArr[e]:this.gunSpr.spriteFrame=AD.gunGoldIconArr[e],this.nameLabel.string=globalData.getGunCfg(e,"名称");var t=globalData.getGunLevel(e);this.gunType=e,this.gunLevel=t,this.levelLabel.string=t;for(var n=0;n<5;n++)this.starsParent.children[n].active=n<t;this.maxLevel.active=t>=5,this.priceNumUnlock=globalData.getGunCfg(e,"解锁价格");var i=globalData.getGunUnlockState(e);this.btnUnlockNormal.active=0==i,this.btnUnlockAD.active=0==i,this.priceUnlockLabel.string=this.priceNumUnlock,this.priceUpgrade=globalData.getGunCfg(e,"升级价格"+t),i>0?(this.btnUpgradeNormal.active=t<5,this.btnUpgradeAD.active=t<5):(this.btnUpgradeNormal.active=!1,this.btnUpgradeAD.active=!1),this.priceUpgradeLabel.string=this.priceUpgrade,this.xuanZhongKuang.active=e==globalData.gunType,e==globalData.gunType&&cc.director.emit("切换枪",this.gunType);var o=globalData.getGunCfg(this.gunType,"军衔等级限制")-1;globalData.getChengHaoLevel()<globalData.getGunCfg(this.gunType,"军衔等级限制")-1?(this.btnUpgradeAD.active=!1,this.btnUpgradeNormal.active=!1,this.btnUnlockAD.active=!1,this.btnUnlockNormal.active=!1,this.maxLevel.active=!1,this.unlockTips.node.parent.active=!0,this.unlockTips.string=globalData.getGunCfg(this.gunType,"军衔等级限制")+"级",this.unlockTipsName.string=AD.chengHaoData[o].Rank_Name,this.unlockTipsIcon.spriteFrame=AD.chengHaoIconArr[o]):this.unlockTips.node.parent.active=!1},btnCallBack:function(e,t){switch(AD.audioMng.playSfx("按钮"),t){case "普通解锁":if(globalData.getChengHaoLevel()<globalData.getGunCfg(this.gunType,"军衔等级限制")-1)return void cc.director.emit("系统提示","军衔等级需要达到 "+globalData.getGunCfg(this.gunType,"军衔等级限制")+" Lv");globalData.setDiamondNum(-this.priceNumUnlock)?this.unlockSucess():(cc.director.emit("系统提示","Need Gems"),this.scheduleOnce(function(){cc.director.emit("显示货币弹窗",!1)},1));break;case "视频解锁":globalData.getChengHaoLevel()<globalData.getGunCfg(this.gunType,"军衔等级限制")-1?cc.director.emit("系统提示","军衔等级需要达到 "+globalData.getGunCfg(this.gunType,"军衔等级限制")+" Lv"):AD.showAD(this.unlockSucess,this);break;case "普通升级":globalData.setCoinNum(-this.priceUpgrade)?this.upgradeSucess():(cc.director.emit("系统提示","Need Coins"),this.scheduleOnce(function(){cc.director.emit("显示货币弹窗",!0)},1));break;case "视频升级":AD.showAD(this.upgradeSucess,this)}
cc.director.emit("切换枪",this.gunType),cc.director.emit("切换展示枪支",this.gunType)},unlockSucess:function(){AD.audioMng.playSfx("购买成功"),globalData.setGunUnlockState(this.gunType),this.reset(this.gunType)},upgradeSucess:function(){globalData.setGunLevel(this.gunType),this.reset(this.gunType);var e=cc.instantiate(this.upgradeSucessEffect);e.parent=this.node,e.position=cc.v2(-100,-20),cc.tween(e).delay(2).call(function(){e.destroy()}).start()}}),cc._RF.pop()},{}],wind:[function(e,t,n){"use strict";cc._RF.push(t,"48fedjq/B9PUZwhgk+3ghLl","wind"),cc.Class({extends:cc.Component,properties:{},start:function(){this.timmer=0},onCollisionStay:function(e,t){66==e.tag&&this.timmer<=0&&(this.timmer=.01*Tools.random(10,15),e.node.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(0,Tools.random(3e3,3500)),e.node.getComponent(cc.RigidBody).getWorldCenter(),!0))},update:function(e){this.timmer>0&&(this.timmer-=e)}}),cc._RF.pop()},{}],yinSiPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1e837+wgo5KR69zS5Tur+1Z","yinSiPanel"),cc.Class({extends:cc.Component,properties:{dialogYinSi:cc.Node,zhuTiName:"主体名称"},onLoad:function(){this.btnYinSi=cc.find("btnShowYinSi",this.node),this.dialogYinSi.active=!1,this.keFu=cc.find("keFuLabel",this.node),AD.isAndroid?"oppo"==AD.chanel||"vivo"==AD.chanel||"233"==AD.chanelName?(this.btnYinSi.active=!0,this.keFu.active=!0):(this.btnYinSi.active=!1,this.keFu.active=!1):"oppo"==AD.chanelName||"vivo"==AD.chanelName?(this.btnYinSi.active=!0,this.keFu.active=!0):(this.btnYinSi.active=!1,this.keFu.active=!1)},start:function(){this.btnYinSi.active&&(globalData.data.showYinSi?(this.dialogYinSi.active=!1,AD.delayTime>0&&this.checkPermission()):this.dialogYinSi.active=!0)},btnCallBack:function(e,t){this.dialogYinSi.active=!0},checkPermission:function(){AD.isAndroid&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","checkPermission","(Ljava/lang/String;)V","申请权限")}}),cc._RF.pop()},{}]},{},["AD","AD_4399Box","AD_BD","AD_QQ","AD_QQ_BlockAD","AD_TouTiao","AD_UC","AD_WX","AD_android","AD_oppo","oppo_ChaPingVide","AD_vivo","vivo_ChaPingVide","Tools","actFide","actScale_ball","adIconControl","audioMng","btnCloseDelay","btnCloseTTControl","coinFly","coinNumLitenter","dialogMng","globalNode","guoChang","guoDuEffect","loadBundle","logoControl","suiBoLi","visibleControl","dialogChouJiang","dialogCoinAndDiamond","dialogGetReward","dialogHuoDong","dialogMaxLevelGun","dialogOver","dialogOverRoleControl","dialogPause","dialogRevive","dialogRole","dialogScorePanel","dialogScorePanelBtnShareParticle","dialogScorePanelItem","dialogSign","dialogXianLiangRole","btnsPanel","guide","killNumPanel","labelMng","leftAndRight","gameScene","bombPlayerToMid","btNumListener","btnScaleBy4399PC","bulletShell","c4Bomb","c4OnRole","coudBeDestroy","dianWang","flag","hurtNumTips","rengLeiAnimListener","shouLei","tipsGameBeginListenner","tipsHuanDanZhong","tipsManyNpcCome","treeMoveMng","wind","effectBoxBomb","effectFuChou","effectHit","effectJiaXue","effectLianSha","effectMng","mapMng","npc","player","playerBt","playerBtMng","playerLine","playerMng","prop","propTips","junXianItem","junXianScene","roleInJunXian","loadScene","geRenPanel","matchScene","playerNumRandom","tuanDuiPanel","hongDian","menuJingJi","menuScene","menuYuLe","menuYuLeBtnAct","btnBackListener","btnCallBackSome","coinNumListener","diamondNumListener","numClickListener","paoMaDengMng","qiangHuaLineListener","qiangHuaNumListener","roleInfoPanel","roleShow","touchListener","tuoDong","gunConfig","shopRoleItem","shopScene","weaponItem","upgradeScene","dialogYinSi","yinSiPanel"]);